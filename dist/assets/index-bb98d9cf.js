var UP=Object.defineProperty;var OP=(n,e,t)=>e in n?UP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _i=(n,e,t)=>(OP(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Yp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var XE={exports:{}},qp={},jE={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=Symbol.for("react.element"),kP=Symbol.for("react.portal"),FP=Symbol.for("react.fragment"),zP=Symbol.for("react.strict_mode"),BP=Symbol.for("react.profiler"),HP=Symbol.for("react.provider"),VP=Symbol.for("react.context"),GP=Symbol.for("react.forward_ref"),WP=Symbol.for("react.suspense"),XP=Symbol.for("react.memo"),jP=Symbol.for("react.lazy"),bS=Symbol.iterator;function YP(n){return n===null||typeof n!="object"?null:(n=bS&&n[bS]||n["@@iterator"],typeof n=="function"?n:null)}var YE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qE=Object.assign,$E={};function lu(n,e,t){this.props=n,this.context=e,this.refs=$E,this.updater=t||YE}lu.prototype.isReactComponent={};lu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};lu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function ZE(){}ZE.prototype=lu.prototype;function Ky(n,e,t){this.props=n,this.context=e,this.refs=$E,this.updater=t||YE}var Jy=Ky.prototype=new ZE;Jy.constructor=Ky;qE(Jy,lu.prototype);Jy.isPureReactComponent=!0;var PS=Array.isArray,KE=Object.prototype.hasOwnProperty,Qy={current:null},JE={key:!0,ref:!0,__self:!0,__source:!0};function QE(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)KE.call(e,i)&&!JE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];r.children=c}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ff,type:n,key:s,ref:o,props:r,_owner:Qy.current}}function qP(n,e){return{$$typeof:ff,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function e_(n){return typeof n=="object"&&n!==null&&n.$$typeof===ff}function $P(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var RS=/\/+/g;function Gg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?$P(""+n.key):e.toString(36)}function jh(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ff:case kP:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Gg(o,0):i,PS(r)?(t="",n!=null&&(t=n.replace(RS,"$&/")+"/"),jh(r,e,t,"",function(f){return f})):r!=null&&(e_(r)&&(r=qP(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(RS,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",PS(n))for(var a=0;a<n.length;a++){s=n[a];var c=i+Gg(s,a);o+=jh(s,e,t,c,r)}else if(c=YP(n),typeof c=="function")for(n=c.call(n),a=0;!(s=n.next()).done;)s=s.value,c=i+Gg(s,a++),o+=jh(s,e,t,c,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nd(n,e,t){if(n==null)return n;var i=[],r=0;return jh(n,i,"","",function(s){return e.call(t,s,r++)}),i}function ZP(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var di={current:null},Yh={transition:null},KP={ReactCurrentDispatcher:di,ReactCurrentBatchConfig:Yh,ReactCurrentOwner:Qy};Et.Children={map:Nd,forEach:function(n,e,t){Nd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Nd(n,function(){e++}),e},toArray:function(n){return Nd(n,function(e){return e})||[]},only:function(n){if(!e_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Et.Component=lu;Et.Fragment=FP;Et.Profiler=BP;Et.PureComponent=Ky;Et.StrictMode=zP;Et.Suspense=WP;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KP;Et.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=qE({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qy.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)KE.call(e,c)&&!JE.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:ff,type:n.type,key:r,ref:s,props:i,_owner:o}};Et.createContext=function(n){return n={$$typeof:VP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:HP,_context:n},n.Consumer=n};Et.createElement=QE;Et.createFactory=function(n){var e=QE.bind(null,n);return e.type=n,e};Et.createRef=function(){return{current:null}};Et.forwardRef=function(n){return{$$typeof:GP,render:n}};Et.isValidElement=e_;Et.lazy=function(n){return{$$typeof:jP,_payload:{_status:-1,_result:n},_init:ZP}};Et.memo=function(n,e){return{$$typeof:XP,type:n,compare:e===void 0?null:e}};Et.startTransition=function(n){var e=Yh.transition;Yh.transition={};try{n()}finally{Yh.transition=e}};Et.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Et.useCallback=function(n,e){return di.current.useCallback(n,e)};Et.useContext=function(n){return di.current.useContext(n)};Et.useDebugValue=function(){};Et.useDeferredValue=function(n){return di.current.useDeferredValue(n)};Et.useEffect=function(n,e){return di.current.useEffect(n,e)};Et.useId=function(){return di.current.useId()};Et.useImperativeHandle=function(n,e,t){return di.current.useImperativeHandle(n,e,t)};Et.useInsertionEffect=function(n,e){return di.current.useInsertionEffect(n,e)};Et.useLayoutEffect=function(n,e){return di.current.useLayoutEffect(n,e)};Et.useMemo=function(n,e){return di.current.useMemo(n,e)};Et.useReducer=function(n,e,t){return di.current.useReducer(n,e,t)};Et.useRef=function(n){return di.current.useRef(n)};Et.useState=function(n){return di.current.useState(n)};Et.useSyncExternalStore=function(n,e,t){return di.current.useSyncExternalStore(n,e,t)};Et.useTransition=function(){return di.current.useTransition()};Et.version="18.2.0";jE.exports=Et;var me=jE.exports;const df=Yp(me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP=me,QP=Symbol.for("react.element"),eR=Symbol.for("react.fragment"),tR=Object.prototype.hasOwnProperty,nR=JP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iR={key:!0,ref:!0,__self:!0,__source:!0};function eT(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)tR.call(e,i)&&!iR.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:QP,type:n,key:s,ref:o,props:r,_owner:nR.current}}qp.Fragment=eR;qp.jsx=eT;qp.jsxs=eT;XE.exports=qp;var lt=XE.exports,av={},tT={exports:{}},Vi={},nT={exports:{}},iT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,H){var z=D.length;D.push(H);e:for(;0<z;){var oe=z-1>>>1,W=D[oe];if(0<r(W,H))D[oe]=H,D[z]=W,z=oe;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var H=D[0],z=D.pop();if(z!==H){D[0]=z;e:for(var oe=0,W=D.length,X=W>>>1;oe<X;){var j=2*(oe+1)-1,ce=D[j],V=j+1,B=D[V];if(0>r(ce,z))V<W&&0>r(B,ce)?(D[oe]=B,D[V]=z,oe=V):(D[oe]=ce,D[j]=z,oe=j);else if(V<W&&0>r(B,z))D[oe]=B,D[V]=z,oe=V;else break e}}return H}function r(D,H){var z=D.sortIndex-H.sortIndex;return z!==0?z:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],f=[],d=1,h=null,m=3,v=!1,_=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var H=t(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=D)i(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(D){if(w=!1,S(D),!_)if(t(c)!==null)_=!0,ue(C);else{var H=t(f);H!==null&&ne(T,H.startTime-D)}}function C(D,H){_=!1,w&&(w=!1,g(I),I=-1),v=!0;var z=m;try{for(S(H),h=t(c);h!==null&&(!(h.expirationTime>H)||D&&!G());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,m=h.priorityLevel;var W=oe(h.expirationTime<=H);H=n.unstable_now(),typeof W=="function"?h.callback=W:h===t(c)&&i(c),S(H)}else i(c);h=t(c)}if(h!==null)var X=!0;else{var j=t(f);j!==null&&ne(T,j.startTime-H),X=!1}return X}finally{h=null,m=z,v=!1}}var P=!1,R=null,I=-1,b=5,L=-1;function G(){return!(n.unstable_now()-L<b)}function K(){if(R!==null){var D=n.unstable_now();L=D;var H=!0;try{H=R(!0,D)}finally{H?q():(P=!1,R=null)}}else P=!1}var q;if(typeof x=="function")q=function(){x(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Q=te.port2;te.port1.onmessage=K,q=function(){Q.postMessage(null)}}else q=function(){M(K,0)};function ue(D){R=D,P||(P=!0,q())}function ne(D,H){I=M(function(){D(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,ue(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var z=m;m=H;try{return D()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=m;m=D;try{return H()}finally{m=z}},n.unstable_scheduleCallback=function(D,H,z){var oe=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?oe+z:oe):z=oe,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,D={id:d++,callback:H,priorityLevel:D,startTime:z,expirationTime:W,sortIndex:-1},z>oe?(D.sortIndex=z,e(f,D),t(c)===null&&D===t(f)&&(w?(g(I),I=-1):w=!0,ne(T,z-oe))):(D.sortIndex=W,e(c,D),_||v||(_=!0,ue(C))),D},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(D){var H=m;return function(){var z=m;m=H;try{return D.apply(this,arguments)}finally{m=z}}}})(iT);nT.exports=iT;var rR=nT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT=me,Hi=rR;function Le(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sT=new Set,Cc={};function Pa(n,e){ql(n,e),ql(n+"Capture",e)}function ql(n,e){for(Cc[n]=e,n=0;n<e.length;n++)sT.add(e[n])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lv=Object.prototype.hasOwnProperty,sR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LS={},IS={};function oR(n){return lv.call(IS,n)?!0:lv.call(LS,n)?!1:sR.test(n)?IS[n]=!0:(LS[n]=!0,!1)}function aR(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function lR(n,e,t,i){if(e===null||typeof e>"u"||aR(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Bn[n]=new hi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Bn[e]=new hi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Bn[n]=new hi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Bn[n]=new hi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Bn[n]=new hi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Bn[n]=new hi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Bn[n]=new hi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Bn[n]=new hi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Bn[n]=new hi(n,5,!1,n.toLowerCase(),null,!1,!1)});var t_=/[\-:]([a-z])/g;function n_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(t_,n_);Bn[e]=new hi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(t_,n_);Bn[e]=new hi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(t_,n_);Bn[e]=new hi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Bn[n]=new hi(n,1,!1,n.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Bn[n]=new hi(n,1,!1,n.toLowerCase(),null,!0,!0)});function i_(n,e,t,i){var r=Bn.hasOwnProperty(e)?Bn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lR(e,t,r,i)&&(t=null),i||r===null?oR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Os=rT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ud=Symbol.for("react.element"),xl=Symbol.for("react.portal"),Sl=Symbol.for("react.fragment"),r_=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),oT=Symbol.for("react.provider"),aT=Symbol.for("react.context"),s_=Symbol.for("react.forward_ref"),cv=Symbol.for("react.suspense"),fv=Symbol.for("react.suspense_list"),o_=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),lT=Symbol.for("react.offscreen"),DS=Symbol.iterator;function zu(n){return n===null||typeof n!="object"?null:(n=DS&&n[DS]||n["@@iterator"],typeof n=="function"?n:null)}var tn=Object.assign,Wg;function sc(n){if(Wg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Wg=e&&e[1]||""}return`
`+Wg+n}var Xg=!1;function jg(n,e){if(!n||Xg)return"";Xg=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{Xg=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?sc(n):""}function uR(n){switch(n.tag){case 5:return sc(n.type);case 16:return sc("Lazy");case 13:return sc("Suspense");case 19:return sc("SuspenseList");case 0:case 2:case 15:return n=jg(n.type,!1),n;case 11:return n=jg(n.type.render,!1),n;case 1:return n=jg(n.type,!0),n;default:return""}}function dv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Sl:return"Fragment";case xl:return"Portal";case uv:return"Profiler";case r_:return"StrictMode";case cv:return"Suspense";case fv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case aT:return(n.displayName||"Context")+".Consumer";case oT:return(n._context.displayName||"Context")+".Provider";case s_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case o_:return e=n.displayName||null,e!==null?e:dv(n.type)||"Memo";case Qs:e=n._payload,n=n._init;try{return dv(n(e))}catch{}}return null}function cR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dv(e);case 8:return e===r_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function uT(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fR(n){var e=uT(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Od(n){n._valueTracker||(n._valueTracker=fR(n))}function cT(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=uT(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function hp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function hv(n,e){var t=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function NS(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Mo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fT(n,e){e=e.checked,e!=null&&i_(n,"checked",e,!1)}function pv(n,e){fT(n,e);var t=Mo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?mv(n,e.type,t):e.hasOwnProperty("defaultValue")&&mv(n,e.type,Mo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function US(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function mv(n,e,t){(e!=="number"||hp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var oc=Array.isArray;function Fl(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Mo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function gv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Le(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function OS(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Le(92));if(oc(t)){if(1<t.length)throw Error(Le(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Mo(t)}}function dT(n,e){var t=Mo(e.value),i=Mo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function kS(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function hT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?hT(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var kd,pT=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(kd=kd||document.createElement("div"),kd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function bc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dR=["Webkit","ms","Moz","O"];Object.keys(fc).forEach(function(n){dR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),fc[e]=fc[n]})});function mT(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||fc.hasOwnProperty(n)&&fc[n]?(""+e).trim():e+"px"}function gT(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=mT(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var hR=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yv(n,e){if(e){if(hR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Le(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Le(62))}}function _v(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xv=null;function a_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sv=null,zl=null,Bl=null;function FS(n){if(n=mf(n)){if(typeof Sv!="function")throw Error(Le(280));var e=n.stateNode;e&&(e=Qp(e),Sv(n.stateNode,n.type,e))}}function vT(n){zl?Bl?Bl.push(n):Bl=[n]:zl=n}function yT(){if(zl){var n=zl,e=Bl;if(Bl=zl=null,FS(n),e)for(n=0;n<e.length;n++)FS(e[n])}}function _T(n,e){return n(e)}function xT(){}var Yg=!1;function ST(n,e,t){if(Yg)return n(e,t);Yg=!0;try{return _T(n,e,t)}finally{Yg=!1,(zl!==null||Bl!==null)&&(xT(),yT())}}function Pc(n,e){var t=n.stateNode;if(t===null)return null;var i=Qp(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Le(231,e,typeof t));return t}var Mv=!1;if(Ps)try{var Bu={};Object.defineProperty(Bu,"passive",{get:function(){Mv=!0}}),window.addEventListener("test",Bu,Bu),window.removeEventListener("test",Bu,Bu)}catch{Mv=!1}function pR(n,e,t,i,r,s,o,a,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(d){this.onError(d)}}var dc=!1,pp=null,mp=!1,wv=null,mR={onError:function(n){dc=!0,pp=n}};function gR(n,e,t,i,r,s,o,a,c){dc=!1,pp=null,pR.apply(mR,arguments)}function vR(n,e,t,i,r,s,o,a,c){if(gR.apply(this,arguments),dc){if(dc){var f=pp;dc=!1,pp=null}else throw Error(Le(198));mp||(mp=!0,wv=f)}}function Ra(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function MT(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function zS(n){if(Ra(n)!==n)throw Error(Le(188))}function yR(n){var e=n.alternate;if(!e){if(e=Ra(n),e===null)throw Error(Le(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return zS(r),n;if(s===i)return zS(r),e;s=s.sibling}throw Error(Le(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Le(189))}}if(t.alternate!==i)throw Error(Le(190))}if(t.tag!==3)throw Error(Le(188));return t.stateNode.current===t?n:e}function wT(n){return n=yR(n),n!==null?ET(n):null}function ET(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ET(n);if(e!==null)return e;n=n.sibling}return null}var TT=Hi.unstable_scheduleCallback,BS=Hi.unstable_cancelCallback,_R=Hi.unstable_shouldYield,xR=Hi.unstable_requestPaint,fn=Hi.unstable_now,SR=Hi.unstable_getCurrentPriorityLevel,l_=Hi.unstable_ImmediatePriority,AT=Hi.unstable_UserBlockingPriority,gp=Hi.unstable_NormalPriority,MR=Hi.unstable_LowPriority,CT=Hi.unstable_IdlePriority,$p=null,Jr=null;function wR(n){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot($p,n,void 0,(n.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:AR,ER=Math.log,TR=Math.LN2;function AR(n){return n>>>=0,n===0?32:31-(ER(n)/TR|0)|0}var Fd=64,zd=4194304;function ac(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vp(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=ac(a):(s&=o,s!==0&&(i=ac(s)))}else o=t&~r,o!==0?i=ac(o):s!==0&&(i=ac(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-br(e),r=1<<t,i|=n[t],e&=~r;return i}function CR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bR(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-br(s),a=1<<o,c=r[o];c===-1?(!(a&t)||a&i)&&(r[o]=CR(a,e)):c<=e&&(n.expiredLanes|=a),s&=~a}}function Ev(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function bT(){var n=Fd;return Fd<<=1,!(Fd&4194240)&&(Fd=64),n}function qg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function hf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-br(e),n[e]=t}function PR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-br(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function u_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-br(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Ot=0;function PT(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var RT,c_,LT,IT,DT,Tv=!1,Bd=[],uo=null,co=null,fo=null,Rc=new Map,Lc=new Map,no=[],RR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HS(n,e){switch(n){case"focusin":case"focusout":uo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":Rc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(e.pointerId)}}function Hu(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=mf(e),e!==null&&c_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function LR(n,e,t,i,r){switch(e){case"focusin":return uo=Hu(uo,n,e,t,i,r),!0;case"dragenter":return co=Hu(co,n,e,t,i,r),!0;case"mouseover":return fo=Hu(fo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Rc.set(s,Hu(Rc.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Lc.set(s,Hu(Lc.get(s)||null,n,e,t,i,r)),!0}return!1}function NT(n){var e=oa(n.target);if(e!==null){var t=Ra(e);if(t!==null){if(e=t.tag,e===13){if(e=MT(t),e!==null){n.blockedOn=e,DT(n.priority,function(){LT(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function qh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Av(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);xv=i,t.target.dispatchEvent(i),xv=null}else return e=mf(t),e!==null&&c_(e),n.blockedOn=t,!1;e.shift()}return!0}function VS(n,e,t){qh(n)&&t.delete(e)}function IR(){Tv=!1,uo!==null&&qh(uo)&&(uo=null),co!==null&&qh(co)&&(co=null),fo!==null&&qh(fo)&&(fo=null),Rc.forEach(VS),Lc.forEach(VS)}function Vu(n,e){n.blockedOn===e&&(n.blockedOn=null,Tv||(Tv=!0,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,IR)))}function Ic(n){function e(r){return Vu(r,n)}if(0<Bd.length){Vu(Bd[0],n);for(var t=1;t<Bd.length;t++){var i=Bd[t];i.blockedOn===n&&(i.blockedOn=null)}}for(uo!==null&&Vu(uo,n),co!==null&&Vu(co,n),fo!==null&&Vu(fo,n),Rc.forEach(e),Lc.forEach(e),t=0;t<no.length;t++)i=no[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<no.length&&(t=no[0],t.blockedOn===null);)NT(t),t.blockedOn===null&&no.shift()}var Hl=Os.ReactCurrentBatchConfig,yp=!0;function DR(n,e,t,i){var r=Ot,s=Hl.transition;Hl.transition=null;try{Ot=1,f_(n,e,t,i)}finally{Ot=r,Hl.transition=s}}function NR(n,e,t,i){var r=Ot,s=Hl.transition;Hl.transition=null;try{Ot=4,f_(n,e,t,i)}finally{Ot=r,Hl.transition=s}}function f_(n,e,t,i){if(yp){var r=Av(n,e,t,i);if(r===null)r0(n,e,i,_p,t),HS(n,i);else if(LR(r,n,e,t,i))i.stopPropagation();else if(HS(n,i),e&4&&-1<RR.indexOf(n)){for(;r!==null;){var s=mf(r);if(s!==null&&RT(s),s=Av(n,e,t,i),s===null&&r0(n,e,i,_p,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else r0(n,e,i,null,t)}}var _p=null;function Av(n,e,t,i){if(_p=null,n=a_(i),n=oa(n),n!==null)if(e=Ra(n),e===null)n=null;else if(t=e.tag,t===13){if(n=MT(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return _p=n,null}function UT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SR()){case l_:return 1;case AT:return 4;case gp:case MR:return 16;case CT:return 536870912;default:return 16}default:return 16}}var oo=null,d_=null,$h=null;function OT(){if($h)return $h;var n,e=d_,t=e.length,i,r="value"in oo?oo.value:oo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return $h=r.slice(n,1<i?1-i:void 0)}function Zh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Hd(){return!0}function GS(){return!1}function Gi(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hd:GS,this.isPropagationStopped=GS,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Hd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Hd)},persist:function(){},isPersistent:Hd}),e}var uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h_=Gi(uu),pf=tn({},uu,{view:0,detail:0}),UR=Gi(pf),$g,Zg,Gu,Zp=tn({},pf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p_,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gu&&(Gu&&n.type==="mousemove"?($g=n.screenX-Gu.screenX,Zg=n.screenY-Gu.screenY):Zg=$g=0,Gu=n),$g)},movementY:function(n){return"movementY"in n?n.movementY:Zg}}),WS=Gi(Zp),OR=tn({},Zp,{dataTransfer:0}),kR=Gi(OR),FR=tn({},pf,{relatedTarget:0}),Kg=Gi(FR),zR=tn({},uu,{animationName:0,elapsedTime:0,pseudoElement:0}),BR=Gi(zR),HR=tn({},uu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),VR=Gi(HR),GR=tn({},uu,{data:0}),XS=Gi(GR),WR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=jR[n])?!!e[n]:!1}function p_(){return YR}var qR=tn({},pf,{key:function(n){if(n.key){var e=WR[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Zh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p_,charCode:function(n){return n.type==="keypress"?Zh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Zh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$R=Gi(qR),ZR=tn({},Zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jS=Gi(ZR),KR=tn({},pf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p_}),JR=Gi(KR),QR=tn({},uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),eL=Gi(QR),tL=tn({},Zp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nL=Gi(tL),iL=[9,13,27,32],m_=Ps&&"CompositionEvent"in window,hc=null;Ps&&"documentMode"in document&&(hc=document.documentMode);var rL=Ps&&"TextEvent"in window&&!hc,kT=Ps&&(!m_||hc&&8<hc&&11>=hc),YS=String.fromCharCode(32),qS=!1;function FT(n,e){switch(n){case"keyup":return iL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ml=!1;function sL(n,e){switch(n){case"compositionend":return zT(e);case"keypress":return e.which!==32?null:(qS=!0,YS);case"textInput":return n=e.data,n===YS&&qS?null:n;default:return null}}function oL(n,e){if(Ml)return n==="compositionend"||!m_&&FT(n,e)?(n=OT(),$h=d_=oo=null,Ml=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kT&&e.locale!=="ko"?null:e.data;default:return null}}var aL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $S(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!aL[n.type]:e==="textarea"}function BT(n,e,t,i){vT(i),e=xp(e,"onChange"),0<e.length&&(t=new h_("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var pc=null,Dc=null;function lL(n){KT(n,0)}function Kp(n){var e=Tl(n);if(cT(e))return n}function uL(n,e){if(n==="change")return e}var HT=!1;if(Ps){var Jg;if(Ps){var Qg="oninput"in document;if(!Qg){var ZS=document.createElement("div");ZS.setAttribute("oninput","return;"),Qg=typeof ZS.oninput=="function"}Jg=Qg}else Jg=!1;HT=Jg&&(!document.documentMode||9<document.documentMode)}function KS(){pc&&(pc.detachEvent("onpropertychange",VT),Dc=pc=null)}function VT(n){if(n.propertyName==="value"&&Kp(Dc)){var e=[];BT(e,Dc,n,a_(n)),ST(lL,e)}}function cL(n,e,t){n==="focusin"?(KS(),pc=e,Dc=t,pc.attachEvent("onpropertychange",VT)):n==="focusout"&&KS()}function fL(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kp(Dc)}function dL(n,e){if(n==="click")return Kp(e)}function hL(n,e){if(n==="input"||n==="change")return Kp(e)}function pL(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Lr=typeof Object.is=="function"?Object.is:pL;function Nc(n,e){if(Lr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!lv.call(e,r)||!Lr(n[r],e[r]))return!1}return!0}function JS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function QS(n,e){var t=JS(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=JS(t)}}function GT(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?GT(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function WT(){for(var n=window,e=hp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=hp(n.document)}return e}function g_(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function mL(n){var e=WT(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&GT(t.ownerDocument.documentElement,t)){if(i!==null&&g_(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=QS(t,s);var o=QS(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var gL=Ps&&"documentMode"in document&&11>=document.documentMode,wl=null,Cv=null,mc=null,bv=!1;function eM(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;bv||wl==null||wl!==hp(i)||(i=wl,"selectionStart"in i&&g_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mc&&Nc(mc,i)||(mc=i,i=xp(Cv,"onSelect"),0<i.length&&(e=new h_("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=wl)))}function Vd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var El={animationend:Vd("Animation","AnimationEnd"),animationiteration:Vd("Animation","AnimationIteration"),animationstart:Vd("Animation","AnimationStart"),transitionend:Vd("Transition","TransitionEnd")},e0={},XT={};Ps&&(XT=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Jp(n){if(e0[n])return e0[n];if(!El[n])return n;var e=El[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in XT)return e0[n]=e[t];return n}var jT=Jp("animationend"),YT=Jp("animationiteration"),qT=Jp("animationstart"),$T=Jp("transitionend"),ZT=new Map,tM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(n,e){ZT.set(n,e),Pa(e,[n])}for(var t0=0;t0<tM.length;t0++){var n0=tM[t0],vL=n0.toLowerCase(),yL=n0[0].toUpperCase()+n0.slice(1);bo(vL,"on"+yL)}bo(jT,"onAnimationEnd");bo(YT,"onAnimationIteration");bo(qT,"onAnimationStart");bo("dblclick","onDoubleClick");bo("focusin","onFocus");bo("focusout","onBlur");bo($T,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_L=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function nM(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,vR(i,e,void 0,n),n.currentTarget=null}function KT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==s&&r.isPropagationStopped())break e;nM(r,a,f),s=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,f=a.currentTarget,a=a.listener,c!==s&&r.isPropagationStopped())break e;nM(r,a,f),s=c}}}if(mp)throw n=wv,mp=!1,wv=null,n}function Xt(n,e){var t=e[Dv];t===void 0&&(t=e[Dv]=new Set);var i=n+"__bubble";t.has(i)||(JT(e,n,2,!1),t.add(i))}function i0(n,e,t){var i=0;e&&(i|=4),JT(t,n,i,e)}var Gd="_reactListening"+Math.random().toString(36).slice(2);function Uc(n){if(!n[Gd]){n[Gd]=!0,sT.forEach(function(t){t!=="selectionchange"&&(_L.has(t)||i0(t,!1,n),i0(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Gd]||(e[Gd]=!0,i0("selectionchange",!1,e))}}function JT(n,e,t,i){switch(UT(e)){case 1:var r=DR;break;case 4:r=NR;break;default:r=f_}t=r.bind(null,e,t,n),r=void 0,!Mv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function r0(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=oa(a),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue e}a=a.parentNode}}i=i.return}ST(function(){var f=s,d=a_(t),h=[];e:{var m=ZT.get(n);if(m!==void 0){var v=h_,_=n;switch(n){case"keypress":if(Zh(t)===0)break e;case"keydown":case"keyup":v=$R;break;case"focusin":_="focus",v=Kg;break;case"focusout":_="blur",v=Kg;break;case"beforeblur":case"afterblur":v=Kg;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=WS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=kR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=JR;break;case jT:case YT:case qT:v=BR;break;case $T:v=eL;break;case"scroll":v=UR;break;case"wheel":v=nL;break;case"copy":case"cut":case"paste":v=VR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=jS}var w=(e&4)!==0,M=!w&&n==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var x=f,S;x!==null;){S=x;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,g!==null&&(T=Pc(x,g),T!=null&&w.push(Oc(x,T,S)))),M)break;x=x.return}0<w.length&&(m=new v(m,_,null,t,d),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",m&&t!==xv&&(_=t.relatedTarget||t.fromElement)&&(oa(_)||_[Rs]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(_=t.relatedTarget||t.toElement,v=f,_=_?oa(_):null,_!==null&&(M=Ra(_),_!==M||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=f),v!==_)){if(w=WS,T="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(w=jS,T="onPointerLeave",g="onPointerEnter",x="pointer"),M=v==null?m:Tl(v),S=_==null?m:Tl(_),m=new w(T,x+"leave",v,t,d),m.target=M,m.relatedTarget=S,T=null,oa(d)===f&&(w=new w(g,x+"enter",_,t,d),w.target=S,w.relatedTarget=M,T=w),M=T,v&&_)t:{for(w=v,g=_,x=0,S=w;S;S=Ya(S))x++;for(S=0,T=g;T;T=Ya(T))S++;for(;0<x-S;)w=Ya(w),x--;for(;0<S-x;)g=Ya(g),S--;for(;x--;){if(w===g||g!==null&&w===g.alternate)break t;w=Ya(w),g=Ya(g)}w=null}else w=null;v!==null&&iM(h,m,v,w,!1),_!==null&&M!==null&&iM(h,M,_,w,!0)}}e:{if(m=f?Tl(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var C=uL;else if($S(m))if(HT)C=hL;else{C=fL;var P=cL}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(C=dL);if(C&&(C=C(n,f))){BT(h,C,t,d);break e}P&&P(n,m,f),n==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&mv(m,"number",m.value)}switch(P=f?Tl(f):window,n){case"focusin":($S(P)||P.contentEditable==="true")&&(wl=P,Cv=f,mc=null);break;case"focusout":mc=Cv=wl=null;break;case"mousedown":bv=!0;break;case"contextmenu":case"mouseup":case"dragend":bv=!1,eM(h,t,d);break;case"selectionchange":if(gL)break;case"keydown":case"keyup":eM(h,t,d)}var R;if(m_)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ml?FT(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(kT&&t.locale!=="ko"&&(Ml||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ml&&(R=OT()):(oo=d,d_="value"in oo?oo.value:oo.textContent,Ml=!0)),P=xp(f,I),0<P.length&&(I=new XS(I,n,null,t,d),h.push({event:I,listeners:P}),R?I.data=R:(R=zT(t),R!==null&&(I.data=R)))),(R=rL?sL(n,t):oL(n,t))&&(f=xp(f,"onBeforeInput"),0<f.length&&(d=new XS("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:f}),d.data=R))}KT(h,e)})}function Oc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function xp(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pc(n,t),s!=null&&i.unshift(Oc(n,s,r)),s=Pc(n,e),s!=null&&i.push(Oc(n,s,r))),n=n.return}return i}function Ya(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function iM(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,c=a.alternate,f=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&f!==null&&(a=f,r?(c=Pc(t,s),c!=null&&o.unshift(Oc(t,c,a))):r||(c=Pc(t,s),c!=null&&o.push(Oc(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var xL=/\r\n?/g,SL=/\u0000|\uFFFD/g;function rM(n){return(typeof n=="string"?n:""+n).replace(xL,`
`).replace(SL,"")}function Wd(n,e,t){if(e=rM(e),rM(n)!==e&&t)throw Error(Le(425))}function Sp(){}var Pv=null,Rv=null;function Lv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Iv=typeof setTimeout=="function"?setTimeout:void 0,ML=typeof clearTimeout=="function"?clearTimeout:void 0,sM=typeof Promise=="function"?Promise:void 0,wL=typeof queueMicrotask=="function"?queueMicrotask:typeof sM<"u"?function(n){return sM.resolve(null).then(n).catch(EL)}:Iv;function EL(n){setTimeout(function(){throw n})}function s0(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Ic(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Ic(e)}function ho(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function oM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var cu=Math.random().toString(36).slice(2),Zr="__reactFiber$"+cu,kc="__reactProps$"+cu,Rs="__reactContainer$"+cu,Dv="__reactEvents$"+cu,TL="__reactListeners$"+cu,AL="__reactHandles$"+cu;function oa(n){var e=n[Zr];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Rs]||t[Zr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=oM(n);n!==null;){if(t=n[Zr])return t;n=oM(n)}return e}n=t,t=n.parentNode}return null}function mf(n){return n=n[Zr]||n[Rs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Tl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Le(33))}function Qp(n){return n[kc]||null}var Nv=[],Al=-1;function Po(n){return{current:n}}function jt(n){0>Al||(n.current=Nv[Al],Nv[Al]=null,Al--)}function Wt(n,e){Al++,Nv[Al]=n.current,n.current=e}var wo={},ni=Po(wo),Ti=Po(!1),Sa=wo;function $l(n,e){var t=n.type.contextTypes;if(!t)return wo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Ai(n){return n=n.childContextTypes,n!=null}function Mp(){jt(Ti),jt(ni)}function aM(n,e,t){if(ni.current!==wo)throw Error(Le(168));Wt(ni,e),Wt(Ti,t)}function QT(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Le(108,cR(n)||"Unknown",r));return tn({},t,i)}function wp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||wo,Sa=ni.current,Wt(ni,n),Wt(Ti,Ti.current),!0}function lM(n,e,t){var i=n.stateNode;if(!i)throw Error(Le(169));t?(n=QT(n,e,Sa),i.__reactInternalMemoizedMergedChildContext=n,jt(Ti),jt(ni),Wt(ni,n)):jt(Ti),Wt(Ti,t)}var xs=null,em=!1,o0=!1;function eA(n){xs===null?xs=[n]:xs.push(n)}function CL(n){em=!0,eA(n)}function Ro(){if(!o0&&xs!==null){o0=!0;var n=0,e=Ot;try{var t=xs;for(Ot=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}xs=null,em=!1}catch(r){throw xs!==null&&(xs=xs.slice(n+1)),TT(l_,Ro),r}finally{Ot=e,o0=!1}}return null}var Cl=[],bl=0,Ep=null,Tp=0,sr=[],or=0,Ma=null,Ms=1,ws="";function Qo(n,e){Cl[bl++]=Tp,Cl[bl++]=Ep,Ep=n,Tp=e}function tA(n,e,t){sr[or++]=Ms,sr[or++]=ws,sr[or++]=Ma,Ma=n;var i=Ms;n=ws;var r=32-br(i)-1;i&=~(1<<r),t+=1;var s=32-br(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ms=1<<32-br(e)+r|t<<r|i,ws=s+n}else Ms=1<<s|t<<r|i,ws=n}function v_(n){n.return!==null&&(Qo(n,1),tA(n,1,0))}function y_(n){for(;n===Ep;)Ep=Cl[--bl],Cl[bl]=null,Tp=Cl[--bl],Cl[bl]=null;for(;n===Ma;)Ma=sr[--or],sr[or]=null,ws=sr[--or],sr[or]=null,Ms=sr[--or],sr[or]=null}var zi=null,Oi=null,Zt=!1,Ar=null;function nA(n,e){var t=ar(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function uM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,zi=n,Oi=ho(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,zi=n,Oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ma!==null?{id:Ms,overflow:ws}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ar(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,zi=n,Oi=null,!0):!1;default:return!1}}function Uv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ov(n){if(Zt){var e=Oi;if(e){var t=e;if(!uM(n,e)){if(Uv(n))throw Error(Le(418));e=ho(t.nextSibling);var i=zi;e&&uM(n,e)?nA(i,t):(n.flags=n.flags&-4097|2,Zt=!1,zi=n)}}else{if(Uv(n))throw Error(Le(418));n.flags=n.flags&-4097|2,Zt=!1,zi=n}}}function cM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;zi=n}function Xd(n){if(n!==zi)return!1;if(!Zt)return cM(n),Zt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Lv(n.type,n.memoizedProps)),e&&(e=Oi)){if(Uv(n))throw iA(),Error(Le(418));for(;e;)nA(n,e),e=ho(e.nextSibling)}if(cM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Le(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Oi=ho(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Oi=null}}else Oi=zi?ho(n.stateNode.nextSibling):null;return!0}function iA(){for(var n=Oi;n;)n=ho(n.nextSibling)}function Zl(){Oi=zi=null,Zt=!1}function __(n){Ar===null?Ar=[n]:Ar.push(n)}var bL=Os.ReactCurrentBatchConfig;function wr(n,e){if(n&&n.defaultProps){e=tn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ap=Po(null),Cp=null,Pl=null,x_=null;function S_(){x_=Pl=Cp=null}function M_(n){var e=Ap.current;jt(Ap),n._currentValue=e}function kv(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Vl(n,e){Cp=n,x_=Pl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ei=!0),n.firstContext=null)}function ur(n){var e=n._currentValue;if(x_!==n)if(n={context:n,memoizedValue:e,next:null},Pl===null){if(Cp===null)throw Error(Le(308));Pl=n,Cp.dependencies={lanes:0,firstContext:n}}else Pl=Pl.next=n;return e}var aa=null;function w_(n){aa===null?aa=[n]:aa.push(n)}function rA(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,w_(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ls(n,i)}function Ls(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var eo=!1;function E_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sA(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function po(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ct&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ls(n,t)}return r=i.interleaved,r===null?(e.next=e,w_(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ls(n,t)}function Kh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,u_(n,t)}}function fM(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function bp(n,e,t,i){var r=n.updateQueue;eo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,f=c.next;c.next=null,o===null?s=f:o.next=f,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=f:a.next=f,d.lastBaseUpdate=c))}if(s!==null){var h=r.baseState;o=0,d=f=c=null,a=s;do{var m=a.lane,v=a.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=n,w=a;switch(m=e,v=t,w.tag){case 1:if(_=w.payload,typeof _=="function"){h=_.call(v,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,m=typeof _=="function"?_.call(v,h,m):_,m==null)break e;h=tn({},h,m);break e;case 2:eo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(f=d=v,c=h):d=d.next=v,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ea|=o,n.lanes=o,n.memoizedState=h}}function dM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Le(191,r));r.call(i)}}}var oA=new rT.Component().refs;function Fv(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:tn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var tm={isMounted:function(n){return(n=n._reactInternals)?Ra(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=fi(),r=go(n),s=Cs(i,r);s.payload=e,t!=null&&(s.callback=t),e=po(n,s,r),e!==null&&(Pr(e,n,r,i),Kh(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=fi(),r=go(n),s=Cs(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=po(n,s,r),e!==null&&(Pr(e,n,r,i),Kh(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fi(),i=go(n),r=Cs(t,i);r.tag=2,e!=null&&(r.callback=e),e=po(n,r,i),e!==null&&(Pr(e,n,i,t),Kh(e,n,i))}};function hM(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nc(t,i)||!Nc(r,s):!0}function aA(n,e,t){var i=!1,r=wo,s=e.contextType;return typeof s=="object"&&s!==null?s=ur(s):(r=Ai(e)?Sa:ni.current,i=e.contextTypes,s=(i=i!=null)?$l(n,r):wo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tm,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function pM(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&tm.enqueueReplaceState(e,e.state,null)}function zv(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=oA,E_(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ur(s):(s=Ai(e)?Sa:ni.current,r.context=$l(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fv(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&tm.enqueueReplaceState(r,r.state,null),bp(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Wu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Le(309));var i=t.stateNode}if(!i)throw Error(Le(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===oA&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Le(284));if(!t._owner)throw Error(Le(290,n))}return n}function jd(n,e){throw n=Object.prototype.toString.call(e),Error(Le(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function mM(n){var e=n._init;return e(n._payload)}function lA(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=vo(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,S,T){return x===null||x.tag!==6?(x=h0(S,g.mode,T),x.return=g,x):(x=r(x,S),x.return=g,x)}function c(g,x,S,T){var C=S.type;return C===Sl?d(g,x,S.props.children,T,S.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qs&&mM(C)===x.type)?(T=r(x,S.props),T.ref=Wu(g,x,S),T.return=g,T):(T=ip(S.type,S.key,S.props,null,g.mode,T),T.ref=Wu(g,x,S),T.return=g,T)}function f(g,x,S,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=p0(S,g.mode,T),x.return=g,x):(x=r(x,S.children||[]),x.return=g,x)}function d(g,x,S,T,C){return x===null||x.tag!==7?(x=pa(S,g.mode,T,C),x.return=g,x):(x=r(x,S),x.return=g,x)}function h(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=h0(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ud:return S=ip(x.type,x.key,x.props,null,g.mode,S),S.ref=Wu(g,null,x),S.return=g,S;case xl:return x=p0(x,g.mode,S),x.return=g,x;case Qs:var T=x._init;return h(g,T(x._payload),S)}if(oc(x)||zu(x))return x=pa(x,g.mode,S,null),x.return=g,x;jd(g,x)}return null}function m(g,x,S,T){var C=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:a(g,x,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ud:return S.key===C?c(g,x,S,T):null;case xl:return S.key===C?f(g,x,S,T):null;case Qs:return C=S._init,m(g,x,C(S._payload),T)}if(oc(S)||zu(S))return C!==null?null:d(g,x,S,T,null);jd(g,S)}return null}function v(g,x,S,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(S)||null,a(x,g,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ud:return g=g.get(T.key===null?S:T.key)||null,c(x,g,T,C);case xl:return g=g.get(T.key===null?S:T.key)||null,f(x,g,T,C);case Qs:var P=T._init;return v(g,x,S,P(T._payload),C)}if(oc(T)||zu(T))return g=g.get(S)||null,d(x,g,T,C,null);jd(x,T)}return null}function _(g,x,S,T){for(var C=null,P=null,R=x,I=x=0,b=null;R!==null&&I<S.length;I++){R.index>I?(b=R,R=null):b=R.sibling;var L=m(g,R,S[I],T);if(L===null){R===null&&(R=b);break}n&&R&&L.alternate===null&&e(g,R),x=s(L,x,I),P===null?C=L:P.sibling=L,P=L,R=b}if(I===S.length)return t(g,R),Zt&&Qo(g,I),C;if(R===null){for(;I<S.length;I++)R=h(g,S[I],T),R!==null&&(x=s(R,x,I),P===null?C=R:P.sibling=R,P=R);return Zt&&Qo(g,I),C}for(R=i(g,R);I<S.length;I++)b=v(R,g,I,S[I],T),b!==null&&(n&&b.alternate!==null&&R.delete(b.key===null?I:b.key),x=s(b,x,I),P===null?C=b:P.sibling=b,P=b);return n&&R.forEach(function(G){return e(g,G)}),Zt&&Qo(g,I),C}function w(g,x,S,T){var C=zu(S);if(typeof C!="function")throw Error(Le(150));if(S=C.call(S),S==null)throw Error(Le(151));for(var P=C=null,R=x,I=x=0,b=null,L=S.next();R!==null&&!L.done;I++,L=S.next()){R.index>I?(b=R,R=null):b=R.sibling;var G=m(g,R,L.value,T);if(G===null){R===null&&(R=b);break}n&&R&&G.alternate===null&&e(g,R),x=s(G,x,I),P===null?C=G:P.sibling=G,P=G,R=b}if(L.done)return t(g,R),Zt&&Qo(g,I),C;if(R===null){for(;!L.done;I++,L=S.next())L=h(g,L.value,T),L!==null&&(x=s(L,x,I),P===null?C=L:P.sibling=L,P=L);return Zt&&Qo(g,I),C}for(R=i(g,R);!L.done;I++,L=S.next())L=v(R,g,I,L.value,T),L!==null&&(n&&L.alternate!==null&&R.delete(L.key===null?I:L.key),x=s(L,x,I),P===null?C=L:P.sibling=L,P=L);return n&&R.forEach(function(K){return e(g,K)}),Zt&&Qo(g,I),C}function M(g,x,S,T){if(typeof S=="object"&&S!==null&&S.type===Sl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ud:e:{for(var C=S.key,P=x;P!==null;){if(P.key===C){if(C=S.type,C===Sl){if(P.tag===7){t(g,P.sibling),x=r(P,S.props.children),x.return=g,g=x;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qs&&mM(C)===P.type){t(g,P.sibling),x=r(P,S.props),x.ref=Wu(g,P,S),x.return=g,g=x;break e}t(g,P);break}else e(g,P);P=P.sibling}S.type===Sl?(x=pa(S.props.children,g.mode,T,S.key),x.return=g,g=x):(T=ip(S.type,S.key,S.props,null,g.mode,T),T.ref=Wu(g,x,S),T.return=g,g=T)}return o(g);case xl:e:{for(P=S.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=r(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=p0(S,g.mode,T),x.return=g,g=x}return o(g);case Qs:return P=S._init,M(g,x,P(S._payload),T)}if(oc(S))return _(g,x,S,T);if(zu(S))return w(g,x,S,T);jd(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=r(x,S),x.return=g,g=x):(t(g,x),x=h0(S,g.mode,T),x.return=g,g=x),o(g)):t(g,x)}return M}var Kl=lA(!0),uA=lA(!1),gf={},Qr=Po(gf),Fc=Po(gf),zc=Po(gf);function la(n){if(n===gf)throw Error(Le(174));return n}function T_(n,e){switch(Wt(zc,e),Wt(Fc,n),Wt(Qr,gf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=vv(e,n)}jt(Qr),Wt(Qr,e)}function Jl(){jt(Qr),jt(Fc),jt(zc)}function cA(n){la(zc.current);var e=la(Qr.current),t=vv(e,n.type);e!==t&&(Wt(Fc,n),Wt(Qr,t))}function A_(n){Fc.current===n&&(jt(Qr),jt(Fc))}var Jt=Po(0);function Pp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a0=[];function C_(){for(var n=0;n<a0.length;n++)a0[n]._workInProgressVersionPrimary=null;a0.length=0}var Jh=Os.ReactCurrentDispatcher,l0=Os.ReactCurrentBatchConfig,wa=0,en=null,xn=null,Pn=null,Rp=!1,gc=!1,Bc=0,PL=0;function Yn(){throw Error(Le(321))}function b_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Lr(n[t],e[t]))return!1;return!0}function P_(n,e,t,i,r,s){if(wa=s,en=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jh.current=n===null||n.memoizedState===null?DL:NL,n=t(i,r),gc){s=0;do{if(gc=!1,Bc=0,25<=s)throw Error(Le(301));s+=1,Pn=xn=null,e.updateQueue=null,Jh.current=UL,n=t(i,r)}while(gc)}if(Jh.current=Lp,e=xn!==null&&xn.next!==null,wa=0,Pn=xn=en=null,Rp=!1,e)throw Error(Le(300));return n}function R_(){var n=Bc!==0;return Bc=0,n}function qr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?en.memoizedState=Pn=n:Pn=Pn.next=n,Pn}function cr(){if(xn===null){var n=en.alternate;n=n!==null?n.memoizedState:null}else n=xn.next;var e=Pn===null?en.memoizedState:Pn.next;if(e!==null)Pn=e,xn=n;else{if(n===null)throw Error(Le(310));xn=n,n={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Pn===null?en.memoizedState=Pn=n:Pn=Pn.next=n}return Pn}function Hc(n,e){return typeof e=="function"?e(n):e}function u0(n){var e=cr(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var i=xn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,c=null,f=s;do{var d=f.lane;if((wa&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var h={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=h,o=i):c=c.next=h,en.lanes|=d,Ea|=d}f=f.next}while(f!==null&&f!==s);c===null?o=i:c.next=a,Lr(i,e.memoizedState)||(Ei=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,en.lanes|=s,Ea|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function c0(n){var e=cr(),t=e.queue;if(t===null)throw Error(Le(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Lr(s,e.memoizedState)||(Ei=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function fA(){}function dA(n,e){var t=en,i=cr(),r=e(),s=!Lr(i.memoizedState,r);if(s&&(i.memoizedState=r,Ei=!0),i=i.queue,L_(mA.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(t.flags|=2048,Vc(9,pA.bind(null,t,i,r,e),void 0,null),Ln===null)throw Error(Le(349));wa&30||hA(t,e,r)}return r}function hA(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function pA(n,e,t,i){e.value=t,e.getSnapshot=i,gA(e)&&vA(n)}function mA(n,e,t){return t(function(){gA(e)&&vA(n)})}function gA(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Lr(n,t)}catch{return!0}}function vA(n){var e=Ls(n,1);e!==null&&Pr(e,n,1,-1)}function gM(n){var e=qr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:n},e.queue=n,n=n.dispatch=IL.bind(null,en,n),[e.memoizedState,n]}function Vc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function yA(){return cr().memoizedState}function Qh(n,e,t,i){var r=qr();en.flags|=n,r.memoizedState=Vc(1|e,t,void 0,i===void 0?null:i)}function nm(n,e,t,i){var r=cr();i=i===void 0?null:i;var s=void 0;if(xn!==null){var o=xn.memoizedState;if(s=o.destroy,i!==null&&b_(i,o.deps)){r.memoizedState=Vc(e,t,s,i);return}}en.flags|=n,r.memoizedState=Vc(1|e,t,s,i)}function vM(n,e){return Qh(8390656,8,n,e)}function L_(n,e){return nm(2048,8,n,e)}function _A(n,e){return nm(4,2,n,e)}function xA(n,e){return nm(4,4,n,e)}function SA(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function MA(n,e,t){return t=t!=null?t.concat([n]):null,nm(4,4,SA.bind(null,e,n),t)}function I_(){}function wA(n,e){var t=cr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&b_(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function EA(n,e){var t=cr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&b_(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function TA(n,e,t){return wa&21?(Lr(t,e)||(t=bT(),en.lanes|=t,Ea|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ei=!0),n.memoizedState=t)}function RL(n,e){var t=Ot;Ot=t!==0&&4>t?t:4,n(!0);var i=l0.transition;l0.transition={};try{n(!1),e()}finally{Ot=t,l0.transition=i}}function AA(){return cr().memoizedState}function LL(n,e,t){var i=go(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},CA(n))bA(e,t);else if(t=rA(n,e,t,i),t!==null){var r=fi();Pr(t,n,i,r),PA(t,e,i)}}function IL(n,e,t){var i=go(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(CA(n))bA(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Lr(a,o)){var c=e.interleaved;c===null?(r.next=r,w_(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=rA(n,e,r,i),t!==null&&(r=fi(),Pr(t,n,i,r),PA(t,e,i))}}function CA(n){var e=n.alternate;return n===en||e!==null&&e===en}function bA(n,e){gc=Rp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function PA(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,u_(n,t)}}var Lp={readContext:ur,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useInsertionEffect:Yn,useLayoutEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useMutableSource:Yn,useSyncExternalStore:Yn,useId:Yn,unstable_isNewReconciler:!1},DL={readContext:ur,useCallback:function(n,e){return qr().memoizedState=[n,e===void 0?null:e],n},useContext:ur,useEffect:vM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Qh(4194308,4,SA.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Qh(4194308,4,n,e)},useInsertionEffect:function(n,e){return Qh(4,2,n,e)},useMemo:function(n,e){var t=qr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=qr();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=LL.bind(null,en,n),[i.memoizedState,n]},useRef:function(n){var e=qr();return n={current:n},e.memoizedState=n},useState:gM,useDebugValue:I_,useDeferredValue:function(n){return qr().memoizedState=n},useTransition:function(){var n=gM(!1),e=n[0];return n=RL.bind(null,n[1]),qr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=en,r=qr();if(Zt){if(t===void 0)throw Error(Le(407));t=t()}else{if(t=e(),Ln===null)throw Error(Le(349));wa&30||hA(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,vM(mA.bind(null,i,s,n),[n]),i.flags|=2048,Vc(9,pA.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=qr(),e=Ln.identifierPrefix;if(Zt){var t=ws,i=Ms;t=(i&~(1<<32-br(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Bc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=PL++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},NL={readContext:ur,useCallback:wA,useContext:ur,useEffect:L_,useImperativeHandle:MA,useInsertionEffect:_A,useLayoutEffect:xA,useMemo:EA,useReducer:u0,useRef:yA,useState:function(){return u0(Hc)},useDebugValue:I_,useDeferredValue:function(n){var e=cr();return TA(e,xn.memoizedState,n)},useTransition:function(){var n=u0(Hc)[0],e=cr().memoizedState;return[n,e]},useMutableSource:fA,useSyncExternalStore:dA,useId:AA,unstable_isNewReconciler:!1},UL={readContext:ur,useCallback:wA,useContext:ur,useEffect:L_,useImperativeHandle:MA,useInsertionEffect:_A,useLayoutEffect:xA,useMemo:EA,useReducer:c0,useRef:yA,useState:function(){return c0(Hc)},useDebugValue:I_,useDeferredValue:function(n){var e=cr();return xn===null?e.memoizedState=n:TA(e,xn.memoizedState,n)},useTransition:function(){var n=c0(Hc)[0],e=cr().memoizedState;return[n,e]},useMutableSource:fA,useSyncExternalStore:dA,useId:AA,unstable_isNewReconciler:!1};function Ql(n,e){try{var t="",i=e;do t+=uR(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function f0(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Bv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var OL=typeof WeakMap=="function"?WeakMap:Map;function RA(n,e,t){t=Cs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Dp||(Dp=!0,Zv=i),Bv(n,e)},t}function LA(n,e,t){t=Cs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Bv(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Bv(n,e),typeof i!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function yM(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new OL;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=ZL.bind(null,n,e,t),e.then(n,n))}function _M(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function xM(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Cs(-1,1),e.tag=2,po(t,e,1))),t.lanes|=1),n)}var kL=Os.ReactCurrentOwner,Ei=!1;function ui(n,e,t,i){e.child=n===null?uA(e,null,t,i):Kl(e,n.child,t,i)}function SM(n,e,t,i,r){t=t.render;var s=e.ref;return Vl(e,r),i=P_(n,e,t,i,s,r),t=R_(),n!==null&&!Ei?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Is(n,e,r)):(Zt&&t&&v_(e),e.flags|=1,ui(n,e,i,r),e.child)}function MM(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!B_(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,IA(n,e,s,i,r)):(n=ip(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Nc,t(o,i)&&n.ref===e.ref)return Is(n,e,r)}return e.flags|=1,n=vo(s,i),n.ref=e.ref,n.return=e,e.child=n}function IA(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Nc(s,i)&&n.ref===e.ref)if(Ei=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ei=!0);else return e.lanes=n.lanes,Is(n,e,r)}return Hv(n,e,t,i,r)}function DA(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Ll,Ui),Ui|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Wt(Ll,Ui),Ui|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Wt(Ll,Ui),Ui|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Wt(Ll,Ui),Ui|=i;return ui(n,e,r,t),e.child}function NA(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Hv(n,e,t,i,r){var s=Ai(t)?Sa:ni.current;return s=$l(e,s),Vl(e,r),t=P_(n,e,t,i,s,r),i=R_(),n!==null&&!Ei?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Is(n,e,r)):(Zt&&i&&v_(e),e.flags|=1,ui(n,e,t,r),e.child)}function wM(n,e,t,i,r){if(Ai(t)){var s=!0;wp(e)}else s=!1;if(Vl(e,r),e.stateNode===null)ep(n,e),aA(e,t,i),zv(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=ur(f):(f=Ai(t)?Sa:ni.current,f=$l(e,f));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||c!==f)&&pM(e,o,i,f),eo=!1;var m=e.memoizedState;o.state=m,bp(e,i,o,r),c=e.memoizedState,a!==i||m!==c||Ti.current||eo?(typeof d=="function"&&(Fv(e,t,d,i),c=e.memoizedState),(a=eo||hM(e,t,a,i,m,c,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=f,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,sA(n,e),a=e.memoizedProps,f=e.type===e.elementType?a:wr(e.type,a),o.props=f,h=e.pendingProps,m=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=ur(c):(c=Ai(t)?Sa:ni.current,c=$l(e,c));var v=t.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==c)&&pM(e,o,i,c),eo=!1,m=e.memoizedState,o.state=m,bp(e,i,o,r);var _=e.memoizedState;a!==h||m!==_||Ti.current||eo?(typeof v=="function"&&(Fv(e,t,v,i),_=e.memoizedState),(f=eo||hM(e,t,f,i,m,_,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=c,i=f):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Vv(n,e,t,i,s,r)}function Vv(n,e,t,i,r,s){NA(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&lM(e,t,!1),Is(n,e,s);i=e.stateNode,kL.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Kl(e,n.child,null,s),e.child=Kl(e,null,a,s)):ui(n,e,a,s),e.memoizedState=i.state,r&&lM(e,t,!0),e.child}function UA(n){var e=n.stateNode;e.pendingContext?aM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&aM(n,e.context,!1),T_(n,e.containerInfo)}function EM(n,e,t,i,r){return Zl(),__(r),e.flags|=256,ui(n,e,t,i),e.child}var Gv={dehydrated:null,treeContext:null,retryLane:0};function Wv(n){return{baseLanes:n,cachePool:null,transitions:null}}function OA(n,e,t){var i=e.pendingProps,r=Jt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Wt(Jt,r&1),n===null)return Ov(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sm(o,i,0,null),n=pa(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Wv(t),e.memoizedState=Gv,n):D_(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return FL(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=vo(r,c),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=vo(a,s):(s=pa(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Wv(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Gv,i}return s=n.child,n=s.sibling,i=vo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function D_(n,e){return e=sm({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Yd(n,e,t,i){return i!==null&&__(i),Kl(e,n.child,null,t),n=D_(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function FL(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=f0(Error(Le(422))),Yd(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=sm({mode:"visible",children:i.children},r,0,null),s=pa(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Kl(e,n.child,null,o),e.child.memoizedState=Wv(o),e.memoizedState=Gv,s);if(!(e.mode&1))return Yd(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Le(419)),i=f0(s,i,void 0),Yd(n,e,o,i)}if(a=(o&n.childLanes)!==0,Ei||a){if(i=Ln,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ls(n,r),Pr(i,n,r,-1))}return z_(),i=f0(Error(Le(421))),Yd(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=KL.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Oi=ho(r.nextSibling),zi=e,Zt=!0,Ar=null,n!==null&&(sr[or++]=Ms,sr[or++]=ws,sr[or++]=Ma,Ms=n.id,ws=n.overflow,Ma=e),e=D_(e,i.children),e.flags|=4096,e)}function TM(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),kv(n.return,e,t)}function d0(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function kA(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ui(n,e,i.children,t),i=Jt.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TM(n,t,e);else if(n.tag===19)TM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Wt(Jt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Pp(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),d0(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Pp(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}d0(e,!0,t,null,s);break;case"together":d0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ep(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Is(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ea|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Le(153));if(e.child!==null){for(n=e.child,t=vo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=vo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function zL(n,e,t){switch(e.tag){case 3:UA(e),Zl();break;case 5:cA(e);break;case 1:Ai(e.type)&&wp(e);break;case 4:T_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Wt(Ap,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Wt(Jt,Jt.current&1),e.flags|=128,null):t&e.child.childLanes?OA(n,e,t):(Wt(Jt,Jt.current&1),n=Is(n,e,t),n!==null?n.sibling:null);Wt(Jt,Jt.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return kA(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Wt(Jt,Jt.current),i)break;return null;case 22:case 23:return e.lanes=0,DA(n,e,t)}return Is(n,e,t)}var FA,Xv,zA,BA;FA=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Xv=function(){};zA=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,la(Qr.current);var s=null;switch(t){case"input":r=hv(n,r),i=hv(n,i),s=[];break;case"select":r=tn({},r,{value:void 0}),i=tn({},i,{value:void 0}),s=[];break;case"textarea":r=gv(n,r),i=gv(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Sp)}yv(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var a=r[f];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Cc.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var c=i[f];if(a=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(s||(s=[]),s.push(f,t)),t=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Xt("scroll",n),s||a===c||(s=[])):(s=s||[]).push(f,c))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};BA=function(n,e,t,i){t!==i&&(e.flags|=4)};function Xu(n,e){if(!Zt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function qn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function BL(n,e,t){var i=e.pendingProps;switch(y_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(e),null;case 1:return Ai(e.type)&&Mp(),qn(e),null;case 3:return i=e.stateNode,Jl(),jt(Ti),jt(ni),C_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Xd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ar!==null&&(Qv(Ar),Ar=null))),Xv(n,e),qn(e),null;case 5:A_(e);var r=la(zc.current);if(t=e.type,n!==null&&e.stateNode!=null)zA(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Le(166));return qn(e),null}if(n=la(Qr.current),Xd(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Zr]=e,i[kc]=s,n=(e.mode&1)!==0,t){case"dialog":Xt("cancel",i),Xt("close",i);break;case"iframe":case"object":case"embed":Xt("load",i);break;case"video":case"audio":for(r=0;r<lc.length;r++)Xt(lc[r],i);break;case"source":Xt("error",i);break;case"img":case"image":case"link":Xt("error",i),Xt("load",i);break;case"details":Xt("toggle",i);break;case"input":NS(i,s),Xt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Xt("invalid",i);break;case"textarea":OS(i,s),Xt("invalid",i)}yv(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wd(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wd(i.textContent,a,n),r=["children",""+a]):Cc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xt("scroll",i)}switch(t){case"input":Od(i),US(i,s,!0);break;case"textarea":Od(i),kS(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Sp)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=hT(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Zr]=e,n[kc]=i,FA(n,e,!1,!1),e.stateNode=n;e:{switch(o=_v(t,i),t){case"dialog":Xt("cancel",n),Xt("close",n),r=i;break;case"iframe":case"object":case"embed":Xt("load",n),r=i;break;case"video":case"audio":for(r=0;r<lc.length;r++)Xt(lc[r],n);r=i;break;case"source":Xt("error",n),r=i;break;case"img":case"image":case"link":Xt("error",n),Xt("load",n),r=i;break;case"details":Xt("toggle",n),r=i;break;case"input":NS(n,i),r=hv(n,i),Xt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=tn({},i,{value:void 0}),Xt("invalid",n);break;case"textarea":OS(n,i),r=gv(n,i),Xt("invalid",n);break;default:r=i}yv(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?gT(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pT(n,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&bc(n,c):typeof c=="number"&&bc(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cc.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Xt("scroll",n):c!=null&&i_(n,s,c,o))}switch(t){case"input":Od(n),US(n,i,!1);break;case"textarea":Od(n),kS(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Mo(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Fl(n,!!i.multiple,s,!1):i.defaultValue!=null&&Fl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Sp)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qn(e),null;case 6:if(n&&e.stateNode!=null)BA(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Le(166));if(t=la(zc.current),la(Qr.current),Xd(e)){if(i=e.stateNode,t=e.memoizedProps,i[Zr]=e,(s=i.nodeValue!==t)&&(n=zi,n!==null))switch(n.tag){case 3:Wd(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wd(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Zr]=e,e.stateNode=i}return qn(e),null;case 13:if(jt(Jt),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Zt&&Oi!==null&&e.mode&1&&!(e.flags&128))iA(),Zl(),e.flags|=98560,s=!1;else if(s=Xd(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Le(317));s[Zr]=e}else Zl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qn(e),s=!1}else Ar!==null&&(Qv(Ar),Ar=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Jt.current&1?Sn===0&&(Sn=3):z_())),e.updateQueue!==null&&(e.flags|=4),qn(e),null);case 4:return Jl(),Xv(n,e),n===null&&Uc(e.stateNode.containerInfo),qn(e),null;case 10:return M_(e.type._context),qn(e),null;case 17:return Ai(e.type)&&Mp(),qn(e),null;case 19:if(jt(Jt),s=e.memoizedState,s===null)return qn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Xu(s,!1);else{if(Sn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Pp(n),o!==null){for(e.flags|=128,Xu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Wt(Jt,Jt.current&1|2),e.child}n=n.sibling}s.tail!==null&&fn()>eu&&(e.flags|=128,i=!0,Xu(s,!1),e.lanes=4194304)}else{if(!i)if(n=Pp(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Xu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Zt)return qn(e),null}else 2*fn()-s.renderingStartTime>eu&&t!==1073741824&&(e.flags|=128,i=!0,Xu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,t=Jt.current,Wt(Jt,i?t&1|2:t&1),e):(qn(e),null);case 22:case 23:return F_(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ui&1073741824&&(qn(e),e.subtreeFlags&6&&(e.flags|=8192)):qn(e),null;case 24:return null;case 25:return null}throw Error(Le(156,e.tag))}function HL(n,e){switch(y_(e),e.tag){case 1:return Ai(e.type)&&Mp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Jl(),jt(Ti),jt(ni),C_(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return A_(e),null;case 13:if(jt(Jt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Le(340));Zl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return jt(Jt),null;case 4:return Jl(),null;case 10:return M_(e.type._context),null;case 22:case 23:return F_(),null;case 24:return null;default:return null}}var qd=!1,Jn=!1,VL=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Rl(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){sn(n,e,i)}else t.current=null}function jv(n,e,t){try{t()}catch(i){sn(n,e,i)}}var AM=!1;function GL(n,e){if(Pv=yp,n=WT(),g_(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,f=0,d=0,h=n,m=null;t:for(;;){for(var v;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(c=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)m=h,h=v;for(;;){if(h===n)break t;if(m===t&&++f===r&&(a=o),m===s&&++d===i&&(c=o),(v=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=v}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(Rv={focusedElem:n,selectionRange:t},yp=!1,Xe=e;Xe!==null;)if(e=Xe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Xe=n;else for(;Xe!==null;){e=Xe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,M=_.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:wr(e.type,w),M);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Le(163))}}catch(T){sn(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,Xe=n;break}Xe=e.return}return _=AM,AM=!1,_}function vc(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&jv(e,t,s)}r=r.next}while(r!==i)}}function im(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Yv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function HA(n){var e=n.alternate;e!==null&&(n.alternate=null,HA(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Zr],delete e[kc],delete e[Dv],delete e[TL],delete e[AL])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function VA(n){return n.tag===5||n.tag===3||n.tag===4}function CM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||VA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sp));else if(i!==4&&(n=n.child,n!==null))for(qv(n,e,t),n=n.sibling;n!==null;)qv(n,e,t),n=n.sibling}function $v(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for($v(n,e,t),n=n.sibling;n!==null;)$v(n,e,t),n=n.sibling}var Fn=null,Tr=!1;function Ys(n,e,t){for(t=t.child;t!==null;)GA(n,e,t),t=t.sibling}function GA(n,e,t){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount($p,t)}catch{}switch(t.tag){case 5:Jn||Rl(t,e);case 6:var i=Fn,r=Tr;Fn=null,Ys(n,e,t),Fn=i,Tr=r,Fn!==null&&(Tr?(n=Fn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Fn.removeChild(t.stateNode));break;case 18:Fn!==null&&(Tr?(n=Fn,t=t.stateNode,n.nodeType===8?s0(n.parentNode,t):n.nodeType===1&&s0(n,t),Ic(n)):s0(Fn,t.stateNode));break;case 4:i=Fn,r=Tr,Fn=t.stateNode.containerInfo,Tr=!0,Ys(n,e,t),Fn=i,Tr=r;break;case 0:case 11:case 14:case 15:if(!Jn&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jv(t,e,o),r=r.next}while(r!==i)}Ys(n,e,t);break;case 1:if(!Jn&&(Rl(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){sn(t,e,a)}Ys(n,e,t);break;case 21:Ys(n,e,t);break;case 22:t.mode&1?(Jn=(i=Jn)||t.memoizedState!==null,Ys(n,e,t),Jn=i):Ys(n,e,t);break;default:Ys(n,e,t)}}function bM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new VL),e.forEach(function(i){var r=JL.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function _r(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Fn=a.stateNode,Tr=!1;break e;case 3:Fn=a.stateNode.containerInfo,Tr=!0;break e;case 4:Fn=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(Fn===null)throw Error(Le(160));GA(s,o,r),Fn=null,Tr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(f){sn(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WA(e,n),e=e.sibling}function WA(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_r(e,n),Wr(n),i&4){try{vc(3,n,n.return),im(3,n)}catch(w){sn(n,n.return,w)}try{vc(5,n,n.return)}catch(w){sn(n,n.return,w)}}break;case 1:_r(e,n),Wr(n),i&512&&t!==null&&Rl(t,t.return);break;case 5:if(_r(e,n),Wr(n),i&512&&t!==null&&Rl(t,t.return),n.flags&32){var r=n.stateNode;try{bc(r,"")}catch(w){sn(n,n.return,w)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fT(r,s),_v(a,o);var f=_v(a,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?gT(r,h):d==="dangerouslySetInnerHTML"?pT(r,h):d==="children"?bc(r,h):i_(r,d,h,f)}switch(a){case"input":pv(r,s);break;case"textarea":dT(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Fl(r,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Fl(r,!!s.multiple,s.defaultValue,!0):Fl(r,!!s.multiple,s.multiple?[]:"",!1))}r[kc]=s}catch(w){sn(n,n.return,w)}}break;case 6:if(_r(e,n),Wr(n),i&4){if(n.stateNode===null)throw Error(Le(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(w){sn(n,n.return,w)}}break;case 3:if(_r(e,n),Wr(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Ic(e.containerInfo)}catch(w){sn(n,n.return,w)}break;case 4:_r(e,n),Wr(n);break;case 13:_r(e,n),Wr(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(O_=fn())),i&4&&bM(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Jn=(f=Jn)||d,_r(e,n),Jn=f):_r(e,n),Wr(n),i&8192){if(f=n.memoizedState!==null,(n.stateNode.isHidden=f)&&!d&&n.mode&1)for(Xe=n,d=n.child;d!==null;){for(h=Xe=d;Xe!==null;){switch(m=Xe,v=m.child,m.tag){case 0:case 11:case 14:case 15:vc(4,m,m.return);break;case 1:Rl(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){sn(i,t,w)}}break;case 5:Rl(m,m.return);break;case 22:if(m.memoizedState!==null){RM(h);continue}}v!==null?(v.return=m,Xe=v):RM(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,f?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=mT("display",o))}catch(w){sn(n,n.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(w){sn(n,n.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_r(e,n),Wr(n),i&4&&bM(n);break;case 21:break;default:_r(e,n),Wr(n)}}function Wr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(VA(t)){var i=t;break e}t=t.return}throw Error(Le(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(bc(r,""),i.flags&=-33);var s=CM(n);$v(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=CM(n);qv(n,a,o);break;default:throw Error(Le(161))}}catch(c){sn(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function WL(n,e,t){Xe=n,XA(n)}function XA(n,e,t){for(var i=(n.mode&1)!==0;Xe!==null;){var r=Xe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||qd;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Jn;a=qd;var f=Jn;if(qd=o,(Jn=c)&&!f)for(Xe=r;Xe!==null;)o=Xe,c=o.child,o.tag===22&&o.memoizedState!==null?LM(r):c!==null?(c.return=o,Xe=c):LM(r);for(;s!==null;)Xe=s,XA(s),s=s.sibling;Xe=r,qd=a,Jn=f}PM(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Xe=s):PM(n)}}function PM(n){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||im(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Jn)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:wr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dM(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}dM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ic(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Le(163))}Jn||e.flags&512&&Yv(e)}catch(m){sn(e,e.return,m)}}if(e===n){Xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function RM(n){for(;Xe!==null;){var e=Xe;if(e===n){Xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function LM(n){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{im(4,e)}catch(c){sn(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){sn(e,r,c)}}var s=e.return;try{Yv(e)}catch(c){sn(e,s,c)}break;case 5:var o=e.return;try{Yv(e)}catch(c){sn(e,o,c)}}}catch(c){sn(e,e.return,c)}if(e===n){Xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xe=a;break}Xe=e.return}}var XL=Math.ceil,Ip=Os.ReactCurrentDispatcher,N_=Os.ReactCurrentOwner,lr=Os.ReactCurrentBatchConfig,Ct=0,Ln=null,yn=null,zn=0,Ui=0,Ll=Po(0),Sn=0,Gc=null,Ea=0,rm=0,U_=0,yc=null,Si=null,O_=0,eu=1/0,_s=null,Dp=!1,Zv=null,mo=null,$d=!1,ao=null,Np=0,_c=0,Kv=null,tp=-1,np=0;function fi(){return Ct&6?fn():tp!==-1?tp:tp=fn()}function go(n){return n.mode&1?Ct&2&&zn!==0?zn&-zn:bL.transition!==null?(np===0&&(np=bT()),np):(n=Ot,n!==0||(n=window.event,n=n===void 0?16:UT(n.type)),n):1}function Pr(n,e,t,i){if(50<_c)throw _c=0,Kv=null,Error(Le(185));hf(n,t,i),(!(Ct&2)||n!==Ln)&&(n===Ln&&(!(Ct&2)&&(rm|=t),Sn===4&&io(n,zn)),Ci(n,i),t===1&&Ct===0&&!(e.mode&1)&&(eu=fn()+500,em&&Ro()))}function Ci(n,e){var t=n.callbackNode;bR(n,e);var i=vp(n,n===Ln?zn:0);if(i===0)t!==null&&BS(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&BS(t),e===1)n.tag===0?CL(IM.bind(null,n)):eA(IM.bind(null,n)),wL(function(){!(Ct&6)&&Ro()}),t=null;else{switch(PT(i)){case 1:t=l_;break;case 4:t=AT;break;case 16:t=gp;break;case 536870912:t=CT;break;default:t=gp}t=QA(t,jA.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function jA(n,e){if(tp=-1,np=0,Ct&6)throw Error(Le(327));var t=n.callbackNode;if(Gl()&&n.callbackNode!==t)return null;var i=vp(n,n===Ln?zn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Up(n,i);else{e=i;var r=Ct;Ct|=2;var s=qA();(Ln!==n||zn!==e)&&(_s=null,eu=fn()+500,ha(n,e));do try{qL();break}catch(a){YA(n,a)}while(1);S_(),Ip.current=s,Ct=r,yn!==null?e=0:(Ln=null,zn=0,e=Sn)}if(e!==0){if(e===2&&(r=Ev(n),r!==0&&(i=r,e=Jv(n,r))),e===1)throw t=Gc,ha(n,0),io(n,i),Ci(n,fn()),t;if(e===6)io(n,i);else{if(r=n.current.alternate,!(i&30)&&!jL(r)&&(e=Up(n,i),e===2&&(s=Ev(n),s!==0&&(i=s,e=Jv(n,s))),e===1))throw t=Gc,ha(n,0),io(n,i),Ci(n,fn()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Le(345));case 2:ea(n,Si,_s);break;case 3:if(io(n,i),(i&130023424)===i&&(e=O_+500-fn(),10<e)){if(vp(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){fi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Iv(ea.bind(null,n,Si,_s),e);break}ea(n,Si,_s);break;case 4:if(io(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-br(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=fn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*XL(i/1960))-i,10<i){n.timeoutHandle=Iv(ea.bind(null,n,Si,_s),i);break}ea(n,Si,_s);break;case 5:ea(n,Si,_s);break;default:throw Error(Le(329))}}}return Ci(n,fn()),n.callbackNode===t?jA.bind(null,n):null}function Jv(n,e){var t=yc;return n.current.memoizedState.isDehydrated&&(ha(n,e).flags|=256),n=Up(n,e),n!==2&&(e=Si,Si=t,e!==null&&Qv(e)),n}function Qv(n){Si===null?Si=n:Si.push.apply(Si,n)}function jL(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Lr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function io(n,e){for(e&=~U_,e&=~rm,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-br(e),i=1<<t;n[t]=-1,e&=~i}}function IM(n){if(Ct&6)throw Error(Le(327));Gl();var e=vp(n,0);if(!(e&1))return Ci(n,fn()),null;var t=Up(n,e);if(n.tag!==0&&t===2){var i=Ev(n);i!==0&&(e=i,t=Jv(n,i))}if(t===1)throw t=Gc,ha(n,0),io(n,e),Ci(n,fn()),t;if(t===6)throw Error(Le(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ea(n,Si,_s),Ci(n,fn()),null}function k_(n,e){var t=Ct;Ct|=1;try{return n(e)}finally{Ct=t,Ct===0&&(eu=fn()+500,em&&Ro())}}function Ta(n){ao!==null&&ao.tag===0&&!(Ct&6)&&Gl();var e=Ct;Ct|=1;var t=lr.transition,i=Ot;try{if(lr.transition=null,Ot=1,n)return n()}finally{Ot=i,lr.transition=t,Ct=e,!(Ct&6)&&Ro()}}function F_(){Ui=Ll.current,jt(Ll)}function ha(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,ML(t)),yn!==null)for(t=yn.return;t!==null;){var i=t;switch(y_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mp();break;case 3:Jl(),jt(Ti),jt(ni),C_();break;case 5:A_(i);break;case 4:Jl();break;case 13:jt(Jt);break;case 19:jt(Jt);break;case 10:M_(i.type._context);break;case 22:case 23:F_()}t=t.return}if(Ln=n,yn=n=vo(n.current,null),zn=Ui=e,Sn=0,Gc=null,U_=rm=Ea=0,Si=yc=null,aa!==null){for(e=0;e<aa.length;e++)if(t=aa[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}aa=null}return n}function YA(n,e){do{var t=yn;try{if(S_(),Jh.current=Lp,Rp){for(var i=en.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Rp=!1}if(wa=0,Pn=xn=en=null,gc=!1,Bc=0,N_.current=null,t===null||t.return===null){Sn=1,Gc=e,yn=null;break}e:{var s=n,o=t.return,a=t,c=e;if(e=zn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=_M(o);if(v!==null){v.flags&=-257,xM(v,o,a,s,e),v.mode&1&&yM(s,f,e),e=v,c=f;var _=e.updateQueue;if(_===null){var w=new Set;w.add(c),e.updateQueue=w}else _.add(c);break e}else{if(!(e&1)){yM(s,f,e),z_();break e}c=Error(Le(426))}}else if(Zt&&a.mode&1){var M=_M(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),xM(M,o,a,s,e),__(Ql(c,a));break e}}s=c=Ql(c,a),Sn!==4&&(Sn=2),yc===null?yc=[s]:yc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=RA(s,c,e);fM(s,g);break e;case 1:a=c;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(mo===null||!mo.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=LA(s,a,e);fM(s,T);break e}}s=s.return}while(s!==null)}ZA(t)}catch(C){e=C,yn===t&&t!==null&&(yn=t=t.return);continue}break}while(1)}function qA(){var n=Ip.current;return Ip.current=Lp,n===null?Lp:n}function z_(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),Ln===null||!(Ea&268435455)&&!(rm&268435455)||io(Ln,zn)}function Up(n,e){var t=Ct;Ct|=2;var i=qA();(Ln!==n||zn!==e)&&(_s=null,ha(n,e));do try{YL();break}catch(r){YA(n,r)}while(1);if(S_(),Ct=t,Ip.current=i,yn!==null)throw Error(Le(261));return Ln=null,zn=0,Sn}function YL(){for(;yn!==null;)$A(yn)}function qL(){for(;yn!==null&&!_R();)$A(yn)}function $A(n){var e=JA(n.alternate,n,Ui);n.memoizedProps=n.pendingProps,e===null?ZA(n):yn=e,N_.current=null}function ZA(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=HL(t,e),t!==null){t.flags&=32767,yn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Sn=6,yn=null;return}}else if(t=BL(t,e,Ui),t!==null){yn=t;return}if(e=e.sibling,e!==null){yn=e;return}yn=e=n}while(e!==null);Sn===0&&(Sn=5)}function ea(n,e,t){var i=Ot,r=lr.transition;try{lr.transition=null,Ot=1,$L(n,e,t,i)}finally{lr.transition=r,Ot=i}return null}function $L(n,e,t,i){do Gl();while(ao!==null);if(Ct&6)throw Error(Le(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Le(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(PR(n,s),n===Ln&&(yn=Ln=null,zn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||$d||($d=!0,QA(gp,function(){return Gl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=lr.transition,lr.transition=null;var o=Ot;Ot=1;var a=Ct;Ct|=4,N_.current=null,GL(n,t),WA(t,n),mL(Rv),yp=!!Pv,Rv=Pv=null,n.current=t,WL(t),xR(),Ct=a,Ot=o,lr.transition=s}else n.current=t;if($d&&($d=!1,ao=n,Np=r),s=n.pendingLanes,s===0&&(mo=null),wR(t.stateNode),Ci(n,fn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Dp)throw Dp=!1,n=Zv,Zv=null,n;return Np&1&&n.tag!==0&&Gl(),s=n.pendingLanes,s&1?n===Kv?_c++:(_c=0,Kv=n):_c=0,Ro(),null}function Gl(){if(ao!==null){var n=PT(Np),e=lr.transition,t=Ot;try{if(lr.transition=null,Ot=16>n?16:n,ao===null)var i=!1;else{if(n=ao,ao=null,Np=0,Ct&6)throw Error(Le(331));var r=Ct;for(Ct|=4,Xe=n.current;Xe!==null;){var s=Xe,o=s.child;if(Xe.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(Xe=f;Xe!==null;){var d=Xe;switch(d.tag){case 0:case 11:case 15:vc(8,d,s)}var h=d.child;if(h!==null)h.return=d,Xe=h;else for(;Xe!==null;){d=Xe;var m=d.sibling,v=d.return;if(HA(d),d===f){Xe=null;break}if(m!==null){m.return=v,Xe=m;break}Xe=v}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var M=w.sibling;w.sibling=null,w=M}while(w!==null)}}Xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xe=o;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vc(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Xe=g;break e}Xe=s.return}}var x=n.current;for(Xe=x;Xe!==null;){o=Xe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Xe=S;else e:for(o=x;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:im(9,a)}}catch(C){sn(a,a.return,C)}if(a===o){Xe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Xe=T;break e}Xe=a.return}}if(Ct=r,Ro(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot($p,n)}catch{}i=!0}return i}finally{Ot=t,lr.transition=e}}return!1}function DM(n,e,t){e=Ql(t,e),e=RA(n,e,1),n=po(n,e,1),e=fi(),n!==null&&(hf(n,1,e),Ci(n,e))}function sn(n,e,t){if(n.tag===3)DM(n,n,t);else for(;e!==null;){if(e.tag===3){DM(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(mo===null||!mo.has(i))){n=Ql(t,n),n=LA(e,n,1),e=po(e,n,1),n=fi(),e!==null&&(hf(e,1,n),Ci(e,n));break}}e=e.return}}function ZL(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=fi(),n.pingedLanes|=n.suspendedLanes&t,Ln===n&&(zn&t)===t&&(Sn===4||Sn===3&&(zn&130023424)===zn&&500>fn()-O_?ha(n,0):U_|=t),Ci(n,e)}function KA(n,e){e===0&&(n.mode&1?(e=zd,zd<<=1,!(zd&130023424)&&(zd=4194304)):e=1);var t=fi();n=Ls(n,e),n!==null&&(hf(n,e,t),Ci(n,t))}function KL(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),KA(n,t)}function JL(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Le(314))}i!==null&&i.delete(e),KA(n,t)}var JA;JA=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ti.current)Ei=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ei=!1,zL(n,e,t);Ei=!!(n.flags&131072)}else Ei=!1,Zt&&e.flags&1048576&&tA(e,Tp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ep(n,e),n=e.pendingProps;var r=$l(e,ni.current);Vl(e,t),r=P_(null,e,i,n,r,t);var s=R_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ai(i)?(s=!0,wp(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,E_(e),r.updater=tm,e.stateNode=r,r._reactInternals=e,zv(e,i,n,t),e=Vv(null,e,i,!0,s,t)):(e.tag=0,Zt&&s&&v_(e),ui(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ep(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=e3(i),n=wr(i,n),r){case 0:e=Hv(null,e,i,n,t);break e;case 1:e=wM(null,e,i,n,t);break e;case 11:e=SM(null,e,i,n,t);break e;case 14:e=MM(null,e,i,wr(i.type,n),t);break e}throw Error(Le(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:wr(i,r),Hv(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:wr(i,r),wM(n,e,i,r,t);case 3:e:{if(UA(e),n===null)throw Error(Le(387));i=e.pendingProps,s=e.memoizedState,r=s.element,sA(n,e),bp(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ql(Error(Le(423)),e),e=EM(n,e,i,t,r);break e}else if(i!==r){r=Ql(Error(Le(424)),e),e=EM(n,e,i,t,r);break e}else for(Oi=ho(e.stateNode.containerInfo.firstChild),zi=e,Zt=!0,Ar=null,t=uA(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Zl(),i===r){e=Is(n,e,t);break e}ui(n,e,i,t)}e=e.child}return e;case 5:return cA(e),n===null&&Ov(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,Lv(i,r)?o=null:s!==null&&Lv(i,s)&&(e.flags|=32),NA(n,e),ui(n,e,o,t),e.child;case 6:return n===null&&Ov(e),null;case 13:return OA(n,e,t);case 4:return T_(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Kl(e,null,i,t):ui(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:wr(i,r),SM(n,e,i,r,t);case 7:return ui(n,e,e.pendingProps,t),e.child;case 8:return ui(n,e,e.pendingProps.children,t),e.child;case 12:return ui(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Wt(Ap,i._currentValue),i._currentValue=o,s!==null)if(Lr(s.value,o)){if(s.children===r.children&&!Ti.current){e=Is(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Cs(-1,t&-t),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),kv(s.return,t,e),a.lanes|=t;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),kv(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ui(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Vl(e,t),r=ur(r),i=i(r),e.flags|=1,ui(n,e,i,t),e.child;case 14:return i=e.type,r=wr(i,e.pendingProps),r=wr(i.type,r),MM(n,e,i,r,t);case 15:return IA(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:wr(i,r),ep(n,e),e.tag=1,Ai(i)?(n=!0,wp(e)):n=!1,Vl(e,t),aA(e,i,r),zv(e,i,r,t),Vv(null,e,i,!0,n,t);case 19:return kA(n,e,t);case 22:return DA(n,e,t)}throw Error(Le(156,e.tag))};function QA(n,e){return TT(n,e)}function QL(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(n,e,t,i){return new QL(n,e,t,i)}function B_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function e3(n){if(typeof n=="function")return B_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===s_)return 11;if(n===o_)return 14}return 2}function vo(n,e){var t=n.alternate;return t===null?(t=ar(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ip(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")B_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Sl:return pa(t.children,r,s,e);case r_:o=8,r|=8;break;case uv:return n=ar(12,t,e,r|2),n.elementType=uv,n.lanes=s,n;case cv:return n=ar(13,t,e,r),n.elementType=cv,n.lanes=s,n;case fv:return n=ar(19,t,e,r),n.elementType=fv,n.lanes=s,n;case lT:return sm(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case oT:o=10;break e;case aT:o=9;break e;case s_:o=11;break e;case o_:o=14;break e;case Qs:o=16,i=null;break e}throw Error(Le(130,n==null?n:typeof n,""))}return e=ar(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function pa(n,e,t,i){return n=ar(7,n,i,e),n.lanes=t,n}function sm(n,e,t,i){return n=ar(22,n,i,e),n.elementType=lT,n.lanes=t,n.stateNode={isHidden:!1},n}function h0(n,e,t){return n=ar(6,n,null,e),n.lanes=t,n}function p0(n,e,t){return e=ar(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function t3(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qg(0),this.expirationTimes=qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function H_(n,e,t,i,r,s,o,a,c){return n=new t3(n,e,t,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ar(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},E_(s),n}function n3(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function eC(n){if(!n)return wo;n=n._reactInternals;e:{if(Ra(n)!==n||n.tag!==1)throw Error(Le(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ai(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Le(171))}if(n.tag===1){var t=n.type;if(Ai(t))return QT(n,t,e)}return e}function tC(n,e,t,i,r,s,o,a,c){return n=H_(t,i,!0,n,r,s,o,a,c),n.context=eC(null),t=n.current,i=fi(),r=go(t),s=Cs(i,r),s.callback=e??null,po(t,s,r),n.current.lanes=r,hf(n,r,i),Ci(n,i),n}function om(n,e,t,i){var r=e.current,s=fi(),o=go(r);return t=eC(t),e.context===null?e.context=t:e.pendingContext=t,e=Cs(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=po(r,e,o),n!==null&&(Pr(n,r,o,s),Kh(n,r,o)),o}function Op(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function NM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function V_(n,e){NM(n,e),(n=n.alternate)&&NM(n,e)}function i3(){return null}var nC=typeof reportError=="function"?reportError:function(n){console.error(n)};function G_(n){this._internalRoot=n}am.prototype.render=G_.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Le(409));om(n,e,null,null)};am.prototype.unmount=G_.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ta(function(){om(null,n,null,null)}),e[Rs]=null}};function am(n){this._internalRoot=n}am.prototype.unstable_scheduleHydration=function(n){if(n){var e=IT();n={blockedOn:null,target:n,priority:e};for(var t=0;t<no.length&&e!==0&&e<no[t].priority;t++);no.splice(t,0,n),t===0&&NT(n)}};function W_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function UM(){}function r3(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=Op(o);s.call(f)}}var o=tC(e,i,n,0,null,!1,!1,"",UM);return n._reactRootContainer=o,n[Rs]=o.current,Uc(n.nodeType===8?n.parentNode:n),Ta(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var f=Op(c);a.call(f)}}var c=H_(n,0,!1,null,null,!1,!1,"",UM);return n._reactRootContainer=c,n[Rs]=c.current,Uc(n.nodeType===8?n.parentNode:n),Ta(function(){om(e,c,t,i)}),c}function um(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var c=Op(o);a.call(c)}}om(e,o,n,r)}else o=r3(t,e,n,r,i);return Op(o)}RT=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ac(e.pendingLanes);t!==0&&(u_(e,t|1),Ci(e,fn()),!(Ct&6)&&(eu=fn()+500,Ro()))}break;case 13:Ta(function(){var i=Ls(n,1);if(i!==null){var r=fi();Pr(i,n,1,r)}}),V_(n,1)}};c_=function(n){if(n.tag===13){var e=Ls(n,134217728);if(e!==null){var t=fi();Pr(e,n,134217728,t)}V_(n,134217728)}};LT=function(n){if(n.tag===13){var e=go(n),t=Ls(n,e);if(t!==null){var i=fi();Pr(t,n,e,i)}V_(n,e)}};IT=function(){return Ot};DT=function(n,e){var t=Ot;try{return Ot=n,e()}finally{Ot=t}};Sv=function(n,e,t){switch(e){case"input":if(pv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Qp(i);if(!r)throw Error(Le(90));cT(i),pv(i,r)}}}break;case"textarea":dT(n,t);break;case"select":e=t.value,e!=null&&Fl(n,!!t.multiple,e,!1)}};_T=k_;xT=Ta;var s3={usingClientEntryPoint:!1,Events:[mf,Tl,Qp,vT,yT,k_]},ju={findFiberByHostInstance:oa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},o3={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wT(n),n===null?null:n.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||i3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{$p=Zd.inject(o3),Jr=Zd}catch{}}Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s3;Vi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!W_(e))throw Error(Le(200));return n3(n,e,null,t)};Vi.createRoot=function(n,e){if(!W_(n))throw Error(Le(299));var t=!1,i="",r=nC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=H_(n,1,!1,null,null,t,!1,i,r),n[Rs]=e.current,Uc(n.nodeType===8?n.parentNode:n),new G_(e)};Vi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Le(188)):(n=Object.keys(n).join(","),Error(Le(268,n)));return n=wT(e),n=n===null?null:n.stateNode,n};Vi.flushSync=function(n){return Ta(n)};Vi.hydrate=function(n,e,t){if(!lm(e))throw Error(Le(200));return um(null,n,e,!0,t)};Vi.hydrateRoot=function(n,e,t){if(!W_(n))throw Error(Le(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=nC;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=tC(e,null,n,1,t??null,r,!1,s,o),n[Rs]=e.current,Uc(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new am(e)};Vi.render=function(n,e,t){if(!lm(e))throw Error(Le(200));return um(null,n,e,!1,t)};Vi.unmountComponentAtNode=function(n){if(!lm(n))throw Error(Le(40));return n._reactRootContainer?(Ta(function(){um(null,null,n,!1,function(){n._reactRootContainer=null,n[Rs]=null})}),!0):!1};Vi.unstable_batchedUpdates=k_;Vi.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!lm(t))throw Error(Le(200));if(n==null||n._reactInternals===void 0)throw Error(Le(38));return um(n,e,t,!1,i)};Vi.version="18.2.0-next-9e3b772b8-20220608";function iC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iC)}catch(n){console.error(n)}}iC(),tT.exports=Vi;var a3=tT.exports,rC,OM=a3;rC=av.createRoot=OM.createRoot,av.hydrateRoot=OM.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const cm="152",ta={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},na={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sC=0,ey=1,oC=2,l3=3,aC=0,fm=1,xc=2,Er=3,Ds=0,ei=1,Cr=2,u3=2,bs=0,ma=1,ty=2,ny=3,iy=4,lC=5,ra=100,uC=101,cC=102,ry=103,sy=104,fC=200,dC=201,hC=202,pC=203,X_=204,j_=205,mC=206,gC=207,vC=208,yC=209,_C=210,xC=0,SC=1,MC=2,kp=3,wC=4,EC=5,TC=6,AC=7,vf=0,CC=1,bC=2,Rr=0,PC=1,RC=2,LC=3,Y_=4,IC=5,dm=300,Eo=301,To=302,Wc=303,Xc=304,fu=306,jc=1e3,Qn=1001,Yc=1002,cn=1003,Fp=1004,c3=1004,Sc=1005,f3=1005,dn=1006,q_=1007,d3=1007,Ao=1008,h3=1008,Ns=1009,DC=1010,NC=1011,$_=1012,UC=1013,lo=1014,Es=1015,tu=1016,OC=1017,kC=1018,ga=1020,FC=1021,wi=1023,zC=1024,BC=1025,yo=1026,Aa=1027,HC=1028,VC=1029,GC=1030,WC=1031,XC=1033,rp=33776,sp=33777,op=33778,ap=33779,oy=35840,ay=35841,ly=35842,uy=35843,jC=36196,cy=37492,fy=37496,dy=37808,hy=37809,py=37810,my=37811,gy=37812,vy=37813,yy=37814,_y=37815,xy=37816,Sy=37817,My=37818,wy=37819,Ey=37820,Ty=37821,lp=36492,YC=36283,Ay=36284,Cy=36285,by=36286,qC=2200,$C=2201,ZC=2202,qc=2300,$c=2301,up=2302,ua=2400,ca=2401,Zc=2402,hm=2500,Z_=2501,p3=0,m3=1,g3=2,K_=3e3,_o=3001,KC=3200,JC=3201,Lo=0,QC=1,xo="",ht="srgb",Ir="srgb-linear",J_="display-p3",v3=0,cp=7680,y3=7681,_3=7682,x3=7683,S3=34055,M3=34056,w3=5386,E3=512,T3=513,A3=514,C3=515,b3=516,P3=517,R3=518,eb=519,Kc=35044,L3=35048,I3=35040,D3=35045,N3=35049,U3=35041,O3=35046,k3=35050,F3=35042,z3="100",Py="300 es",zp=1035;class is{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const $n=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kM=1234567;const va=Math.PI/180,nu=180/Math.PI;function Bi(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return($n[n&255]+$n[n>>8&255]+$n[n>>16&255]+$n[n>>24&255]+"-"+$n[e&255]+$n[e>>8&255]+"-"+$n[e>>16&15|64]+$n[e>>24&255]+"-"+$n[t&63|128]+$n[t>>8&255]+"-"+$n[t>>16&255]+$n[t>>24&255]+$n[i&255]+$n[i>>8&255]+$n[i>>16&255]+$n[i>>24&255]).toLowerCase()}function on(n,e,t){return Math.max(e,Math.min(t,n))}function Q_(n,e){return(n%e+e)%e}function B3(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function H3(n,e,t){return n!==e?(t-n)/(e-n):0}function Mc(n,e,t){return(1-t)*n+t*e}function V3(n,e,t,i){return Mc(n,e,1-Math.exp(-t*i))}function G3(n,e=1){return e-Math.abs(Q_(n,e*2)-e)}function W3(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function X3(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function j3(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Y3(n,e){return n+Math.random()*(e-n)}function q3(n){return n*(.5-Math.random())}function $3(n){n!==void 0&&(kM=n);let e=kM+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Z3(n){return n*va}function K3(n){return n*nu}function Ry(n){return(n&n-1)===0&&n!==0}function tb(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function nb(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function J3(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),f=s((e+i)/2),d=o((e+i)/2),h=s((e-i)/2),m=o((e-i)/2),v=s((i-e)/2),_=o((i-e)/2);switch(r){case"XYX":n.set(a*d,c*h,c*m,a*f);break;case"YZY":n.set(c*m,a*d,c*h,a*f);break;case"ZXZ":n.set(c*h,c*m,a*d,a*f);break;case"XZX":n.set(a*d,c*_,c*v,a*f);break;case"YXY":n.set(c*v,a*d,c*_,a*f);break;case"ZYZ":n.set(c*_,c*v,a*d,a*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ki(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function gt(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ib={DEG2RAD:va,RAD2DEG:nu,generateUUID:Bi,clamp:on,euclideanModulo:Q_,mapLinear:B3,inverseLerp:H3,lerp:Mc,damp:V3,pingpong:G3,smoothstep:W3,smootherstep:X3,randInt:j3,randFloat:Y3,randFloatSpread:q3,seededRandom:$3,degToRad:Z3,radToDeg:K3,isPowerOfTwo:Ry,ceilPowerOfTwo:tb,floorPowerOfTwo:nb,setQuaternionFromProperEuler:J3,normalize:gt,denormalize:ki};class Ee{constructor(e=0,t=0){Ee.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(on(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wt{constructor(){wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,o,a,c,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=c,d[6]=i,d[7]=o,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],f=i[1],d=i[4],h=i[7],m=i[2],v=i[5],_=i[8],w=r[0],M=r[3],g=r[6],x=r[1],S=r[4],T=r[7],C=r[2],P=r[5],R=r[8];return s[0]=o*w+a*x+c*C,s[3]=o*M+a*S+c*P,s[6]=o*g+a*T+c*R,s[1]=f*w+d*x+h*C,s[4]=f*M+d*S+h*P,s[7]=f*g+d*T+h*R,s[2]=m*w+v*x+_*C,s[5]=m*M+v*S+_*P,s[8]=m*g+v*T+_*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],f=e[7],d=e[8];return t*o*d-t*a*f-i*s*d+i*a*c+r*s*f-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],f=e[7],d=e[8],h=d*o-a*f,m=a*c-d*s,v=f*s-o*c,_=t*h+i*m+r*v;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=h*w,e[1]=(r*f-d*i)*w,e[2]=(a*i-r*o)*w,e[3]=m*w,e[4]=(d*t-r*c)*w,e[5]=(r*s-a*t)*w,e[6]=v*w,e[7]=(i*c-f*t)*w,e[8]=(o*t-i*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),f=Math.sin(s);return this.set(i*c,i*f,-i*(c*o+f*a)+o+e,-r*f,r*c,-r*(-f*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(m0.makeScale(e,t)),this}rotate(e){return this.premultiply(m0.makeRotation(-e)),this}translate(e,t){return this.premultiply(m0.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const m0=new wt;function rb(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Q3={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Il(n,e){return new Q3[n](e)}function Jc(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const FM={};function wc(n){n in FM||(FM[n]=!0,console.warn(n))}function Wl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function g0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const eI=new wt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),tI=new wt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function nI(n){return n.convertSRGBToLinear().applyMatrix3(tI)}function iI(n){return n.applyMatrix3(eI).convertLinearToSRGB()}const rI={[Ir]:n=>n,[ht]:n=>n.convertSRGBToLinear(),[J_]:nI},sI={[Ir]:n=>n,[ht]:n=>n.convertLinearToSRGB(),[J_]:iI},ir={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Ir},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=rI[e],r=sI[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let qa;class ex{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{qa===void 0&&(qa=Jc("canvas")),qa.width=e.width,qa.height=e.height;const i=qa.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=qa}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Jc("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Wl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Wl(t[i]/255)*255):t[i]=Wl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class fa{constructor(e=null){this.isSource=!0,this.uuid=Bi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(v0(r[o].image)):s.push(v0(r[o]))}else s=v0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function v0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ex.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let oI=0;class an extends is{constructor(e=an.DEFAULT_IMAGE,t=an.DEFAULT_MAPPING,i=Qn,r=Qn,s=dn,o=Ao,a=wi,c=Ns,f=an.DEFAULT_ANISOTROPY,d=xo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:oI++}),this.uuid=Bi(),this.name="",this.source=new fa(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Ee(0,0),this.repeat=new Ee(1,1),this.center=new Ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(wc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===_o?ht:xo),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dm)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case jc:e.x=e.x-Math.floor(e.x);break;case Qn:e.x=e.x<0?0:1;break;case Yc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case jc:e.y=e.y-Math.floor(e.y);break;case Qn:e.y=e.y<0?0:1;break;case Yc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return wc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ht?_o:K_}set encoding(e){wc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===_o?ht:xo}}an.DEFAULT_IMAGE=null;an.DEFAULT_MAPPING=dm;an.DEFAULT_ANISOTROPY=1;class At{constructor(e=0,t=0,i=0,r=1){At.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,f=c[0],d=c[4],h=c[8],m=c[1],v=c[5],_=c[9],w=c[2],M=c[6],g=c[10];if(Math.abs(d-m)<.01&&Math.abs(h-w)<.01&&Math.abs(_-M)<.01){if(Math.abs(d+m)<.1&&Math.abs(h+w)<.1&&Math.abs(_+M)<.1&&Math.abs(f+v+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(f+1)/2,T=(v+1)/2,C=(g+1)/2,P=(d+m)/4,R=(h+w)/4,I=(_+M)/4;return S>T&&S>C?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=P/i,s=R/i):T>C?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=P/r,s=I/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=R/s,r=I/s),this.set(i,r,s,t),this}let x=Math.sqrt((M-_)*(M-_)+(h-w)*(h-w)+(m-d)*(m-d));return Math.abs(x)<.001&&(x=1),this.x=(M-_)/x,this.y=(h-w)/x,this.z=(m-d)/x,this.w=Math.acos((f+v+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Dr extends is{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new At(0,0,e,t),this.scissorTest=!1,this.viewport=new At(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(wc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===_o?ht:xo),this.texture=new an(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:dn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new fa(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class pm extends an{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=cn,this.minFilter=cn,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aI extends Dr{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new pm(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class tx extends an{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=cn,this.minFilter=cn,this.wrapR=Qn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lI extends Dr{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new tx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class uI extends Dr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ti{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],f=i[r+1],d=i[r+2],h=i[r+3];const m=s[o+0],v=s[o+1],_=s[o+2],w=s[o+3];if(a===0){e[t+0]=c,e[t+1]=f,e[t+2]=d,e[t+3]=h;return}if(a===1){e[t+0]=m,e[t+1]=v,e[t+2]=_,e[t+3]=w;return}if(h!==w||c!==m||f!==v||d!==_){let M=1-a;const g=c*m+f*v+d*_+h*w,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const C=Math.sqrt(S),P=Math.atan2(C,g*x);M=Math.sin(M*P)/C,a=Math.sin(a*P)/C}const T=a*x;if(c=c*M+m*T,f=f*M+v*T,d=d*M+_*T,h=h*M+w*T,M===1-a){const C=1/Math.sqrt(c*c+f*f+d*d+h*h);c*=C,f*=C,d*=C,h*=C}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],f=i[r+2],d=i[r+3],h=s[o],m=s[o+1],v=s[o+2],_=s[o+3];return e[t]=a*_+d*h+c*v-f*m,e[t+1]=c*_+d*m+f*h-a*v,e[t+2]=f*_+d*v+a*m-c*h,e[t+3]=d*_-a*h-c*m-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,f=a(i/2),d=a(r/2),h=a(s/2),m=c(i/2),v=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=m*d*h+f*v*_,this._y=f*v*h-m*d*_,this._z=f*d*_+m*v*h,this._w=f*d*h-m*v*_;break;case"YXZ":this._x=m*d*h+f*v*_,this._y=f*v*h-m*d*_,this._z=f*d*_-m*v*h,this._w=f*d*h+m*v*_;break;case"ZXY":this._x=m*d*h-f*v*_,this._y=f*v*h+m*d*_,this._z=f*d*_+m*v*h,this._w=f*d*h-m*v*_;break;case"ZYX":this._x=m*d*h-f*v*_,this._y=f*v*h+m*d*_,this._z=f*d*_-m*v*h,this._w=f*d*h+m*v*_;break;case"YZX":this._x=m*d*h+f*v*_,this._y=f*v*h+m*d*_,this._z=f*d*_-m*v*h,this._w=f*d*h-m*v*_;break;case"XZY":this._x=m*d*h-f*v*_,this._y=f*v*h-m*d*_,this._z=f*d*_+m*v*h,this._w=f*d*h+m*v*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],f=t[2],d=t[6],h=t[10],m=i+a+h;if(m>0){const v=.5/Math.sqrt(m+1);this._w=.25/v,this._x=(d-c)*v,this._y=(s-f)*v,this._z=(o-r)*v}else if(i>a&&i>h){const v=2*Math.sqrt(1+i-a-h);this._w=(d-c)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+f)/v}else if(a>h){const v=2*Math.sqrt(1+a-i-h);this._w=(s-f)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(c+d)/v}else{const v=2*Math.sqrt(1+h-i-a);this._w=(o-r)/v,this._x=(s+f)/v,this._y=(c+d)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(on(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,f=t._z,d=t._w;return this._x=i*d+o*a+r*f-s*c,this._y=r*d+o*c+s*a-i*f,this._z=s*d+o*f+i*c-r*a,this._w=o*d-i*a-r*c-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(c),d=Math.atan2(f,a),h=Math.sin((1-t)*d)/f,m=Math.sin(t*d)/f;return this._w=o*h+this._w*m,this._x=i*h+this._x*m,this._y=r*h+this._y*m,this._z=s*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class N{constructor(e=0,t=0,i=0){N.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(zM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(zM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,f=c*t+o*r-a*i,d=c*i+a*t-s*r,h=c*r+s*i-o*t,m=-s*t-o*i-a*r;return this.x=f*c+m*-s+d*-a-h*-o,this.y=d*c+m*-o+h*-s-f*-a,this.z=h*c+m*-a+f*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return y0.copy(this).projectOnVector(e),this.sub(y0)}reflect(e){return this.sub(y0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(on(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const y0=new N,zM=new ti;class Wi{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(hs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(hs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=hs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),$a.copy(e.boundingBox),$a.applyMatrix4(e.matrixWorld),this.union($a);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)hs.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(hs)}else r.boundingBox===null&&r.computeBoundingBox(),$a.copy(r.boundingBox),$a.applyMatrix4(e.matrixWorld),this.union($a)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hs),hs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Yu),Kd.subVectors(this.max,Yu),Za.subVectors(e.a,Yu),Ka.subVectors(e.b,Yu),Ja.subVectors(e.c,Yu),qs.subVectors(Ka,Za),$s.subVectors(Ja,Ka),Xo.subVectors(Za,Ja);let t=[0,-qs.z,qs.y,0,-$s.z,$s.y,0,-Xo.z,Xo.y,qs.z,0,-qs.x,$s.z,0,-$s.x,Xo.z,0,-Xo.x,-qs.y,qs.x,0,-$s.y,$s.x,0,-Xo.y,Xo.x,0];return!_0(t,Za,Ka,Ja,Kd)||(t=[1,0,0,0,1,0,0,0,1],!_0(t,Za,Ka,Ja,Kd))?!1:(Jd.crossVectors(qs,$s),t=[Jd.x,Jd.y,Jd.z],_0(t,Za,Ka,Ja,Kd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ds[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ds[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ds[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ds[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ds[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ds[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ds[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ds[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ds),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ds=[new N,new N,new N,new N,new N,new N,new N,new N],hs=new N,$a=new Wi,Za=new N,Ka=new N,Ja=new N,qs=new N,$s=new N,Xo=new N,Yu=new N,Kd=new N,Jd=new N,jo=new N;function _0(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){jo.fromArray(n,s);const a=r.x*Math.abs(jo.x)+r.y*Math.abs(jo.y)+r.z*Math.abs(jo.z),c=e.dot(jo),f=t.dot(jo),d=i.dot(jo);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>a)return!1}return!0}const cI=new Wi,qu=new N,x0=new N;class fr{constructor(e=new N,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):cI.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;qu.subVectors(e,this.center);const t=qu.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(qu,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(x0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(qu.copy(e.center).add(x0)),this.expandByPoint(qu.copy(e.center).sub(x0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ps=new N,S0=new N,Qd=new N,Zs=new N,M0=new N,eh=new N,w0=new N;class yf{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ps)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ps.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ps.copy(this.origin).addScaledVector(this.direction,t),ps.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){S0.copy(e).add(t).multiplyScalar(.5),Qd.copy(t).sub(e).normalize(),Zs.copy(this.origin).sub(S0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Qd),a=Zs.dot(this.direction),c=-Zs.dot(Qd),f=Zs.lengthSq(),d=Math.abs(1-o*o);let h,m,v,_;if(d>0)if(h=o*c-a,m=o*a-c,_=s*d,h>=0)if(m>=-_)if(m<=_){const w=1/d;h*=w,m*=w,v=h*(h+o*m+2*a)+m*(o*h+m+2*c)+f}else m=s,h=Math.max(0,-(o*m+a)),v=-h*h+m*(m+2*c)+f;else m=-s,h=Math.max(0,-(o*m+a)),v=-h*h+m*(m+2*c)+f;else m<=-_?(h=Math.max(0,-(-o*s+a)),m=h>0?-s:Math.min(Math.max(-s,-c),s),v=-h*h+m*(m+2*c)+f):m<=_?(h=0,m=Math.min(Math.max(-s,-c),s),v=m*(m+2*c)+f):(h=Math.max(0,-(o*s+a)),m=h>0?s:Math.min(Math.max(-s,-c),s),v=-h*h+m*(m+2*c)+f);else m=o>0?-s:s,h=Math.max(0,-(o*m+a)),v=-h*h+m*(m+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(S0).addScaledVector(Qd,m),v}intersectSphere(e,t){ps.subVectors(e.center,this.origin);const i=ps.dot(this.direction),r=ps.dot(ps)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const f=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,m=this.origin;return f>=0?(i=(e.min.x-m.x)*f,r=(e.max.x-m.x)*f):(i=(e.max.x-m.x)*f,r=(e.min.x-m.x)*f),d>=0?(s=(e.min.y-m.y)*d,o=(e.max.y-m.y)*d):(s=(e.max.y-m.y)*d,o=(e.min.y-m.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-m.z)*h,c=(e.max.z-m.z)*h):(a=(e.max.z-m.z)*h,c=(e.min.z-m.z)*h),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ps)!==null}intersectTriangle(e,t,i,r,s){M0.subVectors(t,e),eh.subVectors(i,e),w0.crossVectors(M0,eh);let o=this.direction.dot(w0),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Zs.subVectors(this.origin,e);const c=a*this.direction.dot(eh.crossVectors(Zs,eh));if(c<0)return null;const f=a*this.direction.dot(M0.cross(Zs));if(f<0||c+f>o)return null;const d=-a*Zs.dot(w0);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ut{constructor(){ut.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,o,a,c,f,d,h,m,v,_,w,M){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=c,g[2]=f,g[6]=d,g[10]=h,g[14]=m,g[3]=v,g[7]=_,g[11]=w,g[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ut().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Qa.setFromMatrixColumn(e,0).length(),s=1/Qa.setFromMatrixColumn(e,1).length(),o=1/Qa.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),f=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const m=o*d,v=o*h,_=a*d,w=a*h;t[0]=c*d,t[4]=-c*h,t[8]=f,t[1]=v+_*f,t[5]=m-w*f,t[9]=-a*c,t[2]=w-m*f,t[6]=_+v*f,t[10]=o*c}else if(e.order==="YXZ"){const m=c*d,v=c*h,_=f*d,w=f*h;t[0]=m+w*a,t[4]=_*a-v,t[8]=o*f,t[1]=o*h,t[5]=o*d,t[9]=-a,t[2]=v*a-_,t[6]=w+m*a,t[10]=o*c}else if(e.order==="ZXY"){const m=c*d,v=c*h,_=f*d,w=f*h;t[0]=m-w*a,t[4]=-o*h,t[8]=_+v*a,t[1]=v+_*a,t[5]=o*d,t[9]=w-m*a,t[2]=-o*f,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const m=o*d,v=o*h,_=a*d,w=a*h;t[0]=c*d,t[4]=_*f-v,t[8]=m*f+w,t[1]=c*h,t[5]=w*f+m,t[9]=v*f-_,t[2]=-f,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const m=o*c,v=o*f,_=a*c,w=a*f;t[0]=c*d,t[4]=w-m*h,t[8]=_*h+v,t[1]=h,t[5]=o*d,t[9]=-a*d,t[2]=-f*d,t[6]=v*h+_,t[10]=m-w*h}else if(e.order==="XZY"){const m=o*c,v=o*f,_=a*c,w=a*f;t[0]=c*d,t[4]=-h,t[8]=f*d,t[1]=m*h+w,t[5]=o*d,t[9]=v*h-_,t[2]=_*h-v,t[6]=a*d,t[10]=w*h+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fI,e,dI)}lookAt(e,t,i){const r=this.elements;return Di.subVectors(e,t),Di.lengthSq()===0&&(Di.z=1),Di.normalize(),Ks.crossVectors(i,Di),Ks.lengthSq()===0&&(Math.abs(i.z)===1?Di.x+=1e-4:Di.z+=1e-4,Di.normalize(),Ks.crossVectors(i,Di)),Ks.normalize(),th.crossVectors(Di,Ks),r[0]=Ks.x,r[4]=th.x,r[8]=Di.x,r[1]=Ks.y,r[5]=th.y,r[9]=Di.y,r[2]=Ks.z,r[6]=th.z,r[10]=Di.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],f=i[12],d=i[1],h=i[5],m=i[9],v=i[13],_=i[2],w=i[6],M=i[10],g=i[14],x=i[3],S=i[7],T=i[11],C=i[15],P=r[0],R=r[4],I=r[8],b=r[12],L=r[1],G=r[5],K=r[9],q=r[13],te=r[2],Q=r[6],ue=r[10],ne=r[14],D=r[3],H=r[7],z=r[11],oe=r[15];return s[0]=o*P+a*L+c*te+f*D,s[4]=o*R+a*G+c*Q+f*H,s[8]=o*I+a*K+c*ue+f*z,s[12]=o*b+a*q+c*ne+f*oe,s[1]=d*P+h*L+m*te+v*D,s[5]=d*R+h*G+m*Q+v*H,s[9]=d*I+h*K+m*ue+v*z,s[13]=d*b+h*q+m*ne+v*oe,s[2]=_*P+w*L+M*te+g*D,s[6]=_*R+w*G+M*Q+g*H,s[10]=_*I+w*K+M*ue+g*z,s[14]=_*b+w*q+M*ne+g*oe,s[3]=x*P+S*L+T*te+C*D,s[7]=x*R+S*G+T*Q+C*H,s[11]=x*I+S*K+T*ue+C*z,s[15]=x*b+S*q+T*ne+C*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],f=e[13],d=e[2],h=e[6],m=e[10],v=e[14],_=e[3],w=e[7],M=e[11],g=e[15];return _*(+s*c*h-r*f*h-s*a*m+i*f*m+r*a*v-i*c*v)+w*(+t*c*v-t*f*m+s*o*m-r*o*v+r*f*d-s*c*d)+M*(+t*f*h-t*a*v-s*o*h+i*o*v+s*a*d-i*f*d)+g*(-r*a*d-t*c*h+t*a*m+r*o*h-i*o*m+i*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],f=e[7],d=e[8],h=e[9],m=e[10],v=e[11],_=e[12],w=e[13],M=e[14],g=e[15],x=h*M*f-w*m*f+w*c*v-a*M*v-h*c*g+a*m*g,S=_*m*f-d*M*f-_*c*v+o*M*v+d*c*g-o*m*g,T=d*w*f-_*h*f+_*a*v-o*w*v-d*a*g+o*h*g,C=_*h*c-d*w*c-_*a*m+o*w*m+d*a*M-o*h*M,P=t*x+i*S+r*T+s*C;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/P;return e[0]=x*R,e[1]=(w*m*s-h*M*s-w*r*v+i*M*v+h*r*g-i*m*g)*R,e[2]=(a*M*s-w*c*s+w*r*f-i*M*f-a*r*g+i*c*g)*R,e[3]=(h*c*s-a*m*s-h*r*f+i*m*f+a*r*v-i*c*v)*R,e[4]=S*R,e[5]=(d*M*s-_*m*s+_*r*v-t*M*v-d*r*g+t*m*g)*R,e[6]=(_*c*s-o*M*s-_*r*f+t*M*f+o*r*g-t*c*g)*R,e[7]=(o*m*s-d*c*s+d*r*f-t*m*f-o*r*v+t*c*v)*R,e[8]=T*R,e[9]=(_*h*s-d*w*s-_*i*v+t*w*v+d*i*g-t*h*g)*R,e[10]=(o*w*s-_*a*s+_*i*f-t*w*f-o*i*g+t*a*g)*R,e[11]=(d*a*s-o*h*s-d*i*f+t*h*f+o*i*v-t*a*v)*R,e[12]=C*R,e[13]=(d*w*r-_*h*r+_*i*m-t*w*m-d*i*M+t*h*M)*R,e[14]=(_*a*r-o*w*r-_*i*c+t*w*c+o*i*M-t*a*M)*R,e[15]=(o*h*r-d*a*r+d*i*c-t*h*c-o*i*m+t*a*m)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,f=s*o,d=s*a;return this.set(f*o+i,f*a-r*c,f*c+r*a,0,f*a+r*c,d*a+i,d*c-r*o,0,f*c-r*a,d*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,f=s+s,d=o+o,h=a+a,m=s*f,v=s*d,_=s*h,w=o*d,M=o*h,g=a*h,x=c*f,S=c*d,T=c*h,C=i.x,P=i.y,R=i.z;return r[0]=(1-(w+g))*C,r[1]=(v+T)*C,r[2]=(_-S)*C,r[3]=0,r[4]=(v-T)*P,r[5]=(1-(m+g))*P,r[6]=(M+x)*P,r[7]=0,r[8]=(_+S)*R,r[9]=(M-x)*R,r[10]=(1-(m+w))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Qa.set(r[0],r[1],r[2]).length();const o=Qa.set(r[4],r[5],r[6]).length(),a=Qa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],xr.copy(this);const f=1/s,d=1/o,h=1/a;return xr.elements[0]*=f,xr.elements[1]*=f,xr.elements[2]*=f,xr.elements[4]*=d,xr.elements[5]*=d,xr.elements[6]*=d,xr.elements[8]*=h,xr.elements[9]*=h,xr.elements[10]*=h,t.setFromRotationMatrix(xr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){const a=this.elements,c=2*s/(t-e),f=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r),m=-(o+s)/(o-s),v=-2*o*s/(o-s);return a[0]=c,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=f,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=m,a[14]=v,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),f=1/(i-r),d=1/(o-s),h=(t+e)*c,m=(i+r)*f,v=(o+s)*d;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*f,a[9]=0,a[13]=-m,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-v,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Qa=new N,xr=new ut,fI=new N(0,0,0),dI=new N(1,1,1),Ks=new N,th=new N,Di=new N,BM=new ut,HM=new ti;class du{constructor(e=0,t=0,i=0,r=du.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],c=r[1],f=r[5],d=r[9],h=r[2],m=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin(on(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,f),this._z=0);break;case"YXZ":this._x=Math.asin(-on(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(on(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-h,v),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-on(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(on(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-on(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,f),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return BM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(BM,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return HM.setFromEuler(this),this.setFromQuaternion(HM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}du.DEFAULT_ORDER="XYZ";class ya{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let hI=0;const VM=new N,el=new ti,ms=new ut,nh=new N,$u=new N,pI=new N,mI=new ti,GM=new N(1,0,0),WM=new N(0,1,0),XM=new N(0,0,1),gI={type:"added"},jM={type:"removed"};class Lt extends is{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hI++}),this.uuid=Bi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lt.DEFAULT_UP.clone();const e=new N,t=new du,i=new ti,r=new N(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ut},normalMatrix:{value:new wt}}),this.matrix=new ut,this.matrixWorld=new ut,this.matrixAutoUpdate=Lt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Lt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ya,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return el.setFromAxisAngle(e,t),this.quaternion.multiply(el),this}rotateOnWorldAxis(e,t){return el.setFromAxisAngle(e,t),this.quaternion.premultiply(el),this}rotateX(e){return this.rotateOnAxis(GM,e)}rotateY(e){return this.rotateOnAxis(WM,e)}rotateZ(e){return this.rotateOnAxis(XM,e)}translateOnAxis(e,t){return VM.copy(e).applyQuaternion(this.quaternion),this.position.add(VM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(GM,e)}translateY(e){return this.translateOnAxis(WM,e)}translateZ(e){return this.translateOnAxis(XM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ms.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?nh.copy(e):nh.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),$u.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ms.lookAt($u,nh,this.up):ms.lookAt(nh,$u,this.up),this.quaternion.setFromRotationMatrix(ms),r&&(ms.extractRotation(r.matrixWorld),el.setFromRotationMatrix(ms),this.quaternion.premultiply(el.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(gI)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jM)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(jM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ms.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ms.multiply(e.parent.matrixWorld)),e.applyMatrix4(ms),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($u,e,pI),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($u,mI,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const h=c[f];s(e.shapes,h)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,f=this.material.length;c<f;c++)a.push(s(e.materials,this.material[c]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];r.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),f=o(e.textures),d=o(e.images),h=o(e.shapes),m=o(e.skeletons),v=o(e.animations),_=o(e.nodes);a.length>0&&(i.geometries=a),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),d.length>0&&(i.images=d),h.length>0&&(i.shapes=h),m.length>0&&(i.skeletons=m),v.length>0&&(i.animations=v),_.length>0&&(i.nodes=_)}return i.object=r,i;function o(a){const c=[];for(const f in a){const d=a[f];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Lt.DEFAULT_UP=new N(0,1,0);Lt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Lt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Sr=new N,gs=new N,E0=new N,vs=new N,tl=new N,nl=new N,YM=new N,T0=new N,A0=new N,C0=new N;let ih=!1;class Mi{constructor(e=new N,t=new N,i=new N){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Sr.subVectors(e,t),r.cross(Sr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Sr.subVectors(r,t),gs.subVectors(i,t),E0.subVectors(e,t);const o=Sr.dot(Sr),a=Sr.dot(gs),c=Sr.dot(E0),f=gs.dot(gs),d=gs.dot(E0),h=o*f-a*a;if(h===0)return s.set(-2,-1,-1);const m=1/h,v=(f*c-a*d)*m,_=(o*d-a*c)*m;return s.set(1-v-_,_,v)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,vs),vs.x>=0&&vs.y>=0&&vs.x+vs.y<=1}static getUV(e,t,i,r,s,o,a,c){return ih===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ih=!0),this.getInterpolation(e,t,i,r,s,o,a,c)}static getInterpolation(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,vs),c.setScalar(0),c.addScaledVector(s,vs.x),c.addScaledVector(o,vs.y),c.addScaledVector(a,vs.z),c}static isFrontFacing(e,t,i,r){return Sr.subVectors(i,t),gs.subVectors(e,t),Sr.cross(gs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Sr.subVectors(this.c,this.b),gs.subVectors(this.a,this.b),Sr.cross(gs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Mi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Mi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return ih===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ih=!0),Mi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Mi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Mi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Mi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;tl.subVectors(r,i),nl.subVectors(s,i),T0.subVectors(e,i);const c=tl.dot(T0),f=nl.dot(T0);if(c<=0&&f<=0)return t.copy(i);A0.subVectors(e,r);const d=tl.dot(A0),h=nl.dot(A0);if(d>=0&&h<=d)return t.copy(r);const m=c*h-d*f;if(m<=0&&c>=0&&d<=0)return o=c/(c-d),t.copy(i).addScaledVector(tl,o);C0.subVectors(e,s);const v=tl.dot(C0),_=nl.dot(C0);if(_>=0&&v<=_)return t.copy(s);const w=v*f-c*_;if(w<=0&&f>=0&&_<=0)return a=f/(f-_),t.copy(i).addScaledVector(nl,a);const M=d*_-v*h;if(M<=0&&h-d>=0&&v-_>=0)return YM.subVectors(s,r),a=(h-d)/(h-d+(v-_)),t.copy(r).addScaledVector(YM,a);const g=1/(M+w+m);return o=w*g,a=m*g,t.copy(i).addScaledVector(tl,o).addScaledVector(nl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let vI=0;class Hn extends is{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vI++}),this.uuid=Bi(),this.name="",this.type="Material",this.blending=ma,this.side=Ds,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=X_,this.blendDst=j_,this.blendEquation=ra,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=kp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cp,this.stencilZFail=cp,this.stencilZPass=cp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ma&&(i.blending=this.blending),this.side!==Ds&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const sb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mr={h:0,s:0,l:0},rh={h:0,s:0,l:0};function b0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ve{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ht){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ir.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ir.workingColorSpace){return this.r=e,this.g=t,this.b=i,ir.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ir.workingColorSpace){if(e=Q_(e,1),t=on(t,0,1),i=on(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=b0(o,s,e+1/3),this.g=b0(o,s,e),this.b=b0(o,s,e-1/3)}return ir.toWorkingColorSpace(this,r),this}setStyle(e,t=ht){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ht){const i=sb[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wl(e.r),this.g=Wl(e.g),this.b=Wl(e.b),this}copyLinearToSRGB(e){return this.r=g0(e.r),this.g=g0(e.g),this.b=g0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ht){return ir.fromWorkingColorSpace(Zn.copy(this),e),Math.round(on(Zn.r*255,0,255))*65536+Math.round(on(Zn.g*255,0,255))*256+Math.round(on(Zn.b*255,0,255))}getHexString(e=ht){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ir.workingColorSpace){ir.fromWorkingColorSpace(Zn.copy(this),t);const i=Zn.r,r=Zn.g,s=Zn.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,f;const d=(a+o)/2;if(a===o)c=0,f=0;else{const h=o-a;switch(f=d<=.5?h/(o+a):h/(2-o-a),o){case i:c=(r-s)/h+(r<s?6:0);break;case r:c=(s-i)/h+2;break;case s:c=(i-r)/h+4;break}c/=6}return e.h=c,e.s=f,e.l=d,e}getRGB(e,t=ir.workingColorSpace){return ir.fromWorkingColorSpace(Zn.copy(this),t),e.r=Zn.r,e.g=Zn.g,e.b=Zn.b,e}getStyle(e=ht){ir.fromWorkingColorSpace(Zn.copy(this),e);const t=Zn.r,i=Zn.g,r=Zn.b;return e!==ht?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Mr),Mr.h+=e,Mr.s+=t,Mr.l+=i,this.setHSL(Mr.h,Mr.s,Mr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Mr),e.getHSL(rh);const i=Mc(Mr.h,rh.h,t),r=Mc(Mr.s,rh.s,t),s=Mc(Mr.l,rh.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Zn=new Ve;Ve.NAMES=sb;class ii extends Hn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ss=yI();function yI(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,d=0;for(;!(f&8388608);)f<<=1,d-=8388608;f&=-8388609,d+=947912704,s[c]=f|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function xi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=on(n,-65504,65504),Ss.floatView[0]=n;const e=Ss.uint32View[0],t=e>>23&511;return Ss.baseTable[t]+((e&8388607)>>Ss.shiftTable[t])}function uc(n){const e=n>>10;return Ss.uint32View[0]=Ss.mantissaTable[Ss.offsetTable[e]+(n&1023)]+Ss.exponentTable[e],Ss.floatView[0]}const _I={toHalfFloat:xi,fromHalfFloat:uc},vn=new N,sh=new Ee;class Ht{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Kc,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)sh.fromBufferAttribute(this,t),sh.applyMatrix3(e),this.setXY(t,sh.x,sh.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.applyMatrix3(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.applyMatrix4(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.applyNormalMatrix(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.transformDirection(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Kc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class xI extends Ht{constructor(e,t,i){super(new Int8Array(e),t,i)}}class SI extends Ht{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class MI extends Ht{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class wI extends Ht{constructor(e,t,i){super(new Int16Array(e),t,i)}}class nx extends Ht{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class EI extends Ht{constructor(e,t,i){super(new Int32Array(e),t,i)}}class ix extends Ht{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class TI extends Ht{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=uc(this.array[e*this.itemSize]);return this.normalized&&(t=ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize]=xi(t),this}getY(e){let t=uc(this.array[e*this.itemSize+1]);return this.normalized&&(t=ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+1]=xi(t),this}getZ(e){let t=uc(this.array[e*this.itemSize+2]);return this.normalized&&(t=ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+2]=xi(t),this}getW(e){let t=uc(this.array[e*this.itemSize+3]);return this.normalized&&(t=ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.array[e*this.itemSize+3]=xi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(i),this.array[e+2]=xi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.array[e+0]=xi(t),this.array[e+1]=xi(i),this.array[e+2]=xi(r),this.array[e+3]=xi(s),this}}class qe extends Ht{constructor(e,t,i){super(new Float32Array(e),t,i)}}class AI extends Ht{constructor(e,t,i){super(new Float64Array(e),t,i)}}let CI=0;const nr=new ut,P0=new Lt,il=new N,Ni=new Wi,Zu=new Wi,bn=new N;class vt extends is{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CI++}),this.uuid=Bi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rb(e)?ix:nx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new wt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return nr.makeRotationFromQuaternion(e),this.applyMatrix4(nr),this}rotateX(e){return nr.makeRotationX(e),this.applyMatrix4(nr),this}rotateY(e){return nr.makeRotationY(e),this.applyMatrix4(nr),this}rotateZ(e){return nr.makeRotationZ(e),this.applyMatrix4(nr),this}translate(e,t,i){return nr.makeTranslation(e,t,i),this.applyMatrix4(nr),this}scale(e,t,i){return nr.makeScale(e,t,i),this.applyMatrix4(nr),this}lookAt(e){return P0.lookAt(e),P0.updateMatrix(),this.applyMatrix4(P0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(il).negate(),this.translate(il.x,il.y,il.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new qe(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ni.setFromBufferAttribute(s),this.morphTargetsRelative?(bn.addVectors(this.boundingBox.min,Ni.min),this.boundingBox.expandByPoint(bn),bn.addVectors(this.boundingBox.max,Ni.max),this.boundingBox.expandByPoint(bn)):(this.boundingBox.expandByPoint(Ni.min),this.boundingBox.expandByPoint(Ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new N,1/0);return}if(e){const i=this.boundingSphere.center;if(Ni.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Zu.setFromBufferAttribute(a),this.morphTargetsRelative?(bn.addVectors(Ni.min,Zu.min),Ni.expandByPoint(bn),bn.addVectors(Ni.max,Zu.max),Ni.expandByPoint(bn)):(Ni.expandByPoint(Zu.min),Ni.expandByPoint(Zu.max))}Ni.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)bn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(bn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let f=0,d=a.count;f<d;f++)bn.fromBufferAttribute(a,f),c&&(il.fromBufferAttribute(e,f),bn.add(il)),r=Math.max(r,i.distanceToSquared(bn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ht(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,f=[],d=[];for(let L=0;L<a;L++)f[L]=new N,d[L]=new N;const h=new N,m=new N,v=new N,_=new Ee,w=new Ee,M=new Ee,g=new N,x=new N;function S(L,G,K){h.fromArray(r,L*3),m.fromArray(r,G*3),v.fromArray(r,K*3),_.fromArray(o,L*2),w.fromArray(o,G*2),M.fromArray(o,K*2),m.sub(h),v.sub(h),w.sub(_),M.sub(_);const q=1/(w.x*M.y-M.x*w.y);isFinite(q)&&(g.copy(m).multiplyScalar(M.y).addScaledVector(v,-w.y).multiplyScalar(q),x.copy(v).multiplyScalar(w.x).addScaledVector(m,-M.x).multiplyScalar(q),f[L].add(g),f[G].add(g),f[K].add(g),d[L].add(x),d[G].add(x),d[K].add(x))}let T=this.groups;T.length===0&&(T=[{start:0,count:i.length}]);for(let L=0,G=T.length;L<G;++L){const K=T[L],q=K.start,te=K.count;for(let Q=q,ue=q+te;Q<ue;Q+=3)S(i[Q+0],i[Q+1],i[Q+2])}const C=new N,P=new N,R=new N,I=new N;function b(L){R.fromArray(s,L*3),I.copy(R);const G=f[L];C.copy(G),C.sub(R.multiplyScalar(R.dot(G))).normalize(),P.crossVectors(I,G);const q=P.dot(d[L])<0?-1:1;c[L*4]=C.x,c[L*4+1]=C.y,c[L*4+2]=C.z,c[L*4+3]=q}for(let L=0,G=T.length;L<G;++L){const K=T[L],q=K.start,te=K.count;for(let Q=q,ue=q+te;Q<ue;Q+=3)b(i[Q+0]),b(i[Q+1]),b(i[Q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ht(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,v=i.count;m<v;m++)i.setXYZ(m,0,0,0);const r=new N,s=new N,o=new N,a=new N,c=new N,f=new N,d=new N,h=new N;if(e)for(let m=0,v=e.count;m<v;m+=3){const _=e.getX(m+0),w=e.getX(m+1),M=e.getX(m+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,M),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),a.fromBufferAttribute(i,_),c.fromBufferAttribute(i,w),f.fromBufferAttribute(i,M),a.add(d),c.add(d),f.add(d),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(w,c.x,c.y,c.z),i.setXYZ(M,f.x,f.y,f.z)}else for(let m=0,v=t.count;m<v;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),i.setXYZ(m+0,d.x,d.y,d.z),i.setXYZ(m+1,d.x,d.y,d.z),i.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)bn.fromBufferAttribute(e,t),bn.normalize(),e.setXYZ(t,bn.x,bn.y,bn.z)}toNonIndexed(){function e(a,c){const f=a.array,d=a.itemSize,h=a.normalized,m=new f.constructor(c.length*d);let v=0,_=0;for(let w=0,M=c.length;w<M;w++){a.isInterleavedBufferAttribute?v=c[w]*a.data.stride+a.offset:v=c[w]*d;for(let g=0;g<d;g++)m[_++]=f[v++]}return new Ht(m,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vt,i=this.index.array,r=this.attributes;for(const a in r){const c=r[a],f=e(c,i);t.setAttribute(a,f)}const s=this.morphAttributes;for(const a in s){const c=[],f=s[a];for(let d=0,h=f.length;d<h;d++){const m=f[d],v=e(m,i);c.push(v)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const f=o[a];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let h=0,m=f.length;h<m;h++){const v=f[h];d.push(v.toJSON(e.data))}d.length>0&&(r[c]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(t))}const s=e.morphAttributes;for(const f in s){const d=[],h=s[f];for(let m=0,v=h.length;m<v;m++)d.push(h[m].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,d=o.length;f<d;f++){const h=o[f];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qM=new ut,Xr=new yf,oh=new fr,$M=new N,rl=new N,sl=new N,ol=new N,R0=new N,ah=new N,lh=new Ee,uh=new Ee,ch=new Ee,ZM=new N,KM=new N,JM=new N,fh=new N,dh=new N;class Rn extends Lt{constructor(e=new vt,t=new ii){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){ah.set(0,0,0);for(let c=0,f=s.length;c<f;c++){const d=a[c],h=s[c];d!==0&&(R0.fromBufferAttribute(h,e),o?ah.addScaledVector(R0,d):ah.addScaledVector(R0.sub(t),d))}t.add(ah)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),oh.copy(i.boundingSphere),oh.applyMatrix4(s),Xr.copy(e.ray).recast(e.near),!(oh.containsPoint(Xr.origin)===!1&&(Xr.intersectSphere(oh,$M)===null||Xr.origin.distanceToSquared($M)>(e.far-e.near)**2))&&(qM.copy(s).invert(),Xr.copy(e.ray).applyMatrix4(qM),!(i.boundingBox!==null&&Xr.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let i;const r=this.geometry,s=this.material,o=r.index,a=r.attributes.position,c=r.attributes.uv,f=r.attributes.uv1,d=r.attributes.normal,h=r.groups,m=r.drawRange;if(o!==null)if(Array.isArray(s))for(let v=0,_=h.length;v<_;v++){const w=h[v],M=s[w.materialIndex],g=Math.max(w.start,m.start),x=Math.min(o.count,Math.min(w.start+w.count,m.start+m.count));for(let S=g,T=x;S<T;S+=3){const C=o.getX(S),P=o.getX(S+1),R=o.getX(S+2);i=hh(this,M,e,Xr,c,f,d,C,P,R),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(o.count,m.start+m.count);for(let w=v,M=_;w<M;w+=3){const g=o.getX(w),x=o.getX(w+1),S=o.getX(w+2);i=hh(this,s,e,Xr,c,f,d,g,x,S),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(a!==void 0)if(Array.isArray(s))for(let v=0,_=h.length;v<_;v++){const w=h[v],M=s[w.materialIndex],g=Math.max(w.start,m.start),x=Math.min(a.count,Math.min(w.start+w.count,m.start+m.count));for(let S=g,T=x;S<T;S+=3){const C=S,P=S+1,R=S+2;i=hh(this,M,e,Xr,c,f,d,C,P,R),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let w=v,M=_;w<M;w+=3){const g=w,x=w+1,S=w+2;i=hh(this,s,e,Xr,c,f,d,g,x,S),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function bI(n,e,t,i,r,s,o,a){let c;if(e.side===ei?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side===Ds,a),c===null)return null;dh.copy(a),dh.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(dh);return f<t.near||f>t.far?null:{distance:f,point:dh.clone(),object:n}}function hh(n,e,t,i,r,s,o,a,c,f){n.getVertexPosition(a,rl),n.getVertexPosition(c,sl),n.getVertexPosition(f,ol);const d=bI(n,e,t,i,rl,sl,ol,fh);if(d){r&&(lh.fromBufferAttribute(r,a),uh.fromBufferAttribute(r,c),ch.fromBufferAttribute(r,f),d.uv=Mi.getInterpolation(fh,rl,sl,ol,lh,uh,ch,new Ee)),s&&(lh.fromBufferAttribute(s,a),uh.fromBufferAttribute(s,c),ch.fromBufferAttribute(s,f),d.uv1=Mi.getInterpolation(fh,rl,sl,ol,lh,uh,ch,new Ee),d.uv2=d.uv1),o&&(ZM.fromBufferAttribute(o,a),KM.fromBufferAttribute(o,c),JM.fromBufferAttribute(o,f),d.normal=Mi.getInterpolation(fh,rl,sl,ol,ZM,KM,JM,new N),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:c,c:f,normal:new N,materialIndex:0};Mi.getNormal(rl,sl,ol,h.normal),d.face=h}return d}class Io extends vt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],f=[],d=[],h=[];let m=0,v=0;_("z","y","x",-1,-1,i,t,e,o,s,0),_("z","y","x",1,-1,i,t,-e,o,s,1),_("x","z","y",1,1,e,i,t,r,o,2),_("x","z","y",1,-1,e,i,-t,r,o,3),_("x","y","z",1,-1,e,t,i,r,s,4),_("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new qe(f,3)),this.setAttribute("normal",new qe(d,3)),this.setAttribute("uv",new qe(h,2));function _(w,M,g,x,S,T,C,P,R,I,b){const L=T/R,G=C/I,K=T/2,q=C/2,te=P/2,Q=R+1,ue=I+1;let ne=0,D=0;const H=new N;for(let z=0;z<ue;z++){const oe=z*G-q;for(let W=0;W<Q;W++){const X=W*L-K;H[w]=X*x,H[M]=oe*S,H[g]=te,f.push(H.x,H.y,H.z),H[w]=0,H[M]=0,H[g]=P>0?1:-1,d.push(H.x,H.y,H.z),h.push(W/R),h.push(1-z/I),ne+=1}}for(let z=0;z<I;z++)for(let oe=0;oe<R;oe++){const W=m+oe+Q*z,X=m+oe+Q*(z+1),j=m+(oe+1)+Q*(z+1),ce=m+(oe+1)+Q*z;c.push(W,X,ce),c.push(X,j,ce),D+=6}a.addGroup(v,D,b),v+=D,m+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Io(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function iu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function li(n){const e={};for(let t=0;t<n.length;t++){const i=iu(n[t]);for(const r in i)e[r]=i[r]}return e}function PI(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function ob(n){return n.getRenderTarget()===null?n.outputColorSpace:Ir}const mm={clone:iu,merge:li};var RI=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,LI=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Nr extends Hn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=RI,this.fragmentShader=LI,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=iu(e.uniforms),this.uniformsGroups=PI(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class _f extends Lt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ut,this.projectionMatrix=new ut,this.projectionMatrixInverse=new ut}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Gt extends _f{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=nu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(va*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return nu*2*Math.atan(Math.tan(va*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(va*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/f,r*=o.width/c,i*=o.height/f}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const al=-90,ll=1;class ab extends Lt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new Gt(al,ll,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Gt(al,ll,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Gt(al,ll,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Gt(al,ll,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const c=new Gt(al,ll,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,1),this.add(c);const f=new Gt(al,ll,e,t);f.layers=this.layers,f.up.set(0,1,0),f.lookAt(0,0,-1),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,f]=this.children,d=e.getRenderTarget(),h=e.toneMapping,m=e.xr.enabled;e.toneMapping=Rr,e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class xf extends an{constructor(e,t,i,r,s,o,a,c,f,d){e=e!==void 0?e:[],t=t!==void 0?t:Eo,super(e,t,i,r,s,o,a,c,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lb extends Dr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(wc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===_o?ht:xo),this.texture=new xf(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:dn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Io(5,5,5),s=new Nr({name:"CubemapFromEquirect",uniforms:iu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ei,blending:bs});s.uniforms.tEquirect.value=t;const o=new Rn(r,s),a=t.minFilter;return t.minFilter===Ao&&(t.minFilter=dn),new ab(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const L0=new N,II=new N,DI=new wt;class to{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=L0.subVectors(i,t).cross(II.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(L0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||DI.getNormalMatrix(e),r=this.coplanarPoint(L0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Yo=new fr,ph=new N;class gm{constructor(e=new to,t=new to,i=new to,r=new to,s=new to,o=new to){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],f=i[5],d=i[6],h=i[7],m=i[8],v=i[9],_=i[10],w=i[11],M=i[12],g=i[13],x=i[14],S=i[15];return t[0].setComponents(a-r,h-c,w-m,S-M).normalize(),t[1].setComponents(a+r,h+c,w+m,S+M).normalize(),t[2].setComponents(a+s,h+f,w+v,S+g).normalize(),t[3].setComponents(a-s,h-f,w-v,S-g).normalize(),t[4].setComponents(a-o,h-d,w-_,S-x).normalize(),t[5].setComponents(a+o,h+d,w+_,S+x).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Yo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yo)}intersectsSprite(e){return Yo.center.set(0,0,0),Yo.radius=.7071067811865476,Yo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yo)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ph.x=r.normal.x>0?e.max.x:e.min.x,ph.y=r.normal.y>0?e.max.y:e.min.y,ph.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ph)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ub(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function NI(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,d){const h=f.array,m=f.usage,v=n.createBuffer();n.bindBuffer(d,v),n.bufferData(d,h,m),f.onUploadCallback();let _;if(h instanceof Float32Array)_=n.FLOAT;else if(h instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)_=n.SHORT;else if(h instanceof Uint32Array)_=n.UNSIGNED_INT;else if(h instanceof Int32Array)_=n.INT;else if(h instanceof Int8Array)_=n.BYTE;else if(h instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:_,bytesPerElement:h.BYTES_PER_ELEMENT,version:f.version}}function s(f,d,h){const m=d.array,v=d.updateRange;n.bindBuffer(h,f),v.count===-1?n.bufferSubData(h,0,m):(t?n.bufferSubData(h,v.offset*m.BYTES_PER_ELEMENT,m,v.offset,v.count):n.bufferSubData(h,v.offset*m.BYTES_PER_ELEMENT,m.subarray(v.offset,v.offset+v.count)),v.count=-1),d.onUploadCallback()}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function a(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=i.get(f);d&&(n.deleteBuffer(d.buffer),i.delete(f))}function c(f,d){if(f.isGLBufferAttribute){const m=i.get(f);(!m||m.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const h=i.get(f);h===void 0?i.set(f,r(f,d)):h.version<f.version&&(s(h.buffer,f,d),h.version=f.version)}return{get:o,remove:a,update:c}}class hu extends vt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),f=a+1,d=c+1,h=e/a,m=t/c,v=[],_=[],w=[],M=[];for(let g=0;g<d;g++){const x=g*m-o;for(let S=0;S<f;S++){const T=S*h-s;_.push(T,-x,0),w.push(0,0,1),M.push(S/a),M.push(1-g/c)}}for(let g=0;g<c;g++)for(let x=0;x<a;x++){const S=x+f*g,T=x+f*(g+1),C=x+1+f*(g+1),P=x+1+f*g;v.push(S,T,P),v.push(T,C,P)}this.setIndex(v),this.setAttribute("position",new qe(_,3)),this.setAttribute("normal",new qe(w,3)),this.setAttribute("uv",new qe(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hu(e.width,e.height,e.widthSegments,e.heightSegments)}}var UI=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kI=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,FI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,zI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,BI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,HI="vec3 transformed = vec3( position );",VI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,GI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,WI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,XI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,jI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,YI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$I=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ZI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,KI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,JI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,QI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,eD=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,tD=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nD=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,iD=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rD=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,sD=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oD=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,aD="gl_FragColor = linearToOutputTexel( gl_FragColor );",lD=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,uD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,cD=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fD=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dD=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hD=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pD=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mD=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,gD=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vD=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yD=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_D=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,xD=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,SD=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,MD=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,wD=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ED=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,TD=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,AD=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,CD=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bD=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,PD=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,RD=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,LD=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ID=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,DD=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ND=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,UD=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,OD=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,kD=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,FD=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,zD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,BD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,HD=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,GD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,WD=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,XD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,jD=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,YD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,qD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,$D=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ZD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,KD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,JD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,QD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,eN=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,tN=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,nN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,sN=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,oN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,aN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,lN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,uN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,cN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dN=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,hN=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pN=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,mN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,gN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,yN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_N=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,xN=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SN=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,MN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,wN=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,EN=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,TN=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,AN=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CN=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bN=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,PN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const RN=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,LN=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,IN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DN=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,NN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UN=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ON=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kN=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,FN=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zN=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BN=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,HN=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,VN=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GN=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WN=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,XN=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jN=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YN=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qN=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$N=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZN=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,KN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,JN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,tU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nU=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,sU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oU=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aU=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,lU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,mt={alphamap_fragment:UI,alphamap_pars_fragment:OI,alphatest_fragment:kI,alphatest_pars_fragment:FI,aomap_fragment:zI,aomap_pars_fragment:BI,begin_vertex:HI,beginnormal_vertex:VI,bsdfs:GI,iridescence_fragment:WI,bumpmap_pars_fragment:XI,clipping_planes_fragment:jI,clipping_planes_pars_fragment:YI,clipping_planes_pars_vertex:qI,clipping_planes_vertex:$I,color_fragment:ZI,color_pars_fragment:KI,color_pars_vertex:JI,color_vertex:QI,common:eD,cube_uv_reflection_fragment:tD,defaultnormal_vertex:nD,displacementmap_pars_vertex:iD,displacementmap_vertex:rD,emissivemap_fragment:sD,emissivemap_pars_fragment:oD,encodings_fragment:aD,encodings_pars_fragment:lD,envmap_fragment:uD,envmap_common_pars_fragment:cD,envmap_pars_fragment:fD,envmap_pars_vertex:dD,envmap_physical_pars_fragment:ED,envmap_vertex:hD,fog_vertex:pD,fog_pars_vertex:mD,fog_fragment:gD,fog_pars_fragment:vD,gradientmap_pars_fragment:yD,lightmap_fragment:_D,lightmap_pars_fragment:xD,lights_lambert_fragment:SD,lights_lambert_pars_fragment:MD,lights_pars_begin:wD,lights_toon_fragment:TD,lights_toon_pars_fragment:AD,lights_phong_fragment:CD,lights_phong_pars_fragment:bD,lights_physical_fragment:PD,lights_physical_pars_fragment:RD,lights_fragment_begin:LD,lights_fragment_maps:ID,lights_fragment_end:DD,logdepthbuf_fragment:ND,logdepthbuf_pars_fragment:UD,logdepthbuf_pars_vertex:OD,logdepthbuf_vertex:kD,map_fragment:FD,map_pars_fragment:zD,map_particle_fragment:BD,map_particle_pars_fragment:HD,metalnessmap_fragment:VD,metalnessmap_pars_fragment:GD,morphcolor_vertex:WD,morphnormal_vertex:XD,morphtarget_pars_vertex:jD,morphtarget_vertex:YD,normal_fragment_begin:qD,normal_fragment_maps:$D,normal_pars_fragment:ZD,normal_pars_vertex:KD,normal_vertex:JD,normalmap_pars_fragment:QD,clearcoat_normal_fragment_begin:eN,clearcoat_normal_fragment_maps:tN,clearcoat_pars_fragment:nN,iridescence_pars_fragment:iN,output_fragment:rN,packing:sN,premultiplied_alpha_fragment:oN,project_vertex:aN,dithering_fragment:lN,dithering_pars_fragment:uN,roughnessmap_fragment:cN,roughnessmap_pars_fragment:fN,shadowmap_pars_fragment:dN,shadowmap_pars_vertex:hN,shadowmap_vertex:pN,shadowmask_pars_fragment:mN,skinbase_vertex:gN,skinning_pars_vertex:vN,skinning_vertex:yN,skinnormal_vertex:_N,specularmap_fragment:xN,specularmap_pars_fragment:SN,tonemapping_fragment:MN,tonemapping_pars_fragment:wN,transmission_fragment:EN,transmission_pars_fragment:TN,uv_pars_fragment:AN,uv_pars_vertex:CN,uv_vertex:bN,worldpos_vertex:PN,background_vert:RN,background_frag:LN,backgroundCube_vert:IN,backgroundCube_frag:DN,cube_vert:NN,cube_frag:UN,depth_vert:ON,depth_frag:kN,distanceRGBA_vert:FN,distanceRGBA_frag:zN,equirect_vert:BN,equirect_frag:HN,linedashed_vert:VN,linedashed_frag:GN,meshbasic_vert:WN,meshbasic_frag:XN,meshlambert_vert:jN,meshlambert_frag:YN,meshmatcap_vert:qN,meshmatcap_frag:$N,meshnormal_vert:ZN,meshnormal_frag:KN,meshphong_vert:JN,meshphong_frag:QN,meshphysical_vert:eU,meshphysical_frag:tU,meshtoon_vert:nU,meshtoon_frag:iU,points_vert:rU,points_frag:sU,shadow_vert:oU,shadow_frag:aU,sprite_vert:lU,sprite_frag:uU},Ue={common:{diffuse:{value:new Ve(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaMapTransform:{value:new wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wt},normalScale:{value:new Ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new wt}},sprite:{diffuse:{value:new Ve(16777215)},opacity:{value:1},center:{value:new Ee(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wt},alphaMap:{value:null},alphaTest:{value:0}}},ci={basic:{uniforms:li([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:mt.meshbasic_vert,fragmentShader:mt.meshbasic_frag},lambert:{uniforms:li([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Ve(0)}}]),vertexShader:mt.meshlambert_vert,fragmentShader:mt.meshlambert_frag},phong:{uniforms:li([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new Ve(0)},specular:{value:new Ve(1118481)},shininess:{value:30}}]),vertexShader:mt.meshphong_vert,fragmentShader:mt.meshphong_frag},standard:{uniforms:li([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new Ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag},toon:{uniforms:li([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new Ve(0)}}]),vertexShader:mt.meshtoon_vert,fragmentShader:mt.meshtoon_frag},matcap:{uniforms:li([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:mt.meshmatcap_vert,fragmentShader:mt.meshmatcap_frag},points:{uniforms:li([Ue.points,Ue.fog]),vertexShader:mt.points_vert,fragmentShader:mt.points_frag},dashed:{uniforms:li([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mt.linedashed_vert,fragmentShader:mt.linedashed_frag},depth:{uniforms:li([Ue.common,Ue.displacementmap]),vertexShader:mt.depth_vert,fragmentShader:mt.depth_frag},normal:{uniforms:li([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:mt.meshnormal_vert,fragmentShader:mt.meshnormal_frag},sprite:{uniforms:li([Ue.sprite,Ue.fog]),vertexShader:mt.sprite_vert,fragmentShader:mt.sprite_frag},background:{uniforms:{uvTransform:{value:new wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mt.background_vert,fragmentShader:mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:mt.backgroundCube_vert,fragmentShader:mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mt.cube_vert,fragmentShader:mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mt.equirect_vert,fragmentShader:mt.equirect_frag},distanceRGBA:{uniforms:li([Ue.common,Ue.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mt.distanceRGBA_vert,fragmentShader:mt.distanceRGBA_frag},shadow:{uniforms:li([Ue.lights,Ue.fog,{color:{value:new Ve(0)},opacity:{value:1}}]),vertexShader:mt.shadow_vert,fragmentShader:mt.shadow_frag}};ci.physical={uniforms:li([ci.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wt},clearcoatNormalScale:{value:new Ee(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wt},sheen:{value:0},sheenColor:{value:new Ve(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wt},transmissionSamplerSize:{value:new Ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wt},attenuationDistance:{value:0},attenuationColor:{value:new Ve(0)},specularColor:{value:new Ve(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wt}}]),vertexShader:mt.meshphysical_vert,fragmentShader:mt.meshphysical_frag};const mh={r:0,b:0,g:0};function cU(n,e,t,i,r,s,o){const a=new Ve(0);let c=s===!0?0:1,f,d,h=null,m=0,v=null;function _(M,g){let x=!1,S=g.isScene===!0?g.background:null;switch(S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?w(a,c):S&&S.isColor&&(w(S,1),x=!0),n.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,o),x=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,o),x=!0;break}(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===fu)?(d===void 0&&(d=new Rn(new Io(1,1,1),new Nr({name:"BackgroundCubeMaterial",uniforms:iu(ci.backgroundCube.uniforms),vertexShader:ci.backgroundCube.vertexShader,fragmentShader:ci.backgroundCube.fragmentShader,side:ei,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,R,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=S,d.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=S.colorSpace!==ht,(h!==S||m!==S.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,h=S,m=S.version,v=n.toneMapping),d.layers.enableAll(),M.unshift(d,d.geometry,d.material,0,0,null)):S&&S.isTexture&&(f===void 0&&(f=new Rn(new hu(2,2),new Nr({name:"BackgroundMaterial",uniforms:iu(ci.background.uniforms),vertexShader:ci.background.vertexShader,fragmentShader:ci.background.fragmentShader,side:Ds,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=S,f.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,f.material.toneMapped=S.colorSpace!==ht,S.matrixAutoUpdate===!0&&S.updateMatrix(),f.material.uniforms.uvTransform.value.copy(S.matrix),(h!==S||m!==S.version||v!==n.toneMapping)&&(f.material.needsUpdate=!0,h=S,m=S.version,v=n.toneMapping),f.layers.enableAll(),M.unshift(f,f.geometry,f.material,0,0,null))}function w(M,g){M.getRGB(mh,ob(n)),i.buffers.color.setClear(mh.r,mh.g,mh.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(M,g=1){a.set(M),c=g,w(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(M){c=M,w(a,c)},render:_}}function fU(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},c=M(null);let f=c,d=!1;function h(te,Q,ue,ne,D){let H=!1;if(o){const z=w(ne,ue,Q);f!==z&&(f=z,v(f.object)),H=g(te,ne,ue,D),H&&x(te,ne,ue,D)}else{const z=Q.wireframe===!0;(f.geometry!==ne.id||f.program!==ue.id||f.wireframe!==z)&&(f.geometry=ne.id,f.program=ue.id,f.wireframe=z,H=!0)}D!==null&&t.update(D,n.ELEMENT_ARRAY_BUFFER),(H||d)&&(d=!1,I(te,Q,ue,ne),D!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(D).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function v(te){return i.isWebGL2?n.bindVertexArray(te):s.bindVertexArrayOES(te)}function _(te){return i.isWebGL2?n.deleteVertexArray(te):s.deleteVertexArrayOES(te)}function w(te,Q,ue){const ne=ue.wireframe===!0;let D=a[te.id];D===void 0&&(D={},a[te.id]=D);let H=D[Q.id];H===void 0&&(H={},D[Q.id]=H);let z=H[ne];return z===void 0&&(z=M(m()),H[ne]=z),z}function M(te){const Q=[],ue=[],ne=[];for(let D=0;D<r;D++)Q[D]=0,ue[D]=0,ne[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:ue,attributeDivisors:ne,object:te,attributes:{},index:null}}function g(te,Q,ue,ne){const D=f.attributes,H=Q.attributes;let z=0;const oe=ue.getAttributes();for(const W in oe)if(oe[W].location>=0){const j=D[W];let ce=H[W];if(ce===void 0&&(W==="instanceMatrix"&&te.instanceMatrix&&(ce=te.instanceMatrix),W==="instanceColor"&&te.instanceColor&&(ce=te.instanceColor)),j===void 0||j.attribute!==ce||ce&&j.data!==ce.data)return!0;z++}return f.attributesNum!==z||f.index!==ne}function x(te,Q,ue,ne){const D={},H=Q.attributes;let z=0;const oe=ue.getAttributes();for(const W in oe)if(oe[W].location>=0){let j=H[W];j===void 0&&(W==="instanceMatrix"&&te.instanceMatrix&&(j=te.instanceMatrix),W==="instanceColor"&&te.instanceColor&&(j=te.instanceColor));const ce={};ce.attribute=j,j&&j.data&&(ce.data=j.data),D[W]=ce,z++}f.attributes=D,f.attributesNum=z,f.index=ne}function S(){const te=f.newAttributes;for(let Q=0,ue=te.length;Q<ue;Q++)te[Q]=0}function T(te){C(te,0)}function C(te,Q){const ue=f.newAttributes,ne=f.enabledAttributes,D=f.attributeDivisors;ue[te]=1,ne[te]===0&&(n.enableVertexAttribArray(te),ne[te]=1),D[te]!==Q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](te,Q),D[te]=Q)}function P(){const te=f.newAttributes,Q=f.enabledAttributes;for(let ue=0,ne=Q.length;ue<ne;ue++)Q[ue]!==te[ue]&&(n.disableVertexAttribArray(ue),Q[ue]=0)}function R(te,Q,ue,ne,D,H){i.isWebGL2===!0&&(ue===n.INT||ue===n.UNSIGNED_INT)?n.vertexAttribIPointer(te,Q,ue,D,H):n.vertexAttribPointer(te,Q,ue,ne,D,H)}function I(te,Q,ue,ne){if(i.isWebGL2===!1&&(te.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const D=ne.attributes,H=ue.getAttributes(),z=Q.defaultAttributeValues;for(const oe in H){const W=H[oe];if(W.location>=0){let X=D[oe];if(X===void 0&&(oe==="instanceMatrix"&&te.instanceMatrix&&(X=te.instanceMatrix),oe==="instanceColor"&&te.instanceColor&&(X=te.instanceColor)),X!==void 0){const j=X.normalized,ce=X.itemSize,V=t.get(X);if(V===void 0)continue;const B=V.buffer,de=V.type,Oe=V.bytesPerElement;if(X.isInterleavedBufferAttribute){const fe=X.data,ye=fe.stride,se=X.offset;if(fe.isInstancedInterleavedBuffer){for(let ie=0;ie<W.locationSize;ie++)C(W.location+ie,fe.meshPerAttribute);te.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let ie=0;ie<W.locationSize;ie++)T(W.location+ie);n.bindBuffer(n.ARRAY_BUFFER,B);for(let ie=0;ie<W.locationSize;ie++)R(W.location+ie,ce/W.locationSize,de,j,ye*Oe,(se+ce/W.locationSize*ie)*Oe)}else{if(X.isInstancedBufferAttribute){for(let fe=0;fe<W.locationSize;fe++)C(W.location+fe,X.meshPerAttribute);te.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let fe=0;fe<W.locationSize;fe++)T(W.location+fe);n.bindBuffer(n.ARRAY_BUFFER,B);for(let fe=0;fe<W.locationSize;fe++)R(W.location+fe,ce/W.locationSize,de,j,ce*Oe,ce/W.locationSize*fe*Oe)}}else if(z!==void 0){const j=z[oe];if(j!==void 0)switch(j.length){case 2:n.vertexAttrib2fv(W.location,j);break;case 3:n.vertexAttrib3fv(W.location,j);break;case 4:n.vertexAttrib4fv(W.location,j);break;default:n.vertexAttrib1fv(W.location,j)}}}}P()}function b(){K();for(const te in a){const Q=a[te];for(const ue in Q){const ne=Q[ue];for(const D in ne)_(ne[D].object),delete ne[D];delete Q[ue]}delete a[te]}}function L(te){if(a[te.id]===void 0)return;const Q=a[te.id];for(const ue in Q){const ne=Q[ue];for(const D in ne)_(ne[D].object),delete ne[D];delete Q[ue]}delete a[te.id]}function G(te){for(const Q in a){const ue=a[Q];if(ue[te.id]===void 0)continue;const ne=ue[te.id];for(const D in ne)_(ne[D].object),delete ne[D];delete ue[te.id]}}function K(){q(),d=!0,f!==c&&(f=c,v(f.object))}function q(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:h,reset:K,resetDefaultState:q,dispose:b,releaseStatesOfGeometry:L,releaseStatesOfProgram:G,initAttributes:S,enableAttribute:T,disableUnusedAttributes:P}}function dU(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}function a(f,d){n.drawArrays(s,f,d),t.update(d,s,1)}function c(f,d,h){if(h===0)return;let m,v;if(r)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,f,d,h),t.update(d,s,h)}this.setMode=o,this.render=a,this.renderInstances=c}function hU(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const f=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=m>0,T=o||e.has("OES_texture_float"),C=S&&T,P=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:_,maxAttributes:w,maxVertexUniforms:M,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:T,floatVertexTextures:C,maxSamples:P}}function pU(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new to,a=new wt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){const v=h.length!==0||m||i!==0||r;return r=m,i=h.length,v},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,m){t=d(h,m,0)},this.setState=function(h,m,v){const _=h.clippingPlanes,w=h.clipIntersection,M=h.clipShadows,g=n.get(h);if(!r||_===null||_.length===0||s&&!M)s?d(null):f();else{const x=s?0:i,S=x*4;let T=g.clippingState||null;c.value=T,T=d(_,m,S,v);for(let C=0;C!==S;++C)T[C]=t[C];g.clippingState=T,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=x}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(h,m,v,_){const w=h!==null?h.length:0;let M=null;if(w!==0){if(M=c.value,_!==!0||M===null){const g=v+w*4,x=m.matrixWorldInverse;a.getNormalMatrix(x),(M===null||M.length<g)&&(M=new Float32Array(g));for(let S=0,T=v;S!==w;++S,T+=4)o.copy(h[S]).applyMatrix4(x,a),o.normal.toArray(M,T),M[T+3]=o.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,M}}function mU(n){let e=new WeakMap;function t(o,a){return a===Wc?o.mapping=Eo:a===Xc&&(o.mapping=To),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Wc||a===Xc)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const f=new lb(c.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class es extends _f{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Dl=4,QM=[.125,.215,.35,.446,.526,.582],sa=20,I0=new es,ew=new Ve;let D0=null;const ia=(1+Math.sqrt(5))/2,ul=1/ia,tw=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,ia,ul),new N(0,ia,-ul),new N(ul,0,ia),new N(-ul,0,ia),new N(ia,ul,0),new N(-ia,ul,0)];class Ly{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){D0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=rw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=iw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(D0),e.scissorTest=!1,gh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Eo||e.mapping===To?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),D0=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:dn,minFilter:dn,generateMipmaps:!1,type:tu,format:wi,colorSpace:Ir,depthBuffer:!1},r=nw(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=nw(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=gU(s)),this._blurMaterial=vU(s,e,t)}return r}_compileMaterial(e){const t=new Rn(this._lodPlanes[0],e);this._renderer.compile(t,I0)}_sceneToCubeUV(e,t,i,r){const a=new Gt(90,1,t,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,m=d.toneMapping;d.getClearColor(ew),d.toneMapping=Rr,d.autoClear=!1;const v=new ii({name:"PMREM.Background",side:ei,depthWrite:!1,depthTest:!1}),_=new Rn(new Io,v);let w=!1;const M=e.background;M?M.isColor&&(v.color.copy(M),e.background=null,w=!0):(v.color.copy(ew),w=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,c[g],0),a.lookAt(f[g],0,0)):x===1?(a.up.set(0,0,c[g]),a.lookAt(0,f[g],0)):(a.up.set(0,c[g],0),a.lookAt(0,0,f[g]));const S=this._cubeSize;gh(r,x*S,g>2?S:0,S,S),d.setRenderTarget(r),w&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=m,d.autoClear=h,e.background=M}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Eo||e.mapping===To;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=rw()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=iw());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Rn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;gh(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,I0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=tw[(r-1)%tw.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Rn(this._lodPlanes[r],f),m=f.uniforms,v=this._sizeLods[i]-1,_=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*sa-1),w=s/_,M=isFinite(s)?1+Math.floor(d*w):sa;M>sa&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${sa}`);const g=[];let x=0;for(let R=0;R<sa;++R){const I=R/w,b=Math.exp(-I*I/2);g.push(b),R===0?x+=b:R<M&&(x+=2*b)}for(let R=0;R<g.length;R++)g[R]=g[R]/x;m.envMap.value=e.texture,m.samples.value=M,m.weights.value=g,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:S}=this;m.dTheta.value=_,m.mipInt.value=S-i;const T=this._sizeLods[r],C=3*T*(r>S-Dl?r-S+Dl:0),P=4*(this._cubeSize-T);gh(t,C,P,3*T,2*T),c.setRenderTarget(t),c.render(h,I0)}}function gU(n){const e=[],t=[],i=[];let r=n;const s=n-Dl+1+QM.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-Dl?c=QM[o-n+Dl-1]:o===0&&(c=0),i.push(c);const f=1/(a-2),d=-f,h=1+f,m=[d,d,h,d,h,h,d,d,h,h,d,h],v=6,_=6,w=3,M=2,g=1,x=new Float32Array(w*_*v),S=new Float32Array(M*_*v),T=new Float32Array(g*_*v);for(let P=0;P<v;P++){const R=P%3*2/3-1,I=P>2?0:-1,b=[R,I,0,R+2/3,I,0,R+2/3,I+1,0,R,I,0,R+2/3,I+1,0,R,I+1,0];x.set(b,w*_*P),S.set(m,M*_*P);const L=[P,P,P,P,P,P];T.set(L,g*_*P)}const C=new vt;C.setAttribute("position",new Ht(x,w)),C.setAttribute("uv",new Ht(S,M)),C.setAttribute("faceIndex",new Ht(T,g)),e.push(C),r>Dl&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function nw(n,e,t){const i=new Dr(n,e,t);return i.texture.mapping=fu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function gh(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function vU(n,e,t){const i=new Float32Array(sa),r=new N(0,1,0);return new Nr({name:"SphericalGaussianBlur",defines:{n:sa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:rx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bs,depthTest:!1,depthWrite:!1})}function iw(){return new Nr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bs,depthTest:!1,depthWrite:!1})}function rw(){return new Nr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bs,depthTest:!1,depthWrite:!1})}function rx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function yU(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const c=a.mapping,f=c===Wc||c===Xc,d=c===Eo||c===To;if(f||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new Ly(n)),h=f?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(f&&h&&h.height>0||d&&h&&r(h)){t===null&&(t=new Ly(n));const m=f?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,m),a.addEventListener("dispose",s),m.texture}else return null}}}return a}function r(a){let c=0;const f=6;for(let d=0;d<f;d++)a[d]!==void 0&&c++;return c===f}function s(a){const c=a.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function _U(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function xU(n,e,t,i){const r={},s=new WeakMap;function o(h){const m=h.target;m.index!==null&&e.remove(m.index);for(const _ in m.attributes)e.remove(m.attributes[_]);m.removeEventListener("dispose",o),delete r[m.id];const v=s.get(m);v&&(e.remove(v),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(h,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function c(h){const m=h.attributes;for(const _ in m)e.update(m[_],n.ARRAY_BUFFER);const v=h.morphAttributes;for(const _ in v){const w=v[_];for(let M=0,g=w.length;M<g;M++)e.update(w[M],n.ARRAY_BUFFER)}}function f(h){const m=[],v=h.index,_=h.attributes.position;let w=0;if(v!==null){const x=v.array;w=v.version;for(let S=0,T=x.length;S<T;S+=3){const C=x[S+0],P=x[S+1],R=x[S+2];m.push(C,P,P,R,R,C)}}else{const x=_.array;w=_.version;for(let S=0,T=x.length/3-1;S<T;S+=3){const C=S+0,P=S+1,R=S+2;m.push(C,P,P,R,R,C)}}const M=new(rb(m)?ix:nx)(m,1);M.version=w;const g=s.get(h);g&&e.remove(g),s.set(h,M)}function d(h){const m=s.get(h);if(m){const v=h.index;v!==null&&m.version<v.version&&f(h)}else f(h);return s.get(h)}return{get:a,update:c,getWireframeAttribute:d}}function SU(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,c;function f(m){a=m.type,c=m.bytesPerElement}function d(m,v){n.drawElements(s,v,a,m*c),t.update(v,s,1)}function h(m,v,_){if(_===0)return;let w,M;if(r)w=n,M="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[M](s,v,a,m*c,_),t.update(v,s,_)}this.setMode=o,this.setIndex=f,this.render=d,this.renderInstances=h}function MU(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function wU(n,e){return n[0]-e[0]}function EU(n,e){return Math.abs(e[1])-Math.abs(n[1])}function TU(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new At,a=[];for(let f=0;f<8;f++)a[f]=[f,0];function c(f,d,h){const m=f.morphTargetInfluences;if(e.isWebGL2===!0){const _=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,w=_!==void 0?_.length:0;let M=s.get(d);if(M===void 0||M.count!==w){let Q=function(){q.dispose(),s.delete(d),d.removeEventListener("dispose",Q)};var v=Q;M!==void 0&&M.texture.dispose();const S=d.morphAttributes.position!==void 0,T=d.morphAttributes.normal!==void 0,C=d.morphAttributes.color!==void 0,P=d.morphAttributes.position||[],R=d.morphAttributes.normal||[],I=d.morphAttributes.color||[];let b=0;S===!0&&(b=1),T===!0&&(b=2),C===!0&&(b=3);let L=d.attributes.position.count*b,G=1;L>e.maxTextureSize&&(G=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const K=new Float32Array(L*G*4*w),q=new pm(K,L,G,w);q.type=Es,q.needsUpdate=!0;const te=b*4;for(let ue=0;ue<w;ue++){const ne=P[ue],D=R[ue],H=I[ue],z=L*G*4*ue;for(let oe=0;oe<ne.count;oe++){const W=oe*te;S===!0&&(o.fromBufferAttribute(ne,oe),K[z+W+0]=o.x,K[z+W+1]=o.y,K[z+W+2]=o.z,K[z+W+3]=0),T===!0&&(o.fromBufferAttribute(D,oe),K[z+W+4]=o.x,K[z+W+5]=o.y,K[z+W+6]=o.z,K[z+W+7]=0),C===!0&&(o.fromBufferAttribute(H,oe),K[z+W+8]=o.x,K[z+W+9]=o.y,K[z+W+10]=o.z,K[z+W+11]=H.itemSize===4?o.w:1)}}M={count:w,texture:q,size:new Ee(L,G)},s.set(d,M),d.addEventListener("dispose",Q)}let g=0;for(let S=0;S<m.length;S++)g+=m[S];const x=d.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",m),h.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const _=m===void 0?0:m.length;let w=i[d.id];if(w===void 0||w.length!==_){w=[];for(let T=0;T<_;T++)w[T]=[T,0];i[d.id]=w}for(let T=0;T<_;T++){const C=w[T];C[0]=T,C[1]=m[T]}w.sort(EU);for(let T=0;T<8;T++)T<_&&w[T][1]?(a[T][0]=w[T][0],a[T][1]=w[T][1]):(a[T][0]=Number.MAX_SAFE_INTEGER,a[T][1]=0);a.sort(wU);const M=d.morphAttributes.position,g=d.morphAttributes.normal;let x=0;for(let T=0;T<8;T++){const C=a[T],P=C[0],R=C[1];P!==Number.MAX_SAFE_INTEGER&&R?(M&&d.getAttribute("morphTarget"+T)!==M[P]&&d.setAttribute("morphTarget"+T,M[P]),g&&d.getAttribute("morphNormal"+T)!==g[P]&&d.setAttribute("morphNormal"+T,g[P]),r[T]=R,x+=R):(M&&d.hasAttribute("morphTarget"+T)===!0&&d.deleteAttribute("morphTarget"+T),g&&d.hasAttribute("morphNormal"+T)===!0&&d.deleteAttribute("morphNormal"+T),r[T]=0)}const S=d.morphTargetsRelative?1:1-x;h.getUniforms().setValue(n,"morphTargetBaseInfluence",S),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:c}}function AU(n,e,t,i){let r=new WeakMap;function s(c){const f=i.render.frame,d=c.geometry,h=e.get(c,d);return r.get(h)!==f&&(e.update(h),r.set(h,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER)),h}function o(){r=new WeakMap}function a(c){const f=c.target;f.removeEventListener("dispose",a),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const cb=new an,fb=new pm,db=new tx,hb=new xf,sw=[],ow=[],aw=new Float32Array(16),lw=new Float32Array(9),uw=new Float32Array(4);function pu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=sw[r];if(s===void 0&&(s=new Float32Array(r),sw[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Mn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function wn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function vm(n,e){let t=ow[e];t===void 0&&(t=new Int32Array(e),ow[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function CU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function bU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mn(t,e))return;n.uniform2fv(this.addr,e),wn(t,e)}}function PU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Mn(t,e))return;n.uniform3fv(this.addr,e),wn(t,e)}}function RU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mn(t,e))return;n.uniform4fv(this.addr,e),wn(t,e)}}function LU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Mn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wn(t,e)}else{if(Mn(t,i))return;uw.set(i),n.uniformMatrix2fv(this.addr,!1,uw),wn(t,i)}}function IU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Mn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wn(t,e)}else{if(Mn(t,i))return;lw.set(i),n.uniformMatrix3fv(this.addr,!1,lw),wn(t,i)}}function DU(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Mn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wn(t,e)}else{if(Mn(t,i))return;aw.set(i),n.uniformMatrix4fv(this.addr,!1,aw),wn(t,i)}}function NU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function UU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mn(t,e))return;n.uniform2iv(this.addr,e),wn(t,e)}}function OU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mn(t,e))return;n.uniform3iv(this.addr,e),wn(t,e)}}function kU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mn(t,e))return;n.uniform4iv(this.addr,e),wn(t,e)}}function FU(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function zU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mn(t,e))return;n.uniform2uiv(this.addr,e),wn(t,e)}}function BU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mn(t,e))return;n.uniform3uiv(this.addr,e),wn(t,e)}}function HU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mn(t,e))return;n.uniform4uiv(this.addr,e),wn(t,e)}}function VU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||cb,r)}function GU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||db,r)}function WU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||hb,r)}function XU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||fb,r)}function jU(n){switch(n){case 5126:return CU;case 35664:return bU;case 35665:return PU;case 35666:return RU;case 35674:return LU;case 35675:return IU;case 35676:return DU;case 5124:case 35670:return NU;case 35667:case 35671:return UU;case 35668:case 35672:return OU;case 35669:case 35673:return kU;case 5125:return FU;case 36294:return zU;case 36295:return BU;case 36296:return HU;case 35678:case 36198:case 36298:case 36306:case 35682:return VU;case 35679:case 36299:case 36307:return GU;case 35680:case 36300:case 36308:case 36293:return WU;case 36289:case 36303:case 36311:case 36292:return XU}}function YU(n,e){n.uniform1fv(this.addr,e)}function qU(n,e){const t=pu(e,this.size,2);n.uniform2fv(this.addr,t)}function $U(n,e){const t=pu(e,this.size,3);n.uniform3fv(this.addr,t)}function ZU(n,e){const t=pu(e,this.size,4);n.uniform4fv(this.addr,t)}function KU(n,e){const t=pu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function JU(n,e){const t=pu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function QU(n,e){const t=pu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function eO(n,e){n.uniform1iv(this.addr,e)}function tO(n,e){n.uniform2iv(this.addr,e)}function nO(n,e){n.uniform3iv(this.addr,e)}function iO(n,e){n.uniform4iv(this.addr,e)}function rO(n,e){n.uniform1uiv(this.addr,e)}function sO(n,e){n.uniform2uiv(this.addr,e)}function oO(n,e){n.uniform3uiv(this.addr,e)}function aO(n,e){n.uniform4uiv(this.addr,e)}function lO(n,e,t){const i=this.cache,r=e.length,s=vm(t,r);Mn(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||cb,s[o])}function uO(n,e,t){const i=this.cache,r=e.length,s=vm(t,r);Mn(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||db,s[o])}function cO(n,e,t){const i=this.cache,r=e.length,s=vm(t,r);Mn(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||hb,s[o])}function fO(n,e,t){const i=this.cache,r=e.length,s=vm(t,r);Mn(i,s)||(n.uniform1iv(this.addr,s),wn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||fb,s[o])}function dO(n){switch(n){case 5126:return YU;case 35664:return qU;case 35665:return $U;case 35666:return ZU;case 35674:return KU;case 35675:return JU;case 35676:return QU;case 5124:case 35670:return eO;case 35667:case 35671:return tO;case 35668:case 35672:return nO;case 35669:case 35673:return iO;case 5125:return rO;case 36294:return sO;case 36295:return oO;case 36296:return aO;case 35678:case 36198:case 36298:case 36306:case 35682:return lO;case 35679:case 36299:case 36307:return uO;case 35680:case 36300:case 36308:case 36293:return cO;case 36289:case 36303:case 36311:case 36292:return fO}}class hO{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=jU(t.type)}}class pO{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=dO(t.type)}}class mO{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const N0=/(\w+)(\])?(\[|\.)?/g;function cw(n,e){n.seq.push(e),n.map[e.id]=e}function gO(n,e,t){const i=n.name,r=i.length;for(N0.lastIndex=0;;){const s=N0.exec(i),o=N0.lastIndex;let a=s[1];const c=s[2]==="]",f=s[3];if(c&&(a=a|0),f===void 0||f==="["&&o+2===r){cw(t,f===void 0?new hO(a,n,e):new pO(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new mO(a),cw(t,h)),t=h}}}class fp{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);gO(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function fw(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let vO=0;function yO(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function _O(n){switch(n){case Ir:return["Linear","( value )"];case ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function dw(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+yO(n.getShaderSource(e),o)}else return r}function xO(n,e){const t=_O(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function SO(n,e){let t;switch(e){case PC:t="Linear";break;case RC:t="Reinhard";break;case LC:t="OptimizedCineon";break;case Y_:t="ACESFilmic";break;case IC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function MO(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cc).join(`
`)}function wO(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function EO(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function cc(n){return n!==""}function hw(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pw(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const TO=/^[ \t]*#include +<([\w\d./]+)>/gm;function Iy(n){return n.replace(TO,AO)}function AO(n,e){const t=mt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Iy(t)}const CO=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mw(n){return n.replace(CO,bO)}function bO(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function gw(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function PO(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fm?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xc?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Er&&(e="SHADOWMAP_TYPE_VSM"),e}function RO(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Eo:case To:e="ENVMAP_TYPE_CUBE";break;case fu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function LO(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case To:e="ENVMAP_MODE_REFRACTION";break}return e}function IO(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case vf:e="ENVMAP_BLENDING_MULTIPLY";break;case CC:e="ENVMAP_BLENDING_MIX";break;case bC:e="ENVMAP_BLENDING_ADD";break}return e}function DO(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function NO(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=PO(t),f=RO(t),d=LO(t),h=IO(t),m=DO(t),v=t.isWebGL2?"":MO(t),_=wO(s),w=r.createProgram();let M,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=[_].filter(cc).join(`
`),M.length>0&&(M+=`
`),g=[v,_].filter(cc).join(`
`),g.length>0&&(g+=`
`)):(M=[gw(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cc).join(`
`),g=[v,gw(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Rr?"#define TONE_MAPPING":"",t.toneMapping!==Rr?mt.tonemapping_pars_fragment:"",t.toneMapping!==Rr?SO("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",mt.encodings_pars_fragment,xO("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(cc).join(`
`)),o=Iy(o),o=hw(o,t),o=pw(o,t),a=Iy(a),a=hw(a,t),a=pw(a,t),o=mw(o),a=mw(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,M=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,g=["#define varying in",t.glslVersion===Py?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Py?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=x+M+o,T=x+g+a,C=fw(r,r.VERTEX_SHADER,S),P=fw(r,r.FRAGMENT_SHADER,T);if(r.attachShader(w,C),r.attachShader(w,P),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w),n.debug.checkShaderErrors){const b=r.getProgramInfoLog(w).trim(),L=r.getShaderInfoLog(C).trim(),G=r.getShaderInfoLog(P).trim();let K=!0,q=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,w,C,P);else{const te=dw(r,C,"vertex"),Q=dw(r,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Program Info Log: `+b+`
`+te+`
`+Q)}else b!==""?console.warn("THREE.WebGLProgram: Program Info Log:",b):(L===""||G==="")&&(q=!1);q&&(this.diagnostics={runnable:K,programLog:b,vertexShader:{log:L,prefix:M},fragmentShader:{log:G,prefix:g}})}r.deleteShader(C),r.deleteShader(P);let R;this.getUniforms=function(){return R===void 0&&(R=new fp(r,w)),R};let I;return this.getAttributes=function(){return I===void 0&&(I=EO(r,w)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.name=t.shaderName,this.id=vO++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=C,this.fragmentShader=P,this}let UO=0;class OO{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new kO(e),t.set(e,i)),i}}class kO{constructor(e){this.id=UO++,this.code=e,this.usedTimes=0}}function FO(n,e,t,i,r,s,o){const a=new ya,c=new OO,f=[],d=r.isWebGL2,h=r.logarithmicDepthBuffer,m=r.vertexTextures;let v=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(b){return b===1?"uv1":b===2?"uv2":b===3?"uv3":"uv"}function M(b,L,G,K,q){const te=K.fog,Q=q.geometry,ue=b.isMeshStandardMaterial?K.environment:null,ne=(b.isMeshStandardMaterial?t:e).get(b.envMap||ue),D=ne&&ne.mapping===fu?ne.image.height:null,H=_[b.type];b.precision!==null&&(v=r.getMaxPrecision(b.precision),v!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",v,"instead."));const z=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,oe=z!==void 0?z.length:0;let W=0;Q.morphAttributes.position!==void 0&&(W=1),Q.morphAttributes.normal!==void 0&&(W=2),Q.morphAttributes.color!==void 0&&(W=3);let X,j,ce,V;if(H){const It=ci[H];X=It.vertexShader,j=It.fragmentShader}else X=b.vertexShader,j=b.fragmentShader,c.update(b),ce=c.getVertexShaderID(b),V=c.getFragmentShaderID(b);const B=n.getRenderTarget(),de=q.isInstancedMesh===!0,Oe=!!b.map,fe=!!b.matcap,ye=!!ne,se=!!b.aoMap,ie=!!b.lightMap,_e=!!b.bumpMap,Ce=!!b.normalMap,Pe=!!b.displacementMap,Re=!!b.emissiveMap,ke=!!b.metalnessMap,Ge=!!b.roughnessMap,We=b.clearcoat>0,rt=b.iridescence>0,k=b.sheen>0,U=b.transmission>0,Z=We&&!!b.clearcoatMap,Me=We&&!!b.clearcoatNormalMap,be=We&&!!b.clearcoatRoughnessMap,Ie=rt&&!!b.iridescenceMap,$e=rt&&!!b.iridescenceThicknessMap,Be=k&&!!b.sheenColorMap,xe=k&&!!b.sheenRoughnessMap,Ye=!!b.specularMap,Y=!!b.specularColorMap,ve=!!b.specularIntensityMap,Te=U&&!!b.transmissionMap,De=U&&!!b.thicknessMap,Qe=!!b.gradientMap,ct=!!b.alphaMap,Ft=b.alphaTest>0,$=!!b.extensions,pe=!!Q.attributes.uv1,Ae=!!Q.attributes.uv2,He=!!Q.attributes.uv3;return{isWebGL2:d,shaderID:H,shaderName:b.type,vertexShader:X,fragmentShader:j,defines:b.defines,customVertexShaderID:ce,customFragmentShaderID:V,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:v,instancing:de,instancingColor:de&&q.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:B===null?n.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Ir,map:Oe,matcap:fe,envMap:ye,envMapMode:ye&&ne.mapping,envMapCubeUVHeight:D,aoMap:se,lightMap:ie,bumpMap:_e,normalMap:Ce,displacementMap:m&&Pe,emissiveMap:Re,normalMapObjectSpace:Ce&&b.normalMapType===QC,normalMapTangentSpace:Ce&&b.normalMapType===Lo,metalnessMap:ke,roughnessMap:Ge,clearcoat:We,clearcoatMap:Z,clearcoatNormalMap:Me,clearcoatRoughnessMap:be,iridescence:rt,iridescenceMap:Ie,iridescenceThicknessMap:$e,sheen:k,sheenColorMap:Be,sheenRoughnessMap:xe,specularMap:Ye,specularColorMap:Y,specularIntensityMap:ve,transmission:U,transmissionMap:Te,thicknessMap:De,gradientMap:Qe,opaque:b.transparent===!1&&b.blending===ma,alphaMap:ct,alphaTest:Ft,combine:b.combine,mapUv:Oe&&w(b.map.channel),aoMapUv:se&&w(b.aoMap.channel),lightMapUv:ie&&w(b.lightMap.channel),bumpMapUv:_e&&w(b.bumpMap.channel),normalMapUv:Ce&&w(b.normalMap.channel),displacementMapUv:Pe&&w(b.displacementMap.channel),emissiveMapUv:Re&&w(b.emissiveMap.channel),metalnessMapUv:ke&&w(b.metalnessMap.channel),roughnessMapUv:Ge&&w(b.roughnessMap.channel),clearcoatMapUv:Z&&w(b.clearcoatMap.channel),clearcoatNormalMapUv:Me&&w(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&w(b.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&w(b.iridescenceMap.channel),iridescenceThicknessMapUv:$e&&w(b.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&w(b.sheenColorMap.channel),sheenRoughnessMapUv:xe&&w(b.sheenRoughnessMap.channel),specularMapUv:Ye&&w(b.specularMap.channel),specularColorMapUv:Y&&w(b.specularColorMap.channel),specularIntensityMapUv:ve&&w(b.specularIntensityMap.channel),transmissionMapUv:Te&&w(b.transmissionMap.channel),thicknessMapUv:De&&w(b.thicknessMap.channel),alphaMapUv:ct&&w(b.alphaMap.channel),vertexTangents:Ce&&!!Q.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,vertexUv1s:pe,vertexUv2s:Ae,vertexUv3s:He,pointsUvs:q.isPoints===!0&&!!Q.attributes.uv&&(Oe||ct),fog:!!te,useFog:b.fog===!0,fogExp2:te&&te.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:q.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:W,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&G.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:Rr,useLegacyLights:n.useLegacyLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Cr,flipSided:b.side===ei,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:$&&b.extensions.derivatives===!0,extensionFragDepth:$&&b.extensions.fragDepth===!0,extensionDrawBuffers:$&&b.extensions.drawBuffers===!0,extensionShaderTextureLOD:$&&b.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function g(b){const L=[];if(b.shaderID?L.push(b.shaderID):(L.push(b.customVertexShaderID),L.push(b.customFragmentShaderID)),b.defines!==void 0)for(const G in b.defines)L.push(G),L.push(b.defines[G]);return b.isRawShaderMaterial===!1&&(x(L,b),S(L,b),L.push(n.outputColorSpace)),L.push(b.customProgramCacheKey),L.join()}function x(b,L){b.push(L.precision),b.push(L.outputColorSpace),b.push(L.envMapMode),b.push(L.envMapCubeUVHeight),b.push(L.mapUv),b.push(L.alphaMapUv),b.push(L.lightMapUv),b.push(L.aoMapUv),b.push(L.bumpMapUv),b.push(L.normalMapUv),b.push(L.displacementMapUv),b.push(L.emissiveMapUv),b.push(L.metalnessMapUv),b.push(L.roughnessMapUv),b.push(L.clearcoatMapUv),b.push(L.clearcoatNormalMapUv),b.push(L.clearcoatRoughnessMapUv),b.push(L.iridescenceMapUv),b.push(L.iridescenceThicknessMapUv),b.push(L.sheenColorMapUv),b.push(L.sheenRoughnessMapUv),b.push(L.specularMapUv),b.push(L.specularColorMapUv),b.push(L.specularIntensityMapUv),b.push(L.transmissionMapUv),b.push(L.thicknessMapUv),b.push(L.combine),b.push(L.fogExp2),b.push(L.sizeAttenuation),b.push(L.morphTargetsCount),b.push(L.morphAttributeCount),b.push(L.numDirLights),b.push(L.numPointLights),b.push(L.numSpotLights),b.push(L.numSpotLightMaps),b.push(L.numHemiLights),b.push(L.numRectAreaLights),b.push(L.numDirLightShadows),b.push(L.numPointLightShadows),b.push(L.numSpotLightShadows),b.push(L.numSpotLightShadowsWithMaps),b.push(L.shadowMapType),b.push(L.toneMapping),b.push(L.numClippingPlanes),b.push(L.numClipIntersection),b.push(L.depthPacking)}function S(b,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUv1s&&a.enable(13),L.vertexUv2s&&a.enable(14),L.vertexUv3s&&a.enable(15),L.vertexTangents&&a.enable(16),b.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.useLegacyLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.opaque&&a.enable(17),L.pointsUvs&&a.enable(18),b.push(a.mask)}function T(b){const L=_[b.type];let G;if(L){const K=ci[L];G=mm.clone(K.uniforms)}else G=b.uniforms;return G}function C(b,L){let G;for(let K=0,q=f.length;K<q;K++){const te=f[K];if(te.cacheKey===L){G=te,++G.usedTimes;break}}return G===void 0&&(G=new NO(n,L,b,s),f.push(G)),G}function P(b){if(--b.usedTimes===0){const L=f.indexOf(b);f[L]=f[f.length-1],f.pop(),b.destroy()}}function R(b){c.remove(b)}function I(){c.dispose()}return{getParameters:M,getProgramCacheKey:g,getUniforms:T,acquireProgram:C,releaseProgram:P,releaseShaderCache:R,programs:f,dispose:I}}function zO(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function BO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function vw(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function yw(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,m,v,_,w,M){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:m,material:v,groupOrder:_,renderOrder:h.renderOrder,z:w,group:M},n[e]=g):(g.id=h.id,g.object=h,g.geometry=m,g.material=v,g.groupOrder=_,g.renderOrder=h.renderOrder,g.z=w,g.group=M),e++,g}function a(h,m,v,_,w,M){const g=o(h,m,v,_,w,M);v.transmission>0?i.push(g):v.transparent===!0?r.push(g):t.push(g)}function c(h,m,v,_,w,M){const g=o(h,m,v,_,w,M);v.transmission>0?i.unshift(g):v.transparent===!0?r.unshift(g):t.unshift(g)}function f(h,m){t.length>1&&t.sort(h||BO),i.length>1&&i.sort(m||vw),r.length>1&&r.sort(m||vw)}function d(){for(let h=e,m=n.length;h<m;h++){const v=n[h];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:c,finish:d,sort:f}}function HO(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new yw,n.set(i,[o])):r>=s.length?(o=new yw,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function VO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new Ve};break;case"SpotLight":t={position:new N,direction:new N,color:new Ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new Ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new Ve,groundColor:new Ve};break;case"RectAreaLight":t={color:new Ve,position:new N,halfWidth:new N,halfHeight:new N};break}return n[e.id]=t,t}}}function GO(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let WO=0;function XO(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function jO(n,e){const t=new VO,i=GO(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new N);const s=new N,o=new ut,a=new ut;function c(d,h){let m=0,v=0,_=0;for(let G=0;G<9;G++)r.probe[G].set(0,0,0);let w=0,M=0,g=0,x=0,S=0,T=0,C=0,P=0,R=0,I=0;d.sort(XO);const b=h===!0?Math.PI:1;for(let G=0,K=d.length;G<K;G++){const q=d[G],te=q.color,Q=q.intensity,ue=q.distance,ne=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)m+=te.r*Q*b,v+=te.g*Q*b,_+=te.b*Q*b;else if(q.isLightProbe)for(let D=0;D<9;D++)r.probe[D].addScaledVector(q.sh.coefficients[D],Q);else if(q.isDirectionalLight){const D=t.get(q);if(D.color.copy(q.color).multiplyScalar(q.intensity*b),q.castShadow){const H=q.shadow,z=i.get(q);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,r.directionalShadow[w]=z,r.directionalShadowMap[w]=ne,r.directionalShadowMatrix[w]=q.shadow.matrix,T++}r.directional[w]=D,w++}else if(q.isSpotLight){const D=t.get(q);D.position.setFromMatrixPosition(q.matrixWorld),D.color.copy(te).multiplyScalar(Q*b),D.distance=ue,D.coneCos=Math.cos(q.angle),D.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),D.decay=q.decay,r.spot[g]=D;const H=q.shadow;if(q.map&&(r.spotLightMap[R]=q.map,R++,H.updateMatrices(q),q.castShadow&&I++),r.spotLightMatrix[g]=H.matrix,q.castShadow){const z=i.get(q);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,r.spotShadow[g]=z,r.spotShadowMap[g]=ne,P++}g++}else if(q.isRectAreaLight){const D=t.get(q);D.color.copy(te).multiplyScalar(Q),D.halfWidth.set(q.width*.5,0,0),D.halfHeight.set(0,q.height*.5,0),r.rectArea[x]=D,x++}else if(q.isPointLight){const D=t.get(q);if(D.color.copy(q.color).multiplyScalar(q.intensity*b),D.distance=q.distance,D.decay=q.decay,q.castShadow){const H=q.shadow,z=i.get(q);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,z.shadowCameraNear=H.camera.near,z.shadowCameraFar=H.camera.far,r.pointShadow[M]=z,r.pointShadowMap[M]=ne,r.pointShadowMatrix[M]=q.shadow.matrix,C++}r.point[M]=D,M++}else if(q.isHemisphereLight){const D=t.get(q);D.skyColor.copy(q.color).multiplyScalar(Q*b),D.groundColor.copy(q.groundColor).multiplyScalar(Q*b),r.hemi[S]=D,S++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ue.LTC_FLOAT_1,r.rectAreaLTC2=Ue.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ue.LTC_HALF_1,r.rectAreaLTC2=Ue.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=v,r.ambient[2]=_;const L=r.hash;(L.directionalLength!==w||L.pointLength!==M||L.spotLength!==g||L.rectAreaLength!==x||L.hemiLength!==S||L.numDirectionalShadows!==T||L.numPointShadows!==C||L.numSpotShadows!==P||L.numSpotMaps!==R)&&(r.directional.length=w,r.spot.length=g,r.rectArea.length=x,r.point.length=M,r.hemi.length=S,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=P+R-I,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=I,L.directionalLength=w,L.pointLength=M,L.spotLength=g,L.rectAreaLength=x,L.hemiLength=S,L.numDirectionalShadows=T,L.numPointShadows=C,L.numSpotShadows=P,L.numSpotMaps=R,r.version=WO++)}function f(d,h){let m=0,v=0,_=0,w=0,M=0;const g=h.matrixWorldInverse;for(let x=0,S=d.length;x<S;x++){const T=d[x];if(T.isDirectionalLight){const C=r.directional[m];C.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),m++}else if(T.isSpotLight){const C=r.spot[_];C.position.setFromMatrixPosition(T.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),_++}else if(T.isRectAreaLight){const C=r.rectArea[w];C.position.setFromMatrixPosition(T.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(T.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(T.width*.5,0,0),C.halfHeight.set(0,T.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),w++}else if(T.isPointLight){const C=r.point[v];C.position.setFromMatrixPosition(T.matrixWorld),C.position.applyMatrix4(g),v++}else if(T.isHemisphereLight){const C=r.hemi[M];C.direction.setFromMatrixPosition(T.matrixWorld),C.direction.transformDirection(g),M++}}}return{setup:c,setupView:f,state:r}}function _w(n,e){const t=new jO(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function c(h){t.setup(i,h)}function f(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:f,pushLight:o,pushShadow:a}}function YO(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let c;return a===void 0?(c=new _w(n,e),t.set(s,[c])):o>=a.length?(c=new _w(n,e),a.push(c)):c=a[o],c}function r(){t=new WeakMap}return{get:i,dispose:r}}class sx extends Hn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=KC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ox extends Hn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$O=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ZO(n,e,t){let i=new gm;const r=new Ee,s=new Ee,o=new At,a=new sx({depthPacking:JC}),c=new ox,f={},d=t.maxTextureSize,h={[Ds]:ei,[ei]:Ds,[Cr]:Cr},m=new Nr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ee},radius:{value:4}},vertexShader:qO,fragmentShader:$O}),v=m.clone();v.defines.HORIZONTAL_PASS=1;const _=new vt;_.setAttribute("position",new Ht(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Rn(_,m),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fm;let g=this.type;this.render=function(C,P,R){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||C.length===0)return;const I=n.getRenderTarget(),b=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),G=n.state;G.setBlending(bs),G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const K=g!==Er&&this.type===Er,q=g===Er&&this.type!==Er;for(let te=0,Q=C.length;te<Q;te++){const ue=C[te],ne=ue.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const D=ne.getFrameExtents();if(r.multiply(D),s.copy(ne.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/D.x),r.x=s.x*D.x,ne.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/D.y),r.y=s.y*D.y,ne.mapSize.y=s.y)),ne.map===null||K===!0||q===!0){const z=this.type!==Er?{minFilter:cn,magFilter:cn}:{};ne.map!==null&&ne.map.dispose(),ne.map=new Dr(r.x,r.y,z),ne.map.texture.name=ue.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const H=ne.getViewportCount();for(let z=0;z<H;z++){const oe=ne.getViewport(z);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),G.viewport(o),ne.updateMatrices(ue,z),i=ne.getFrustum(),T(P,R,ne.camera,ue,this.type)}ne.isPointLightShadow!==!0&&this.type===Er&&x(ne,R),ne.needsUpdate=!1}g=this.type,M.needsUpdate=!1,n.setRenderTarget(I,b,L)};function x(C,P){const R=e.update(w);m.defines.VSM_SAMPLES!==C.blurSamples&&(m.defines.VSM_SAMPLES=C.blurSamples,v.defines.VSM_SAMPLES=C.blurSamples,m.needsUpdate=!0,v.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Dr(r.x,r.y)),m.uniforms.shadow_pass.value=C.map.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(P,null,R,m,w,null),v.uniforms.shadow_pass.value=C.mapPass.texture,v.uniforms.resolution.value=C.mapSize,v.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(P,null,R,v,w,null)}function S(C,P,R,I){let b=null;const L=R.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(L!==void 0)b=L;else if(b=R.isPointLight===!0?c:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const G=b.uuid,K=P.uuid;let q=f[G];q===void 0&&(q={},f[G]=q);let te=q[K];te===void 0&&(te=b.clone(),q[K]=te),b=te}if(b.visible=P.visible,b.wireframe=P.wireframe,I===Er?b.side=P.shadowSide!==null?P.shadowSide:P.side:b.side=P.shadowSide!==null?P.shadowSide:h[P.side],b.alphaMap=P.alphaMap,b.alphaTest=P.alphaTest,b.map=P.map,b.clipShadows=P.clipShadows,b.clippingPlanes=P.clippingPlanes,b.clipIntersection=P.clipIntersection,b.displacementMap=P.displacementMap,b.displacementScale=P.displacementScale,b.displacementBias=P.displacementBias,b.wireframeLinewidth=P.wireframeLinewidth,b.linewidth=P.linewidth,R.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const G=n.properties.get(b);G.light=R}return b}function T(C,P,R,I,b){if(C.visible===!1)return;if(C.layers.test(P.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&b===Er)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,C.matrixWorld);const K=e.update(C),q=C.material;if(Array.isArray(q)){const te=K.groups;for(let Q=0,ue=te.length;Q<ue;Q++){const ne=te[Q],D=q[ne.materialIndex];if(D&&D.visible){const H=S(C,D,I,b);n.renderBufferDirect(R,null,K,H,C,ne)}}}else if(q.visible){const te=S(C,q,I,b);n.renderBufferDirect(R,null,K,te,C,null)}}const G=C.children;for(let K=0,q=G.length;K<q;K++)T(G[K],P,R,I,b)}}function KO(n,e,t){const i=t.isWebGL2;function r(){let $=!1;const pe=new At;let Ae=null;const He=new At(0,0,0,0);return{setMask:function(Ze){Ae!==Ze&&!$&&(n.colorMask(Ze,Ze,Ze,Ze),Ae=Ze)},setLocked:function(Ze){$=Ze},setClear:function(Ze,It,Dt,En,dr){dr===!0&&(Ze*=En,It*=En,Dt*=En),pe.set(Ze,It,Dt,En),He.equals(pe)===!1&&(n.clearColor(Ze,It,Dt,En),He.copy(pe))},reset:function(){$=!1,Ae=null,He.set(-1,0,0,0)}}}function s(){let $=!1,pe=null,Ae=null,He=null;return{setTest:function(Ze){Ze?B(n.DEPTH_TEST):de(n.DEPTH_TEST)},setMask:function(Ze){pe!==Ze&&!$&&(n.depthMask(Ze),pe=Ze)},setFunc:function(Ze){if(Ae!==Ze){switch(Ze){case xC:n.depthFunc(n.NEVER);break;case SC:n.depthFunc(n.ALWAYS);break;case MC:n.depthFunc(n.LESS);break;case kp:n.depthFunc(n.LEQUAL);break;case wC:n.depthFunc(n.EQUAL);break;case EC:n.depthFunc(n.GEQUAL);break;case TC:n.depthFunc(n.GREATER);break;case AC:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ae=Ze}},setLocked:function(Ze){$=Ze},setClear:function(Ze){He!==Ze&&(n.clearDepth(Ze),He=Ze)},reset:function(){$=!1,pe=null,Ae=null,He=null}}}function o(){let $=!1,pe=null,Ae=null,He=null,Ze=null,It=null,Dt=null,En=null,dr=null;return{setTest:function(Yt){$||(Yt?B(n.STENCIL_TEST):de(n.STENCIL_TEST))},setMask:function(Yt){pe!==Yt&&!$&&(n.stencilMask(Yt),pe=Yt)},setFunc:function(Yt,ri,Yi){(Ae!==Yt||He!==ri||Ze!==Yi)&&(n.stencilFunc(Yt,ri,Yi),Ae=Yt,He=ri,Ze=Yi)},setOp:function(Yt,ri,Yi){(It!==Yt||Dt!==ri||En!==Yi)&&(n.stencilOp(Yt,ri,Yi),It=Yt,Dt=ri,En=Yi)},setLocked:function(Yt){$=Yt},setClear:function(Yt){dr!==Yt&&(n.clearStencil(Yt),dr=Yt)},reset:function(){$=!1,pe=null,Ae=null,He=null,Ze=null,It=null,Dt=null,En=null,dr=null}}}const a=new r,c=new s,f=new o,d=new WeakMap,h=new WeakMap;let m={},v={},_=new WeakMap,w=[],M=null,g=!1,x=null,S=null,T=null,C=null,P=null,R=null,I=null,b=!1,L=null,G=null,K=null,q=null,te=null;const Q=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ue=!1,ne=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(D)[1]),ue=ne>=1):D.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),ue=ne>=2);let H=null,z={};const oe=n.getParameter(n.SCISSOR_BOX),W=n.getParameter(n.VIEWPORT),X=new At().fromArray(oe),j=new At().fromArray(W);function ce($,pe,Ae,He){const Ze=new Uint8Array(4),It=n.createTexture();n.bindTexture($,It),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Dt=0;Dt<Ae;Dt++)i&&($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)?n.texImage3D(pe,0,n.RGBA,1,1,He,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(pe+Dt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return It}const V={};V[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),V[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(V[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),V[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),c.setClear(1),f.setClear(0),B(n.DEPTH_TEST),c.setFunc(kp),Pe(!1),Re(ey),B(n.CULL_FACE),_e(bs);function B($){m[$]!==!0&&(n.enable($),m[$]=!0)}function de($){m[$]!==!1&&(n.disable($),m[$]=!1)}function Oe($,pe){return v[$]!==pe?(n.bindFramebuffer($,pe),v[$]=pe,i&&($===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=pe),$===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=pe)),!0):!1}function fe($,pe){let Ae=w,He=!1;if($)if(Ae=_.get(pe),Ae===void 0&&(Ae=[],_.set(pe,Ae)),$.isWebGLMultipleRenderTargets){const Ze=$.texture;if(Ae.length!==Ze.length||Ae[0]!==n.COLOR_ATTACHMENT0){for(let It=0,Dt=Ze.length;It<Dt;It++)Ae[It]=n.COLOR_ATTACHMENT0+It;Ae.length=Ze.length,He=!0}}else Ae[0]!==n.COLOR_ATTACHMENT0&&(Ae[0]=n.COLOR_ATTACHMENT0,He=!0);else Ae[0]!==n.BACK&&(Ae[0]=n.BACK,He=!0);He&&(t.isWebGL2?n.drawBuffers(Ae):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ae))}function ye($){return M!==$?(n.useProgram($),M=$,!0):!1}const se={[ra]:n.FUNC_ADD,[uC]:n.FUNC_SUBTRACT,[cC]:n.FUNC_REVERSE_SUBTRACT};if(i)se[ry]=n.MIN,se[sy]=n.MAX;else{const $=e.get("EXT_blend_minmax");$!==null&&(se[ry]=$.MIN_EXT,se[sy]=$.MAX_EXT)}const ie={[fC]:n.ZERO,[dC]:n.ONE,[hC]:n.SRC_COLOR,[X_]:n.SRC_ALPHA,[_C]:n.SRC_ALPHA_SATURATE,[vC]:n.DST_COLOR,[mC]:n.DST_ALPHA,[pC]:n.ONE_MINUS_SRC_COLOR,[j_]:n.ONE_MINUS_SRC_ALPHA,[yC]:n.ONE_MINUS_DST_COLOR,[gC]:n.ONE_MINUS_DST_ALPHA};function _e($,pe,Ae,He,Ze,It,Dt,En){if($===bs){g===!0&&(de(n.BLEND),g=!1);return}if(g===!1&&(B(n.BLEND),g=!0),$!==lC){if($!==x||En!==b){if((S!==ra||P!==ra)&&(n.blendEquation(n.FUNC_ADD),S=ra,P=ra),En)switch($){case ma:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ty:n.blendFunc(n.ONE,n.ONE);break;case ny:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iy:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case ma:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ty:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case ny:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iy:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}T=null,C=null,R=null,I=null,x=$,b=En}return}Ze=Ze||pe,It=It||Ae,Dt=Dt||He,(pe!==S||Ze!==P)&&(n.blendEquationSeparate(se[pe],se[Ze]),S=pe,P=Ze),(Ae!==T||He!==C||It!==R||Dt!==I)&&(n.blendFuncSeparate(ie[Ae],ie[He],ie[It],ie[Dt]),T=Ae,C=He,R=It,I=Dt),x=$,b=!1}function Ce($,pe){$.side===Cr?de(n.CULL_FACE):B(n.CULL_FACE);let Ae=$.side===ei;pe&&(Ae=!Ae),Pe(Ae),$.blending===ma&&$.transparent===!1?_e(bs):_e($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.premultipliedAlpha),c.setFunc($.depthFunc),c.setTest($.depthTest),c.setMask($.depthWrite),a.setMask($.colorWrite);const He=$.stencilWrite;f.setTest(He),He&&(f.setMask($.stencilWriteMask),f.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),f.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),Ge($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?B(n.SAMPLE_ALPHA_TO_COVERAGE):de(n.SAMPLE_ALPHA_TO_COVERAGE)}function Pe($){L!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),L=$)}function Re($){$!==sC?(B(n.CULL_FACE),$!==G&&($===ey?n.cullFace(n.BACK):$===oC?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):de(n.CULL_FACE),G=$}function ke($){$!==K&&(ue&&n.lineWidth($),K=$)}function Ge($,pe,Ae){$?(B(n.POLYGON_OFFSET_FILL),(q!==pe||te!==Ae)&&(n.polygonOffset(pe,Ae),q=pe,te=Ae)):de(n.POLYGON_OFFSET_FILL)}function We($){$?B(n.SCISSOR_TEST):de(n.SCISSOR_TEST)}function rt($){$===void 0&&($=n.TEXTURE0+Q-1),H!==$&&(n.activeTexture($),H=$)}function k($,pe,Ae){Ae===void 0&&(H===null?Ae=n.TEXTURE0+Q-1:Ae=H);let He=z[Ae];He===void 0&&(He={type:void 0,texture:void 0},z[Ae]=He),(He.type!==$||He.texture!==pe)&&(H!==Ae&&(n.activeTexture(Ae),H=Ae),n.bindTexture($,pe||V[$]),He.type=$,He.texture=pe)}function U(){const $=z[H];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function Z(){try{n.compressedTexImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Me(){try{n.compressedTexImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function be(){try{n.texSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ie(){try{n.texSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function $e(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Be(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function xe(){try{n.texStorage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ye(){try{n.texStorage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Y(){try{n.texImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ve(){try{n.texImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Te($){X.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),X.copy($))}function De($){j.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),j.copy($))}function Qe($,pe){let Ae=h.get(pe);Ae===void 0&&(Ae=new WeakMap,h.set(pe,Ae));let He=Ae.get($);He===void 0&&(He=n.getUniformBlockIndex(pe,$.name),Ae.set($,He))}function ct($,pe){const He=h.get(pe).get($);d.get(pe)!==He&&(n.uniformBlockBinding(pe,He,$.__bindingPointIndex),d.set(pe,He))}function Ft(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),m={},H=null,z={},v={},_=new WeakMap,w=[],M=null,g=!1,x=null,S=null,T=null,C=null,P=null,R=null,I=null,b=!1,L=null,G=null,K=null,q=null,te=null,X.set(0,0,n.canvas.width,n.canvas.height),j.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),f.reset()}return{buffers:{color:a,depth:c,stencil:f},enable:B,disable:de,bindFramebuffer:Oe,drawBuffers:fe,useProgram:ye,setBlending:_e,setMaterial:Ce,setFlipSided:Pe,setCullFace:Re,setLineWidth:ke,setPolygonOffset:Ge,setScissorTest:We,activeTexture:rt,bindTexture:k,unbindTexture:U,compressedTexImage2D:Z,compressedTexImage3D:Me,texImage2D:Y,texImage3D:ve,updateUBOMapping:Qe,uniformBlockBinding:ct,texStorage2D:xe,texStorage3D:Ye,texSubImage2D:be,texSubImage3D:Ie,compressedTexSubImage2D:$e,compressedTexSubImage3D:Be,scissor:Te,viewport:De,reset:Ft}}function JO(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,f=r.maxCubemapSize,d=r.maxTextureSize,h=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let w;const M=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(k,U){return g?new OffscreenCanvas(k,U):Jc("canvas")}function S(k,U,Z,Me){let be=1;if((k.width>Me||k.height>Me)&&(be=Me/Math.max(k.width,k.height)),be<1||U===!0)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const Ie=U?nb:Math.floor,$e=Ie(be*k.width),Be=Ie(be*k.height);w===void 0&&(w=x($e,Be));const xe=Z?x($e,Be):w;return xe.width=$e,xe.height=Be,xe.getContext("2d").drawImage(k,0,0,$e,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+$e+"x"+Be+")."),xe}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function T(k){return Ry(k.width)&&Ry(k.height)}function C(k){return a?!1:k.wrapS!==Qn||k.wrapT!==Qn||k.minFilter!==cn&&k.minFilter!==dn}function P(k,U){return k.generateMipmaps&&U&&k.minFilter!==cn&&k.minFilter!==dn}function R(k){n.generateMipmap(k)}function I(k,U,Z,Me,be=!1){if(a===!1)return U;if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let Ie=U;return U===n.RED&&(Z===n.FLOAT&&(Ie=n.R32F),Z===n.HALF_FLOAT&&(Ie=n.R16F),Z===n.UNSIGNED_BYTE&&(Ie=n.R8)),U===n.RG&&(Z===n.FLOAT&&(Ie=n.RG32F),Z===n.HALF_FLOAT&&(Ie=n.RG16F),Z===n.UNSIGNED_BYTE&&(Ie=n.RG8)),U===n.RGBA&&(Z===n.FLOAT&&(Ie=n.RGBA32F),Z===n.HALF_FLOAT&&(Ie=n.RGBA16F),Z===n.UNSIGNED_BYTE&&(Ie=Me===ht&&be===!1?n.SRGB8_ALPHA8:n.RGBA8),Z===n.UNSIGNED_SHORT_4_4_4_4&&(Ie=n.RGBA4),Z===n.UNSIGNED_SHORT_5_5_5_1&&(Ie=n.RGB5_A1)),(Ie===n.R16F||Ie===n.R32F||Ie===n.RG16F||Ie===n.RG32F||Ie===n.RGBA16F||Ie===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ie}function b(k,U,Z){return P(k,Z)===!0||k.isFramebufferTexture&&k.minFilter!==cn&&k.minFilter!==dn?Math.log2(Math.max(U.width,U.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?U.mipmaps.length:1}function L(k){return k===cn||k===Fp||k===Sc?n.NEAREST:n.LINEAR}function G(k){const U=k.target;U.removeEventListener("dispose",G),q(U),U.isVideoTexture&&_.delete(U)}function K(k){const U=k.target;U.removeEventListener("dispose",K),Q(U)}function q(k){const U=i.get(k);if(U.__webglInit===void 0)return;const Z=k.source,Me=M.get(Z);if(Me){const be=Me[U.__cacheKey];be.usedTimes--,be.usedTimes===0&&te(k),Object.keys(Me).length===0&&M.delete(Z)}i.remove(k)}function te(k){const U=i.get(k);n.deleteTexture(U.__webglTexture);const Z=k.source,Me=M.get(Z);delete Me[U.__cacheKey],o.memory.textures--}function Q(k){const U=k.texture,Z=i.get(k),Me=i.get(U);if(Me.__webglTexture!==void 0&&(n.deleteTexture(Me.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let be=0;be<6;be++)n.deleteFramebuffer(Z.__webglFramebuffer[be]),Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer[be]);else{if(n.deleteFramebuffer(Z.__webglFramebuffer),Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let be=0;be<Z.__webglColorRenderbuffer.length;be++)Z.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(Z.__webglColorRenderbuffer[be]);Z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let be=0,Ie=U.length;be<Ie;be++){const $e=i.get(U[be]);$e.__webglTexture&&(n.deleteTexture($e.__webglTexture),o.memory.textures--),i.remove(U[be])}i.remove(U),i.remove(k)}let ue=0;function ne(){ue=0}function D(){const k=ue;return k>=c&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+c),ue+=1,k}function H(k){const U=[];return U.push(k.wrapS),U.push(k.wrapT),U.push(k.wrapR||0),U.push(k.magFilter),U.push(k.minFilter),U.push(k.anisotropy),U.push(k.internalFormat),U.push(k.format),U.push(k.type),U.push(k.generateMipmaps),U.push(k.premultiplyAlpha),U.push(k.flipY),U.push(k.unpackAlignment),U.push(k.colorSpace),U.join()}function z(k,U){const Z=i.get(k);if(k.isVideoTexture&&We(k),k.isRenderTargetTexture===!1&&k.version>0&&Z.__version!==k.version){const Me=k.image;if(Me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(Z,k,U);return}}t.bindTexture(n.TEXTURE_2D,Z.__webglTexture,n.TEXTURE0+U)}function oe(k,U){const Z=i.get(k);if(k.version>0&&Z.__version!==k.version){de(Z,k,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Z.__webglTexture,n.TEXTURE0+U)}function W(k,U){const Z=i.get(k);if(k.version>0&&Z.__version!==k.version){de(Z,k,U);return}t.bindTexture(n.TEXTURE_3D,Z.__webglTexture,n.TEXTURE0+U)}function X(k,U){const Z=i.get(k);if(k.version>0&&Z.__version!==k.version){Oe(Z,k,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Z.__webglTexture,n.TEXTURE0+U)}const j={[jc]:n.REPEAT,[Qn]:n.CLAMP_TO_EDGE,[Yc]:n.MIRRORED_REPEAT},ce={[cn]:n.NEAREST,[Fp]:n.NEAREST_MIPMAP_NEAREST,[Sc]:n.NEAREST_MIPMAP_LINEAR,[dn]:n.LINEAR,[q_]:n.LINEAR_MIPMAP_NEAREST,[Ao]:n.LINEAR_MIPMAP_LINEAR};function V(k,U,Z){if(Z?(n.texParameteri(k,n.TEXTURE_WRAP_S,j[U.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,j[U.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,j[U.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,ce[U.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,ce[U.minFilter])):(n.texParameteri(k,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(k,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(U.wrapS!==Qn||U.wrapT!==Qn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(k,n.TEXTURE_MAG_FILTER,L(U.magFilter)),n.texParameteri(k,n.TEXTURE_MIN_FILTER,L(U.minFilter)),U.minFilter!==cn&&U.minFilter!==dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Me=e.get("EXT_texture_filter_anisotropic");if(U.magFilter===cn||U.minFilter!==Sc&&U.minFilter!==Ao||U.type===Es&&e.has("OES_texture_float_linear")===!1||a===!1&&U.type===tu&&e.has("OES_texture_half_float_linear")===!1)return;(U.anisotropy>1||i.get(U).__currentAnisotropy)&&(n.texParameterf(k,Me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,r.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy)}}function B(k,U){let Z=!1;k.__webglInit===void 0&&(k.__webglInit=!0,U.addEventListener("dispose",G));const Me=U.source;let be=M.get(Me);be===void 0&&(be={},M.set(Me,be));const Ie=H(U);if(Ie!==k.__cacheKey){be[Ie]===void 0&&(be[Ie]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Z=!0),be[Ie].usedTimes++;const $e=be[k.__cacheKey];$e!==void 0&&(be[k.__cacheKey].usedTimes--,$e.usedTimes===0&&te(U)),k.__cacheKey=Ie,k.__webglTexture=be[Ie].texture}return Z}function de(k,U,Z){let Me=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(Me=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(Me=n.TEXTURE_3D);const be=B(k,U),Ie=U.source;t.bindTexture(Me,k.__webglTexture,n.TEXTURE0+Z);const $e=i.get(Ie);if(Ie.version!==$e.__version||be===!0){t.activeTexture(n.TEXTURE0+Z),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Be=C(U)&&T(U.image)===!1;let xe=S(U.image,Be,!1,d);xe=rt(U,xe);const Ye=T(xe)||a,Y=s.convert(U.format,U.colorSpace);let ve=s.convert(U.type),Te=I(U.internalFormat,Y,ve,U.colorSpace);V(Me,U,Ye);let De;const Qe=U.mipmaps,ct=a&&U.isVideoTexture!==!0,Ft=$e.__version===void 0||be===!0,$=b(U,xe,Ye);if(U.isDepthTexture)Te=n.DEPTH_COMPONENT,a?U.type===Es?Te=n.DEPTH_COMPONENT32F:U.type===lo?Te=n.DEPTH_COMPONENT24:U.type===ga?Te=n.DEPTH24_STENCIL8:Te=n.DEPTH_COMPONENT16:U.type===Es&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),U.format===yo&&Te===n.DEPTH_COMPONENT&&U.type!==$_&&U.type!==lo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),U.type=lo,ve=s.convert(U.type)),U.format===Aa&&Te===n.DEPTH_COMPONENT&&(Te=n.DEPTH_STENCIL,U.type!==ga&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),U.type=ga,ve=s.convert(U.type))),Ft&&(ct?t.texStorage2D(n.TEXTURE_2D,1,Te,xe.width,xe.height):t.texImage2D(n.TEXTURE_2D,0,Te,xe.width,xe.height,0,Y,ve,null));else if(U.isDataTexture)if(Qe.length>0&&Ye){ct&&Ft&&t.texStorage2D(n.TEXTURE_2D,$,Te,Qe[0].width,Qe[0].height);for(let pe=0,Ae=Qe.length;pe<Ae;pe++)De=Qe[pe],ct?t.texSubImage2D(n.TEXTURE_2D,pe,0,0,De.width,De.height,Y,ve,De.data):t.texImage2D(n.TEXTURE_2D,pe,Te,De.width,De.height,0,Y,ve,De.data);U.generateMipmaps=!1}else ct?(Ft&&t.texStorage2D(n.TEXTURE_2D,$,Te,xe.width,xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,xe.width,xe.height,Y,ve,xe.data)):t.texImage2D(n.TEXTURE_2D,0,Te,xe.width,xe.height,0,Y,ve,xe.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){ct&&Ft&&t.texStorage3D(n.TEXTURE_2D_ARRAY,$,Te,Qe[0].width,Qe[0].height,xe.depth);for(let pe=0,Ae=Qe.length;pe<Ae;pe++)De=Qe[pe],U.format!==wi?Y!==null?ct?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,De.width,De.height,xe.depth,Y,De.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pe,Te,De.width,De.height,xe.depth,0,De.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ct?t.texSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,De.width,De.height,xe.depth,Y,ve,De.data):t.texImage3D(n.TEXTURE_2D_ARRAY,pe,Te,De.width,De.height,xe.depth,0,Y,ve,De.data)}else{ct&&Ft&&t.texStorage2D(n.TEXTURE_2D,$,Te,Qe[0].width,Qe[0].height);for(let pe=0,Ae=Qe.length;pe<Ae;pe++)De=Qe[pe],U.format!==wi?Y!==null?ct?t.compressedTexSubImage2D(n.TEXTURE_2D,pe,0,0,De.width,De.height,Y,De.data):t.compressedTexImage2D(n.TEXTURE_2D,pe,Te,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ct?t.texSubImage2D(n.TEXTURE_2D,pe,0,0,De.width,De.height,Y,ve,De.data):t.texImage2D(n.TEXTURE_2D,pe,Te,De.width,De.height,0,Y,ve,De.data)}else if(U.isDataArrayTexture)ct?(Ft&&t.texStorage3D(n.TEXTURE_2D_ARRAY,$,Te,xe.width,xe.height,xe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xe.width,xe.height,xe.depth,Y,ve,xe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Te,xe.width,xe.height,xe.depth,0,Y,ve,xe.data);else if(U.isData3DTexture)ct?(Ft&&t.texStorage3D(n.TEXTURE_3D,$,Te,xe.width,xe.height,xe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xe.width,xe.height,xe.depth,Y,ve,xe.data)):t.texImage3D(n.TEXTURE_3D,0,Te,xe.width,xe.height,xe.depth,0,Y,ve,xe.data);else if(U.isFramebufferTexture){if(Ft)if(ct)t.texStorage2D(n.TEXTURE_2D,$,Te,xe.width,xe.height);else{let pe=xe.width,Ae=xe.height;for(let He=0;He<$;He++)t.texImage2D(n.TEXTURE_2D,He,Te,pe,Ae,0,Y,ve,null),pe>>=1,Ae>>=1}}else if(Qe.length>0&&Ye){ct&&Ft&&t.texStorage2D(n.TEXTURE_2D,$,Te,Qe[0].width,Qe[0].height);for(let pe=0,Ae=Qe.length;pe<Ae;pe++)De=Qe[pe],ct?t.texSubImage2D(n.TEXTURE_2D,pe,0,0,Y,ve,De):t.texImage2D(n.TEXTURE_2D,pe,Te,Y,ve,De);U.generateMipmaps=!1}else ct?(Ft&&t.texStorage2D(n.TEXTURE_2D,$,Te,xe.width,xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Y,ve,xe)):t.texImage2D(n.TEXTURE_2D,0,Te,Y,ve,xe);P(U,Ye)&&R(Me),$e.__version=Ie.version,U.onUpdate&&U.onUpdate(U)}k.__version=U.version}function Oe(k,U,Z){if(U.image.length!==6)return;const Me=B(k,U),be=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+Z);const Ie=i.get(be);if(be.version!==Ie.__version||Me===!0){t.activeTexture(n.TEXTURE0+Z),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const $e=U.isCompressedTexture||U.image[0].isCompressedTexture,Be=U.image[0]&&U.image[0].isDataTexture,xe=[];for(let pe=0;pe<6;pe++)!$e&&!Be?xe[pe]=S(U.image[pe],!1,!0,f):xe[pe]=Be?U.image[pe].image:U.image[pe],xe[pe]=rt(U,xe[pe]);const Ye=xe[0],Y=T(Ye)||a,ve=s.convert(U.format,U.colorSpace),Te=s.convert(U.type),De=I(U.internalFormat,ve,Te,U.colorSpace),Qe=a&&U.isVideoTexture!==!0,ct=Ie.__version===void 0||Me===!0;let Ft=b(U,Ye,Y);V(n.TEXTURE_CUBE_MAP,U,Y);let $;if($e){Qe&&ct&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ft,De,Ye.width,Ye.height);for(let pe=0;pe<6;pe++){$=xe[pe].mipmaps;for(let Ae=0;Ae<$.length;Ae++){const He=$[Ae];U.format!==wi?ve!==null?Qe?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae,0,0,He.width,He.height,ve,He.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae,De,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae,0,0,He.width,He.height,ve,Te,He.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae,De,He.width,He.height,0,ve,Te,He.data)}}}else{$=U.mipmaps,Qe&&ct&&($.length>0&&Ft++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ft,De,xe[0].width,xe[0].height));for(let pe=0;pe<6;pe++)if(Be){Qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,xe[pe].width,xe[pe].height,ve,Te,xe[pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,De,xe[pe].width,xe[pe].height,0,ve,Te,xe[pe].data);for(let Ae=0;Ae<$.length;Ae++){const Ze=$[Ae].image[pe].image;Qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae+1,0,0,Ze.width,Ze.height,ve,Te,Ze.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae+1,De,Ze.width,Ze.height,0,ve,Te,Ze.data)}}else{Qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,ve,Te,xe[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,De,ve,Te,xe[pe]);for(let Ae=0;Ae<$.length;Ae++){const He=$[Ae];Qe?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae+1,0,0,ve,Te,He.image[pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Ae+1,De,ve,Te,He.image[pe])}}}P(U,Y)&&R(n.TEXTURE_CUBE_MAP),Ie.__version=be.version,U.onUpdate&&U.onUpdate(U)}k.__version=U.version}function fe(k,U,Z,Me,be){const Ie=s.convert(Z.format,Z.colorSpace),$e=s.convert(Z.type),Be=I(Z.internalFormat,Ie,$e,Z.colorSpace);i.get(U).__hasExternalTextures||(be===n.TEXTURE_3D||be===n.TEXTURE_2D_ARRAY?t.texImage3D(be,0,Be,U.width,U.height,U.depth,0,Ie,$e,null):t.texImage2D(be,0,Be,U.width,U.height,0,Ie,$e,null)),t.bindFramebuffer(n.FRAMEBUFFER,k),Ge(U)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Me,be,i.get(Z).__webglTexture,0,ke(U)):(be===n.TEXTURE_2D||be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Me,be,i.get(Z).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ye(k,U,Z){if(n.bindRenderbuffer(n.RENDERBUFFER,k),U.depthBuffer&&!U.stencilBuffer){let Me=n.DEPTH_COMPONENT16;if(Z||Ge(U)){const be=U.depthTexture;be&&be.isDepthTexture&&(be.type===Es?Me=n.DEPTH_COMPONENT32F:be.type===lo&&(Me=n.DEPTH_COMPONENT24));const Ie=ke(U);Ge(U)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ie,Me,U.width,U.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ie,Me,U.width,U.height)}else n.renderbufferStorage(n.RENDERBUFFER,Me,U.width,U.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,k)}else if(U.depthBuffer&&U.stencilBuffer){const Me=ke(U);Z&&Ge(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,U.width,U.height):Ge(U)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Me,n.DEPTH24_STENCIL8,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,k)}else{const Me=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let be=0;be<Me.length;be++){const Ie=Me[be],$e=s.convert(Ie.format,Ie.colorSpace),Be=s.convert(Ie.type),xe=I(Ie.internalFormat,$e,Be,Ie.colorSpace),Ye=ke(U);Z&&Ge(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ye,xe,U.width,U.height):Ge(U)?m.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ye,xe,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,xe,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function se(k,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),z(U.depthTexture,0);const Me=i.get(U.depthTexture).__webglTexture,be=ke(U);if(U.depthTexture.format===yo)Ge(U)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Me,0);else if(U.depthTexture.format===Aa)Ge(U)?m.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Me,0);else throw new Error("Unknown depthTexture format")}function ie(k){const U=i.get(k),Z=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!U.__autoAllocateDepthBuffer){if(Z)throw new Error("target.depthTexture not supported in Cube render targets");se(U.__webglFramebuffer,k)}else if(Z){U.__webglDepthbuffer=[];for(let Me=0;Me<6;Me++)t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[Me]),U.__webglDepthbuffer[Me]=n.createRenderbuffer(),ye(U.__webglDepthbuffer[Me],k,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer=n.createRenderbuffer(),ye(U.__webglDepthbuffer,k,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function _e(k,U,Z){const Me=i.get(k);U!==void 0&&fe(Me.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),Z!==void 0&&ie(k)}function Ce(k){const U=k.texture,Z=i.get(k),Me=i.get(U);k.addEventListener("dispose",K),k.isWebGLMultipleRenderTargets!==!0&&(Me.__webglTexture===void 0&&(Me.__webglTexture=n.createTexture()),Me.__version=U.version,o.memory.textures++);const be=k.isWebGLCubeRenderTarget===!0,Ie=k.isWebGLMultipleRenderTargets===!0,$e=T(k)||a;if(be){Z.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)Z.__webglFramebuffer[Be]=n.createFramebuffer()}else{if(Z.__webglFramebuffer=n.createFramebuffer(),Ie)if(r.drawBuffers){const Be=k.texture;for(let xe=0,Ye=Be.length;xe<Ye;xe++){const Y=i.get(Be[xe]);Y.__webglTexture===void 0&&(Y.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&k.samples>0&&Ge(k)===!1){const Be=Ie?U:[U];Z.__webglMultisampledFramebuffer=n.createFramebuffer(),Z.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglMultisampledFramebuffer);for(let xe=0;xe<Be.length;xe++){const Ye=Be[xe];Z.__webglColorRenderbuffer[xe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Z.__webglColorRenderbuffer[xe]);const Y=s.convert(Ye.format,Ye.colorSpace),ve=s.convert(Ye.type),Te=I(Ye.internalFormat,Y,ve,Ye.colorSpace,k.isXRRenderTarget===!0),De=ke(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,De,Te,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.RENDERBUFFER,Z.__webglColorRenderbuffer[xe])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(Z.__webglDepthRenderbuffer=n.createRenderbuffer(),ye(Z.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(be){t.bindTexture(n.TEXTURE_CUBE_MAP,Me.__webglTexture),V(n.TEXTURE_CUBE_MAP,U,$e);for(let Be=0;Be<6;Be++)fe(Z.__webglFramebuffer[Be],k,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be);P(U,$e)&&R(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ie){const Be=k.texture;for(let xe=0,Ye=Be.length;xe<Ye;xe++){const Y=Be[xe],ve=i.get(Y);t.bindTexture(n.TEXTURE_2D,ve.__webglTexture),V(n.TEXTURE_2D,Y,$e),fe(Z.__webglFramebuffer,k,Y,n.COLOR_ATTACHMENT0+xe,n.TEXTURE_2D),P(Y,$e)&&R(n.TEXTURE_2D)}t.unbindTexture()}else{let Be=n.TEXTURE_2D;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?Be=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,Me.__webglTexture),V(Be,U,$e),fe(Z.__webglFramebuffer,k,U,n.COLOR_ATTACHMENT0,Be),P(U,$e)&&R(Be),t.unbindTexture()}k.depthBuffer&&ie(k)}function Pe(k){const U=T(k)||a,Z=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let Me=0,be=Z.length;Me<be;Me++){const Ie=Z[Me];if(P(Ie,U)){const $e=k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Be=i.get(Ie).__webglTexture;t.bindTexture($e,Be),R($e),t.unbindTexture()}}}function Re(k){if(a&&k.samples>0&&Ge(k)===!1){const U=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],Z=k.width,Me=k.height;let be=n.COLOR_BUFFER_BIT;const Ie=[],$e=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=i.get(k),xe=k.isWebGLMultipleRenderTargets===!0;if(xe)for(let Ye=0;Ye<U.length;Ye++)t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ye,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ye,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglFramebuffer);for(let Ye=0;Ye<U.length;Ye++){Ie.push(n.COLOR_ATTACHMENT0+Ye),k.depthBuffer&&Ie.push($e);const Y=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(Y===!1&&(k.depthBuffer&&(be|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&(be|=n.STENCIL_BUFFER_BIT)),xe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Be.__webglColorRenderbuffer[Ye]),Y===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[$e]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[$e])),xe){const ve=i.get(U[Ye]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ve,0)}n.blitFramebuffer(0,0,Z,Me,0,0,Z,Me,be,n.NEAREST),v&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ie)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),xe)for(let Ye=0;Ye<U.length;Ye++){t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ye,n.RENDERBUFFER,Be.__webglColorRenderbuffer[Ye]);const Y=i.get(U[Ye]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ye,n.TEXTURE_2D,Y,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglMultisampledFramebuffer)}}function ke(k){return Math.min(h,k.samples)}function Ge(k){const U=i.get(k);return a&&k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function We(k){const U=o.render.frame;_.get(k)!==U&&(_.set(k,U),k.update())}function rt(k,U){const Z=k.colorSpace,Me=k.format,be=k.type;return k.isCompressedTexture===!0||k.format===zp||Z!==Ir&&Z!==xo&&(Z===ht?a===!1?e.has("EXT_sRGB")===!0&&Me===wi?(k.format=zp,k.minFilter=dn,k.generateMipmaps=!1):U=ex.sRGBToLinear(U):(Me!==wi||be!==Ns)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Z)),U}this.allocateTextureUnit=D,this.resetTextureUnits=ne,this.setTexture2D=z,this.setTexture2DArray=oe,this.setTexture3D=W,this.setTextureCube=X,this.rebindTextures=_e,this.setupRenderTarget=Ce,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=fe,this.useMultisampledRTT=Ge}function pb(n,e,t){const i=t.isWebGL2;function r(s,o=xo){let a;if(s===Ns)return n.UNSIGNED_BYTE;if(s===OC)return n.UNSIGNED_SHORT_4_4_4_4;if(s===kC)return n.UNSIGNED_SHORT_5_5_5_1;if(s===DC)return n.BYTE;if(s===NC)return n.SHORT;if(s===$_)return n.UNSIGNED_SHORT;if(s===UC)return n.INT;if(s===lo)return n.UNSIGNED_INT;if(s===Es)return n.FLOAT;if(s===tu)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===FC)return n.ALPHA;if(s===wi)return n.RGBA;if(s===zC)return n.LUMINANCE;if(s===BC)return n.LUMINANCE_ALPHA;if(s===yo)return n.DEPTH_COMPONENT;if(s===Aa)return n.DEPTH_STENCIL;if(s===zp)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===HC)return n.RED;if(s===VC)return n.RED_INTEGER;if(s===GC)return n.RG;if(s===WC)return n.RG_INTEGER;if(s===XC)return n.RGBA_INTEGER;if(s===rp||s===sp||s===op||s===ap)if(o===ht)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===rp)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===sp)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===op)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ap)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===rp)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===sp)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===op)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ap)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===oy||s===ay||s===ly||s===uy)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===oy)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===ay)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===ly)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===uy)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===jC)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===cy||s===fy)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===cy)return o===ht?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===fy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===dy||s===hy||s===py||s===my||s===gy||s===vy||s===yy||s===_y||s===xy||s===Sy||s===My||s===wy||s===Ey||s===Ty)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===dy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===hy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===py)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===my)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===gy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===vy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===yy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===_y)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===xy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Sy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===My)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===wy)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Ey)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Ty)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===lp)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===lp)return o===ht?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===YC||s===Ay||s===Cy||s===by)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===lp)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Ay)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Cy)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===by)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ga?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class mb extends Gt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Nl extends Lt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const QO={type:"move"};class U0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Nl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Nl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Nl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const w of e.hand.values()){const M=t.getJointPose(w,i),g=this._getHandJoint(f,w);M!==null&&(g.matrix.fromArray(M.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=M.radius),g.visible=M!==null}const d=f.joints["index-finger-tip"],h=f.joints["thumb-tip"],m=d.position.distanceTo(h.position),v=.02,_=.005;f.inputState.pinching&&m>v+_?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&m<=v-_&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(QO)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Nl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class gb extends an{constructor(e,t,i,r,s,o,a,c,f,d){if(d=d!==void 0?d:yo,d!==yo&&d!==Aa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===yo&&(i=lo),i===void 0&&d===Aa&&(i=ga),super(null,r,s,o,a,c,d,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:cn,this.minFilter=c!==void 0?c:cn,this.flipY=!1,this.generateMipmaps=!1}}class ek extends is{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=1,f=null,d=null,h=null,m=null,v=null,_=null;const w=t.getContextAttributes();let M=null,g=null;const x=[],S=[],T=new Set,C=new Map,P=new Gt;P.layers.enable(1),P.viewport=new At;const R=new Gt;R.layers.enable(2),R.viewport=new At;const I=[P,R],b=new mb;b.layers.enable(1),b.layers.enable(2);let L=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(X){let j=x[X];return j===void 0&&(j=new U0,x[X]=j),j.getTargetRaySpace()},this.getControllerGrip=function(X){let j=x[X];return j===void 0&&(j=new U0,x[X]=j),j.getGripSpace()},this.getHand=function(X){let j=x[X];return j===void 0&&(j=new U0,x[X]=j),j.getHandSpace()};function K(X){const j=S.indexOf(X.inputSource);if(j===-1)return;const ce=x[j];ce!==void 0&&(ce.update(X.inputSource,X.frame,f||o),ce.dispatchEvent({type:X.type,data:X.inputSource}))}function q(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",q),r.removeEventListener("inputsourceschange",te);for(let X=0;X<x.length;X++){const j=S[X];j!==null&&(S[X]=null,x[X].disconnect(j))}L=null,G=null,e.setRenderTarget(M),v=null,m=null,h=null,r=null,g=null,W.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(X){s=X,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(X){a=X,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(X){f=X},this.getBaseLayer=function(){return m!==null?m:v},this.getBinding=function(){return h},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(X){if(r=X,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",q),r.addEventListener("inputsourceschange",te),w.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const j={antialias:r.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,j),r.updateRenderState({baseLayer:v}),g=new Dr(v.framebufferWidth,v.framebufferHeight,{format:wi,type:Ns,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let j=null,ce=null,V=null;w.depth&&(V=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,j=w.stencil?Aa:yo,ce=w.stencil?ga:lo);const B={colorFormat:t.RGBA8,depthFormat:V,scaleFactor:s};h=new XRWebGLBinding(r,t),m=h.createProjectionLayer(B),r.updateRenderState({layers:[m]}),g=new Dr(m.textureWidth,m.textureHeight,{format:wi,type:Ns,depthTexture:new gb(m.textureWidth,m.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const de=e.properties.get(g);de.__ignoreDepthValues=m.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(c),f=null,o=await r.requestReferenceSpace(a),W.setContext(r),W.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function te(X){for(let j=0;j<X.removed.length;j++){const ce=X.removed[j],V=S.indexOf(ce);V>=0&&(S[V]=null,x[V].disconnect(ce))}for(let j=0;j<X.added.length;j++){const ce=X.added[j];let V=S.indexOf(ce);if(V===-1){for(let de=0;de<x.length;de++)if(de>=S.length){S.push(ce),V=de;break}else if(S[de]===null){S[de]=ce,V=de;break}if(V===-1)break}const B=x[V];B&&B.connect(ce)}}const Q=new N,ue=new N;function ne(X,j,ce){Q.setFromMatrixPosition(j.matrixWorld),ue.setFromMatrixPosition(ce.matrixWorld);const V=Q.distanceTo(ue),B=j.projectionMatrix.elements,de=ce.projectionMatrix.elements,Oe=B[14]/(B[10]-1),fe=B[14]/(B[10]+1),ye=(B[9]+1)/B[5],se=(B[9]-1)/B[5],ie=(B[8]-1)/B[0],_e=(de[8]+1)/de[0],Ce=Oe*ie,Pe=Oe*_e,Re=V/(-ie+_e),ke=Re*-ie;j.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(ke),X.translateZ(Re),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert();const Ge=Oe+Re,We=fe+Re,rt=Ce-ke,k=Pe+(V-ke),U=ye*fe/We*Ge,Z=se*fe/We*Ge;X.projectionMatrix.makePerspective(rt,k,U,Z,Ge,We),X.projectionMatrixInverse.copy(X.projectionMatrix).invert()}function D(X,j){j===null?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices(j.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}this.updateCamera=function(X){if(r===null)return;b.near=R.near=P.near=X.near,b.far=R.far=P.far=X.far,(L!==b.near||G!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),L=b.near,G=b.far);const j=X.parent,ce=b.cameras;D(b,j);for(let V=0;V<ce.length;V++)D(ce[V],j);ce.length===2?ne(b,P,R):b.projectionMatrix.copy(P.projectionMatrix),H(X,b,j)};function H(X,j,ce){ce===null?X.matrix.copy(j.matrixWorld):(X.matrix.copy(ce.matrixWorld),X.matrix.invert(),X.matrix.multiply(j.matrixWorld)),X.matrix.decompose(X.position,X.quaternion,X.scale),X.updateMatrixWorld(!0);const V=X.children;for(let B=0,de=V.length;B<de;B++)V[B].updateMatrixWorld(!0);X.projectionMatrix.copy(j.projectionMatrix),X.projectionMatrixInverse.copy(j.projectionMatrixInverse),X.isPerspectiveCamera&&(X.fov=nu*2*Math.atan(1/X.projectionMatrix.elements[5]),X.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(m===null&&v===null))return c},this.setFoveation=function(X){c=X,m!==null&&(m.fixedFoveation=X),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=X)},this.getPlanes=function(){return T};let z=null;function oe(X,j){if(d=j.getViewerPose(f||o),_=j,d!==null){const ce=d.views;v!==null&&(e.setRenderTargetFramebuffer(g,v.framebuffer),e.setRenderTarget(g));let V=!1;ce.length!==b.cameras.length&&(b.cameras.length=0,V=!0);for(let B=0;B<ce.length;B++){const de=ce[B];let Oe=null;if(v!==null)Oe=v.getViewport(de);else{const ye=h.getViewSubImage(m,de);Oe=ye.viewport,B===0&&(e.setRenderTargetTextures(g,ye.colorTexture,m.ignoreDepthValues?void 0:ye.depthStencilTexture),e.setRenderTarget(g))}let fe=I[B];fe===void 0&&(fe=new Gt,fe.layers.enable(B),fe.viewport=new At,I[B]=fe),fe.matrix.fromArray(de.transform.matrix),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.projectionMatrix.fromArray(de.projectionMatrix),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert(),fe.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),B===0&&(b.matrix.copy(fe.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),V===!0&&b.cameras.push(fe)}}for(let ce=0;ce<x.length;ce++){const V=S[ce],B=x[ce];V!==null&&B!==void 0&&B.update(V,j,f||o)}if(z&&z(X,j),j.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:j.detectedPlanes});let ce=null;for(const V of T)j.detectedPlanes.has(V)||(ce===null&&(ce=[]),ce.push(V));if(ce!==null)for(const V of ce)T.delete(V),C.delete(V),i.dispatchEvent({type:"planeremoved",data:V});for(const V of j.detectedPlanes)if(!T.has(V))T.add(V),C.set(V,j.lastChangedTime),i.dispatchEvent({type:"planeadded",data:V});else{const B=C.get(V);V.lastChangedTime>B&&(C.set(V,V.lastChangedTime),i.dispatchEvent({type:"planechanged",data:V}))}}_=null}const W=new ub;W.setAnimationLoop(oe),this.setAnimationLoop=function(X){z=X},this.dispose=function(){}}}function tk(n,e){function t(M,g){M.matrixAutoUpdate===!0&&M.updateMatrix(),g.value.copy(M.matrix)}function i(M,g){g.color.getRGB(M.fogColor.value,ob(n)),g.isFog?(M.fogNear.value=g.near,M.fogFar.value=g.far):g.isFogExp2&&(M.fogDensity.value=g.density)}function r(M,g,x,S,T){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(M,g):g.isMeshToonMaterial?(s(M,g),h(M,g)):g.isMeshPhongMaterial?(s(M,g),d(M,g)):g.isMeshStandardMaterial?(s(M,g),m(M,g),g.isMeshPhysicalMaterial&&v(M,g,T)):g.isMeshMatcapMaterial?(s(M,g),_(M,g)):g.isMeshDepthMaterial?s(M,g):g.isMeshDistanceMaterial?(s(M,g),w(M,g)):g.isMeshNormalMaterial?s(M,g):g.isLineBasicMaterial?(o(M,g),g.isLineDashedMaterial&&a(M,g)):g.isPointsMaterial?c(M,g,x,S):g.isSpriteMaterial?f(M,g):g.isShadowMaterial?(M.color.value.copy(g.color),M.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(M,g){M.opacity.value=g.opacity,g.color&&M.diffuse.value.copy(g.color),g.emissive&&M.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,t(g.alphaMap,M.alphaMapTransform)),g.bumpMap&&(M.bumpMap.value=g.bumpMap,t(g.bumpMap,M.bumpMapTransform),M.bumpScale.value=g.bumpScale,g.side===ei&&(M.bumpScale.value*=-1)),g.normalMap&&(M.normalMap.value=g.normalMap,t(g.normalMap,M.normalMapTransform),M.normalScale.value.copy(g.normalScale),g.side===ei&&M.normalScale.value.negate()),g.displacementMap&&(M.displacementMap.value=g.displacementMap,t(g.displacementMap,M.displacementMapTransform),M.displacementScale.value=g.displacementScale,M.displacementBias.value=g.displacementBias),g.emissiveMap&&(M.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,M.emissiveMapTransform)),g.specularMap&&(M.specularMap.value=g.specularMap,t(g.specularMap,M.specularMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(M.envMap.value=x,M.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=g.reflectivity,M.ior.value=g.ior,M.refractionRatio.value=g.refractionRatio),g.lightMap){M.lightMap.value=g.lightMap;const S=n.useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,M.lightMapTransform)}g.aoMap&&(M.aoMap.value=g.aoMap,M.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,M.aoMapTransform))}function o(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform))}function a(M,g){M.dashSize.value=g.dashSize,M.totalSize.value=g.dashSize+g.gapSize,M.scale.value=g.scale}function c(M,g,x,S){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.size.value=g.size*x,M.scale.value=S*.5,g.map&&(M.map.value=g.map,t(g.map,M.uvTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function f(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.rotation.value=g.rotation,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function d(M,g){M.specular.value.copy(g.specular),M.shininess.value=Math.max(g.shininess,1e-4)}function h(M,g){g.gradientMap&&(M.gradientMap.value=g.gradientMap)}function m(M,g){M.metalness.value=g.metalness,g.metalnessMap&&(M.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,M.metalnessMapTransform)),M.roughness.value=g.roughness,g.roughnessMap&&(M.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,M.roughnessMapTransform)),e.get(g).envMap&&(M.envMapIntensity.value=g.envMapIntensity)}function v(M,g,x){M.ior.value=g.ior,g.sheen>0&&(M.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),M.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(M.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,M.sheenColorMapTransform)),g.sheenRoughnessMap&&(M.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,M.sheenRoughnessMapTransform))),g.clearcoat>0&&(M.clearcoat.value=g.clearcoat,M.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(M.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,M.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(M.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ei&&M.clearcoatNormalScale.value.negate())),g.iridescence>0&&(M.iridescence.value=g.iridescence,M.iridescenceIOR.value=g.iridescenceIOR,M.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(M.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,M.iridescenceMapTransform)),g.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),g.transmission>0&&(M.transmission.value=g.transmission,M.transmissionSamplerMap.value=x.texture,M.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(M.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,M.transmissionMapTransform)),M.thickness.value=g.thickness,g.thicknessMap&&(M.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=g.attenuationDistance,M.attenuationColor.value.copy(g.attenuationColor)),M.specularIntensity.value=g.specularIntensity,M.specularColor.value.copy(g.specularColor),g.specularColorMap&&(M.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,M.specularColorMapTransform)),g.specularIntensityMap&&(M.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,M.specularIntensityMapTransform))}function _(M,g){g.matcap&&(M.matcap.value=g.matcap)}function w(M,g){const x=e.get(g).light;M.referencePosition.value.setFromMatrixPosition(x.matrixWorld),M.nearDistance.value=x.shadow.camera.near,M.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function nk(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(x,S){const T=S.program;i.uniformBlockBinding(x,T)}function f(x,S){let T=r[x.id];T===void 0&&(_(x),T=d(x),r[x.id]=T,x.addEventListener("dispose",M));const C=S.program;i.updateUBOMapping(x,C);const P=e.render.frame;s[x.id]!==P&&(m(x),s[x.id]=P)}function d(x){const S=h();x.__bindingPointIndex=S;const T=n.createBuffer(),C=x.__size,P=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,C,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,T),T}function h(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(x){const S=r[x.id],T=x.uniforms,C=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let P=0,R=T.length;P<R;P++){const I=T[P];if(v(I,P,C)===!0){const b=I.__offset,L=Array.isArray(I.value)?I.value:[I.value];let G=0;for(let K=0;K<L.length;K++){const q=L[K],te=w(q);typeof q=="number"?(I.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,b+G,I.__data)):q.isMatrix3?(I.__data[0]=q.elements[0],I.__data[1]=q.elements[1],I.__data[2]=q.elements[2],I.__data[3]=q.elements[0],I.__data[4]=q.elements[3],I.__data[5]=q.elements[4],I.__data[6]=q.elements[5],I.__data[7]=q.elements[0],I.__data[8]=q.elements[6],I.__data[9]=q.elements[7],I.__data[10]=q.elements[8],I.__data[11]=q.elements[0]):(q.toArray(I.__data,G),G+=te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,b,I.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function v(x,S,T){const C=x.value;if(T[S]===void 0){if(typeof C=="number")T[S]=C;else{const P=Array.isArray(C)?C:[C],R=[];for(let I=0;I<P.length;I++)R.push(P[I].clone());T[S]=R}return!0}else if(typeof C=="number"){if(T[S]!==C)return T[S]=C,!0}else{const P=Array.isArray(T[S])?T[S]:[T[S]],R=Array.isArray(C)?C:[C];for(let I=0;I<P.length;I++){const b=P[I];if(b.equals(R[I])===!1)return b.copy(R[I]),!0}}return!1}function _(x){const S=x.uniforms;let T=0;const C=16;let P=0;for(let R=0,I=S.length;R<I;R++){const b=S[R],L={boundary:0,storage:0},G=Array.isArray(b.value)?b.value:[b.value];for(let K=0,q=G.length;K<q;K++){const te=G[K],Q=w(te);L.boundary+=Q.boundary,L.storage+=Q.storage}if(b.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),b.__offset=T,R>0){P=T%C;const K=C-P;P!==0&&K-L.boundary<0&&(T+=C-P,b.__offset=T)}T+=L.storage}return P=T%C,P>0&&(T+=C-P),x.__size=T,x.__cache={},this}function w(x){const S={boundary:0,storage:0};return typeof x=="number"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function M(x){const S=x.target;S.removeEventListener("dispose",M);const T=o.indexOf(S.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:c,update:f,dispose:g}}function ik(){const n=Jc("canvas");return n.style.display="block",n}class ax{constructor(e={}){const{canvas:t=ik(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let m;i!==null?m=i.getContextAttributes().alpha:m=o;let v=null,_=null;const w=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=ht,this.useLegacyLights=!0,this.toneMapping=Rr,this.toneMappingExposure=1;const g=this;let x=!1,S=0,T=0,C=null,P=-1,R=null;const I=new At,b=new At;let L=null,G=t.width,K=t.height,q=1,te=null,Q=null;const ue=new At(0,0,G,K),ne=new At(0,0,G,K);let D=!1;const H=new gm;let z=!1,oe=!1,W=null;const X=new ut,j=new N,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return C===null?q:1}let B=i;function de(O,le){for(let Se=0;Se<O.length;Se++){const re=O[Se],we=t.getContext(re,le);if(we!==null)return we}return null}try{const O={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${cm}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",Qe,!1),t.addEventListener("webglcontextcreationerror",ct,!1),B===null){const le=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&le.shift(),B=de(le,O),B===null)throw de(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}B.getShaderPrecisionFormat===void 0&&(B.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Oe,fe,ye,se,ie,_e,Ce,Pe,Re,ke,Ge,We,rt,k,U,Z,Me,be,Ie,$e,Be,xe,Ye,Y;function ve(){Oe=new _U(B),fe=new hU(B,Oe,e),Oe.init(fe),xe=new pb(B,Oe,fe),ye=new KO(B,Oe,fe),se=new MU(B),ie=new zO,_e=new JO(B,Oe,ye,ie,fe,xe,se),Ce=new mU(g),Pe=new yU(g),Re=new NI(B,fe),Ye=new fU(B,Oe,Re,fe),ke=new xU(B,Re,se,Ye),Ge=new AU(B,ke,Re,se),Ie=new TU(B,fe,_e),Z=new pU(ie),We=new FO(g,Ce,Pe,Oe,fe,Ye,Z),rt=new tk(g,ie),k=new HO,U=new YO(Oe,fe),be=new cU(g,Ce,Pe,ye,Ge,m,c),Me=new ZO(g,Ge,fe),Y=new nk(B,se,fe,ye),$e=new dU(B,Oe,se,fe),Be=new SU(B,Oe,se,fe),se.programs=We.programs,g.capabilities=fe,g.extensions=Oe,g.properties=ie,g.renderLists=k,g.shadowMap=Me,g.state=ye,g.info=se}ve();const Te=new ek(g,B);this.xr=Te,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){const O=Oe.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Oe.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(O){O!==void 0&&(q=O,this.setSize(G,K,!1))},this.getSize=function(O){return O.set(G,K)},this.setSize=function(O,le,Se=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}G=O,K=le,t.width=Math.floor(O*q),t.height=Math.floor(le*q),Se===!0&&(t.style.width=O+"px",t.style.height=le+"px"),this.setViewport(0,0,O,le)},this.getDrawingBufferSize=function(O){return O.set(G*q,K*q).floor()},this.setDrawingBufferSize=function(O,le,Se){G=O,K=le,q=Se,t.width=Math.floor(O*Se),t.height=Math.floor(le*Se),this.setViewport(0,0,O,le)},this.getCurrentViewport=function(O){return O.copy(I)},this.getViewport=function(O){return O.copy(ue)},this.setViewport=function(O,le,Se,re){O.isVector4?ue.set(O.x,O.y,O.z,O.w):ue.set(O,le,Se,re),ye.viewport(I.copy(ue).multiplyScalar(q).floor())},this.getScissor=function(O){return O.copy(ne)},this.setScissor=function(O,le,Se,re){O.isVector4?ne.set(O.x,O.y,O.z,O.w):ne.set(O,le,Se,re),ye.scissor(b.copy(ne).multiplyScalar(q).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(O){ye.setScissorTest(D=O)},this.setOpaqueSort=function(O){te=O},this.setTransparentSort=function(O){Q=O},this.getClearColor=function(O){return O.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(O=!0,le=!0,Se=!0){let re=0;O&&(re|=B.COLOR_BUFFER_BIT),le&&(re|=B.DEPTH_BUFFER_BIT),Se&&(re|=B.STENCIL_BUFFER_BIT),B.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",Qe,!1),t.removeEventListener("webglcontextcreationerror",ct,!1),k.dispose(),U.dispose(),ie.dispose(),Ce.dispose(),Pe.dispose(),Ge.dispose(),Ye.dispose(),Y.dispose(),We.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",Ze),Te.removeEventListener("sessionend",It),W&&(W.dispose(),W=null),Dt.stop()};function De(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const O=se.autoReset,le=Me.enabled,Se=Me.autoUpdate,re=Me.needsUpdate,we=Me.type;ve(),se.autoReset=O,Me.enabled=le,Me.autoUpdate=Se,Me.needsUpdate=re,Me.type=we}function ct(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function Ft(O){const le=O.target;le.removeEventListener("dispose",Ft),$(le)}function $(O){pe(O),ie.remove(O)}function pe(O){const le=ie.get(O).programs;le!==void 0&&(le.forEach(function(Se){We.releaseProgram(Se)}),O.isShaderMaterial&&We.releaseShaderCache(O))}this.renderBufferDirect=function(O,le,Se,re,we,et){le===null&&(le=ce);const nt=we.isMesh&&we.matrixWorld.determinant()<0,it=zf(O,le,Se,re,we);ye.setMaterial(re,nt);let ft=Se.index,yt=1;re.wireframe===!0&&(ft=ke.getWireframeAttribute(Se),yt=2);const _t=Se.drawRange,St=Se.attributes.position;let Nt=_t.start*yt,Dn=(_t.start+_t.count)*yt;et!==null&&(Nt=Math.max(Nt,et.start*yt),Dn=Math.min(Dn,(et.start+et.count)*yt)),ft!==null?(Nt=Math.max(Nt,0),Dn=Math.min(Dn,ft.count)):St!=null&&(Nt=Math.max(Nt,0),Dn=Math.min(Dn,St.count));const bi=Dn-Nt;if(bi<0||bi===1/0)return;Ye.setup(we,re,it,Se,ft);let hr,Vt=$e;if(ft!==null&&(hr=Re.get(ft),Vt=Be,Vt.setIndex(hr)),we.isMesh)re.wireframe===!0?(ye.setLineWidth(re.wireframeLinewidth*V()),Vt.setMode(B.LINES)):Vt.setMode(B.TRIANGLES);else if(we.isLine){let Mt=re.linewidth;Mt===void 0&&(Mt=1),ye.setLineWidth(Mt*V()),we.isLineSegments?Vt.setMode(B.LINES):we.isLineLoop?Vt.setMode(B.LINE_LOOP):Vt.setMode(B.LINE_STRIP)}else we.isPoints?Vt.setMode(B.POINTS):we.isSprite&&Vt.setMode(B.TRIANGLES);if(we.isInstancedMesh)Vt.renderInstances(Nt,bi,we.count);else if(Se.isInstancedBufferGeometry){const Mt=Se._maxInstanceCount!==void 0?Se._maxInstanceCount:1/0,Uo=Math.min(Se.instanceCount,Mt);Vt.renderInstances(Nt,bi,Uo)}else Vt.render(Nt,bi)},this.compile=function(O,le){function Se(re,we,et){re.transparent===!0&&re.side===Cr&&re.forceSinglePass===!1?(re.side=ei,re.needsUpdate=!0,Na(re,we,et),re.side=Ds,re.needsUpdate=!0,Na(re,we,et),re.side=Cr):Na(re,we,et)}_=U.get(O),_.init(),M.push(_),O.traverseVisible(function(re){re.isLight&&re.layers.test(le.layers)&&(_.pushLight(re),re.castShadow&&_.pushShadow(re))}),_.setupLights(g.useLegacyLights),O.traverse(function(re){const we=re.material;if(we)if(Array.isArray(we))for(let et=0;et<we.length;et++){const nt=we[et];Se(nt,O,re)}else Se(we,O,re)}),M.pop(),_=null};let Ae=null;function He(O){Ae&&Ae(O)}function Ze(){Dt.stop()}function It(){Dt.start()}const Dt=new ub;Dt.setAnimationLoop(He),typeof self<"u"&&Dt.setContext(self),this.setAnimationLoop=function(O){Ae=O,Te.setAnimationLoop(O),O===null?Dt.stop():Dt.start()},Te.addEventListener("sessionstart",Ze),Te.addEventListener("sessionend",It),this.render=function(O,le){if(le!==void 0&&le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(le),le=Te.getCamera()),O.isScene===!0&&O.onBeforeRender(g,O,le,C),_=U.get(O,M.length),_.init(),M.push(_),X.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),H.setFromProjectionMatrix(X),oe=this.localClippingEnabled,z=Z.init(this.clippingPlanes,oe),v=k.get(O,w.length),v.init(),w.push(v),En(O,le,0,g.sortObjects),v.finish(),g.sortObjects===!0&&v.sort(te,Q),z===!0&&Z.beginShadows();const Se=_.state.shadowsArray;if(Me.render(Se,O,le),z===!0&&Z.endShadows(),this.info.autoReset===!0&&this.info.reset(),be.render(v,O),_.setupLights(g.useLegacyLights),le.isArrayCamera){const re=le.cameras;for(let we=0,et=re.length;we<et;we++){const nt=re[we];dr(v,O,nt,nt.viewport)}}else dr(v,O,le);C!==null&&(_e.updateMultisampleRenderTarget(C),_e.updateRenderTargetMipmap(C)),O.isScene===!0&&O.onAfterRender(g,O,le),Ye.resetDefaultState(),P=-1,R=null,M.pop(),M.length>0?_=M[M.length-1]:_=null,w.pop(),w.length>0?v=w[w.length-1]:v=null};function En(O,le,Se,re){if(O.visible===!1)return;if(O.layers.test(le.layers)){if(O.isGroup)Se=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(le);else if(O.isLight)_.pushLight(O),O.castShadow&&_.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||H.intersectsSprite(O)){re&&j.setFromMatrixPosition(O.matrixWorld).applyMatrix4(X);const nt=Ge.update(O),it=O.material;it.visible&&v.push(O,nt,it,Se,j.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||H.intersectsObject(O))){O.isSkinnedMesh&&O.skeleton.frame!==se.render.frame&&(O.skeleton.update(),O.skeleton.frame=se.render.frame);const nt=Ge.update(O),it=O.material;if(re&&(nt.boundingSphere===null&&nt.computeBoundingSphere(),j.copy(nt.boundingSphere.center).applyMatrix4(O.matrixWorld).applyMatrix4(X)),Array.isArray(it)){const ft=nt.groups;for(let yt=0,_t=ft.length;yt<_t;yt++){const St=ft[yt],Nt=it[St.materialIndex];Nt&&Nt.visible&&v.push(O,nt,Nt,Se,j.z,St)}}else it.visible&&v.push(O,nt,it,Se,j.z,null)}}const et=O.children;for(let nt=0,it=et.length;nt<it;nt++)En(et[nt],le,Se,re)}function dr(O,le,Se,re){const we=O.opaque,et=O.transmissive,nt=O.transparent;_.setupLightsView(Se),z===!0&&Z.setGlobalState(g.clippingPlanes,Se),et.length>0&&Yt(we,et,le,Se),re&&ye.viewport(I.copy(re)),we.length>0&&ri(we,le,Se),et.length>0&&ri(et,le,Se),nt.length>0&&ri(nt,le,Se),ye.buffers.depth.setTest(!0),ye.buffers.depth.setMask(!0),ye.buffers.color.setMask(!0),ye.setPolygonOffset(!1)}function Yt(O,le,Se,re){if(W===null){const it=fe.isWebGL2;W=new Dr(1024,1024,{generateMipmaps:!0,type:Oe.has("EXT_color_buffer_half_float")?tu:Ns,minFilter:Ao,samples:it&&a===!0?4:0})}const we=g.getRenderTarget();g.setRenderTarget(W),g.clear();const et=g.toneMapping;g.toneMapping=Rr,ri(O,Se,re),_e.updateMultisampleRenderTarget(W),_e.updateRenderTargetMipmap(W);let nt=!1;for(let it=0,ft=le.length;it<ft;it++){const yt=le[it],_t=yt.object,St=yt.geometry,Nt=yt.material,Dn=yt.group;if(Nt.side===Cr&&_t.layers.test(re.layers)){const bi=Nt.side;Nt.side=ei,Nt.needsUpdate=!0,Yi(_t,Se,re,St,Nt,Dn),Nt.side=bi,Nt.needsUpdate=!0,nt=!0}}nt===!0&&(_e.updateMultisampleRenderTarget(W),_e.updateRenderTargetMipmap(W)),g.setRenderTarget(we),g.toneMapping=et}function ri(O,le,Se){const re=le.isScene===!0?le.overrideMaterial:null;for(let we=0,et=O.length;we<et;we++){const nt=O[we],it=nt.object,ft=nt.geometry,yt=re===null?nt.material:re,_t=nt.group;it.layers.test(Se.layers)&&Yi(it,le,Se,ft,yt,_t)}}function Yi(O,le,Se,re,we,et){O.onBeforeRender(g,le,Se,re,we,et),O.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),we.onBeforeRender(g,le,Se,re,O,et),we.transparent===!0&&we.side===Cr&&we.forceSinglePass===!1?(we.side=ei,we.needsUpdate=!0,g.renderBufferDirect(Se,le,re,we,O,et),we.side=Ds,we.needsUpdate=!0,g.renderBufferDirect(Se,le,re,we,O,et),we.side=Cr):g.renderBufferDirect(Se,le,re,we,O,et),O.onAfterRender(g,le,Se,re,we,et)}function Na(O,le,Se){le.isScene!==!0&&(le=ce);const re=ie.get(O),we=_.state.lights,et=_.state.shadowsArray,nt=we.state.version,it=We.getParameters(O,we.state,et,le,Se),ft=We.getProgramCacheKey(it);let yt=re.programs;re.environment=O.isMeshStandardMaterial?le.environment:null,re.fog=le.fog,re.envMap=(O.isMeshStandardMaterial?Pe:Ce).get(O.envMap||re.environment),yt===void 0&&(O.addEventListener("dispose",Ft),yt=new Map,re.programs=yt);let _t=yt.get(ft);if(_t!==void 0){if(re.currentProgram===_t&&re.lightsStateVersion===nt)return Ff(O,it),_t}else it.uniforms=We.getUniforms(O),O.onBuild(Se,it,g),O.onBeforeCompile(it,g),_t=We.acquireProgram(it,ft),yt.set(ft,_t),re.uniforms=it.uniforms;const St=re.uniforms;(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(St.clippingPlanes=Z.uniform),Ff(O,it),re.needsLights=Fm(O),re.lightsStateVersion=nt,re.needsLights&&(St.ambientLightColor.value=we.state.ambient,St.lightProbe.value=we.state.probe,St.directionalLights.value=we.state.directional,St.directionalLightShadows.value=we.state.directionalShadow,St.spotLights.value=we.state.spot,St.spotLightShadows.value=we.state.spotShadow,St.rectAreaLights.value=we.state.rectArea,St.ltc_1.value=we.state.rectAreaLTC1,St.ltc_2.value=we.state.rectAreaLTC2,St.pointLights.value=we.state.point,St.pointLightShadows.value=we.state.pointShadow,St.hemisphereLights.value=we.state.hemi,St.directionalShadowMap.value=we.state.directionalShadowMap,St.directionalShadowMatrix.value=we.state.directionalShadowMatrix,St.spotShadowMap.value=we.state.spotShadowMap,St.spotLightMatrix.value=we.state.spotLightMatrix,St.spotLightMap.value=we.state.spotLightMap,St.pointShadowMap.value=we.state.pointShadowMap,St.pointShadowMatrix.value=we.state.pointShadowMatrix);const Nt=_t.getUniforms(),Dn=fp.seqWithValue(Nt.seq,St);return re.currentProgram=_t,re.uniformsList=Dn,_t}function Ff(O,le){const Se=ie.get(O);Se.outputColorSpace=le.outputColorSpace,Se.instancing=le.instancing,Se.skinning=le.skinning,Se.morphTargets=le.morphTargets,Se.morphNormals=le.morphNormals,Se.morphColors=le.morphColors,Se.morphTargetsCount=le.morphTargetsCount,Se.numClippingPlanes=le.numClippingPlanes,Se.numIntersection=le.numClipIntersection,Se.vertexAlphas=le.vertexAlphas,Se.vertexTangents=le.vertexTangents,Se.toneMapping=le.toneMapping}function zf(O,le,Se,re,we){le.isScene!==!0&&(le=ce),_e.resetTextureUnits();const et=le.fog,nt=re.isMeshStandardMaterial?le.environment:null,it=C===null?g.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Ir,ft=(re.isMeshStandardMaterial?Pe:Ce).get(re.envMap||nt),yt=re.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,_t=!!re.normalMap&&!!Se.attributes.tangent,St=!!Se.morphAttributes.position,Nt=!!Se.morphAttributes.normal,Dn=!!Se.morphAttributes.color,bi=re.toneMapped?g.toneMapping:Rr,hr=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,Vt=hr!==void 0?hr.length:0,Mt=ie.get(re),Uo=_.state.lights;if(z===!0&&(oe===!0||O!==R)){const zt=O===R&&re.id===P;Z.setState(re,O,zt)}let hn=!1;re.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==Uo.state.version||Mt.outputColorSpace!==it||we.isInstancedMesh&&Mt.instancing===!1||!we.isInstancedMesh&&Mt.instancing===!0||we.isSkinnedMesh&&Mt.skinning===!1||!we.isSkinnedMesh&&Mt.skinning===!0||Mt.envMap!==ft||re.fog===!0&&Mt.fog!==et||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==Z.numPlanes||Mt.numIntersection!==Z.numIntersection)||Mt.vertexAlphas!==yt||Mt.vertexTangents!==_t||Mt.morphTargets!==St||Mt.morphNormals!==Nt||Mt.morphColors!==Dn||Mt.toneMapping!==bi||fe.isWebGL2===!0&&Mt.morphTargetsCount!==Vt)&&(hn=!0):(hn=!0,Mt.__version=re.version);let pr=Mt.currentProgram;hn===!0&&(pr=Na(re,le,we));let ss=!1,mi=!1,Ut=!1;const dt=pr.getUniforms(),Vn=Mt.uniforms;if(ye.useProgram(pr.program)&&(ss=!0,mi=!0,Ut=!0),re.id!==P&&(P=re.id,mi=!0),ss||R!==O){if(dt.setValue(B,"projectionMatrix",O.projectionMatrix),fe.logarithmicDepthBuffer&&dt.setValue(B,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),R!==O&&(R=O,mi=!0,Ut=!0),re.isShaderMaterial||re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshStandardMaterial||re.envMap){const zt=dt.map.cameraPosition;zt!==void 0&&zt.setValue(B,j.setFromMatrixPosition(O.matrixWorld))}(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial)&&dt.setValue(B,"isOrthographic",O.isOrthographicCamera===!0),(re.isMeshPhongMaterial||re.isMeshToonMaterial||re.isMeshLambertMaterial||re.isMeshBasicMaterial||re.isMeshStandardMaterial||re.isShaderMaterial||re.isShadowMaterial||we.isSkinnedMesh)&&dt.setValue(B,"viewMatrix",O.matrixWorldInverse)}if(we.isSkinnedMesh){dt.setOptional(B,we,"bindMatrix"),dt.setOptional(B,we,"bindMatrixInverse");const zt=we.skeleton;zt&&(fe.floatVertexTextures?(zt.boneTexture===null&&zt.computeBoneTexture(),dt.setValue(B,"boneTexture",zt.boneTexture,_e),dt.setValue(B,"boneTextureSize",zt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const pn=Se.morphAttributes;if((pn.position!==void 0||pn.normal!==void 0||pn.color!==void 0&&fe.isWebGL2===!0)&&Ie.update(we,Se,pr),(mi||Mt.receiveShadow!==we.receiveShadow)&&(Mt.receiveShadow=we.receiveShadow,dt.setValue(B,"receiveShadow",we.receiveShadow)),re.isMeshGouraudMaterial&&re.envMap!==null&&(Vn.envMap.value=ft,Vn.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),mi&&(dt.setValue(B,"toneMappingExposure",g.toneMappingExposure),Mt.needsLights&&_u(Vn,Ut),et&&re.fog===!0&&rt.refreshFogUniforms(Vn,et),rt.refreshMaterialUniforms(Vn,re,q,K,W),fp.upload(B,Mt.uniformsList,Vn,_e)),re.isShaderMaterial&&re.uniformsNeedUpdate===!0&&(fp.upload(B,Mt.uniformsList,Vn,_e),re.uniformsNeedUpdate=!1),re.isSpriteMaterial&&dt.setValue(B,"center",we.center),dt.setValue(B,"modelViewMatrix",we.modelViewMatrix),dt.setValue(B,"normalMatrix",we.normalMatrix),dt.setValue(B,"modelMatrix",we.matrixWorld),re.isShaderMaterial||re.isRawShaderMaterial){const zt=re.uniformsGroups;for(let mr=0,Fs=zt.length;mr<Fs;mr++)if(fe.isWebGL2){const Nn=zt[mr];Y.update(Nn,pr),Y.bind(Nn,pr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return pr}function _u(O,le){O.ambientLightColor.needsUpdate=le,O.lightProbe.needsUpdate=le,O.directionalLights.needsUpdate=le,O.directionalLightShadows.needsUpdate=le,O.pointLights.needsUpdate=le,O.pointLightShadows.needsUpdate=le,O.spotLights.needsUpdate=le,O.spotLightShadows.needsUpdate=le,O.rectAreaLights.needsUpdate=le,O.hemisphereLights.needsUpdate=le}function Fm(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(O,le,Se){ie.get(O.texture).__webglTexture=le,ie.get(O.depthTexture).__webglTexture=Se;const re=ie.get(O);re.__hasExternalTextures=!0,re.__hasExternalTextures&&(re.__autoAllocateDepthBuffer=Se===void 0,re.__autoAllocateDepthBuffer||Oe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),re.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,le){const Se=ie.get(O);Se.__webglFramebuffer=le,Se.__useDefaultFramebuffer=le===void 0},this.setRenderTarget=function(O,le=0,Se=0){C=O,S=le,T=Se;let re=!0,we=null,et=!1,nt=!1;if(O){const ft=ie.get(O);ft.__useDefaultFramebuffer!==void 0?(ye.bindFramebuffer(B.FRAMEBUFFER,null),re=!1):ft.__webglFramebuffer===void 0?_e.setupRenderTarget(O):ft.__hasExternalTextures&&_e.rebindTextures(O,ie.get(O.texture).__webglTexture,ie.get(O.depthTexture).__webglTexture);const yt=O.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(nt=!0);const _t=ie.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(we=_t[le],et=!0):fe.isWebGL2&&O.samples>0&&_e.useMultisampledRTT(O)===!1?we=ie.get(O).__webglMultisampledFramebuffer:we=_t,I.copy(O.viewport),b.copy(O.scissor),L=O.scissorTest}else I.copy(ue).multiplyScalar(q).floor(),b.copy(ne).multiplyScalar(q).floor(),L=D;if(ye.bindFramebuffer(B.FRAMEBUFFER,we)&&fe.drawBuffers&&re&&ye.drawBuffers(O,we),ye.viewport(I),ye.scissor(b),ye.setScissorTest(L),et){const ft=ie.get(O.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+le,ft.__webglTexture,Se)}else if(nt){const ft=ie.get(O.texture),yt=le||0;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,ft.__webglTexture,Se||0,yt)}P=-1},this.readRenderTargetPixels=function(O,le,Se,re,we,et,nt){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let it=ie.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&nt!==void 0&&(it=it[nt]),it){ye.bindFramebuffer(B.FRAMEBUFFER,it);try{const ft=O.texture,yt=ft.format,_t=ft.type;if(yt!==wi&&xe.convert(yt)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const St=_t===tu&&(Oe.has("EXT_color_buffer_half_float")||fe.isWebGL2&&Oe.has("EXT_color_buffer_float"));if(_t!==Ns&&xe.convert(_t)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_TYPE)&&!(_t===Es&&(fe.isWebGL2||Oe.has("OES_texture_float")||Oe.has("WEBGL_color_buffer_float")))&&!St){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=O.width-re&&Se>=0&&Se<=O.height-we&&B.readPixels(le,Se,re,we,xe.convert(yt),xe.convert(_t),et)}finally{const ft=C!==null?ie.get(C).__webglFramebuffer:null;ye.bindFramebuffer(B.FRAMEBUFFER,ft)}}},this.copyFramebufferToTexture=function(O,le,Se=0){const re=Math.pow(2,-Se),we=Math.floor(le.image.width*re),et=Math.floor(le.image.height*re);_e.setTexture2D(le,0),B.copyTexSubImage2D(B.TEXTURE_2D,Se,0,0,O.x,O.y,we,et),ye.unbindTexture()},this.copyTextureToTexture=function(O,le,Se,re=0){const we=le.image.width,et=le.image.height,nt=xe.convert(Se.format),it=xe.convert(Se.type);_e.setTexture2D(Se,0),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,Se.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,Se.unpackAlignment),le.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,re,O.x,O.y,we,et,nt,it,le.image.data):le.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,re,O.x,O.y,le.mipmaps[0].width,le.mipmaps[0].height,nt,le.mipmaps[0].data):B.texSubImage2D(B.TEXTURE_2D,re,O.x,O.y,nt,it,le.image),re===0&&Se.generateMipmaps&&B.generateMipmap(B.TEXTURE_2D),ye.unbindTexture()},this.copyTextureToTexture3D=function(O,le,Se,re,we=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const et=O.max.x-O.min.x+1,nt=O.max.y-O.min.y+1,it=O.max.z-O.min.z+1,ft=xe.convert(re.format),yt=xe.convert(re.type);let _t;if(re.isData3DTexture)_e.setTexture3D(re,0),_t=B.TEXTURE_3D;else if(re.isDataArrayTexture)_e.setTexture2DArray(re,0),_t=B.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,re.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,re.unpackAlignment);const St=B.getParameter(B.UNPACK_ROW_LENGTH),Nt=B.getParameter(B.UNPACK_IMAGE_HEIGHT),Dn=B.getParameter(B.UNPACK_SKIP_PIXELS),bi=B.getParameter(B.UNPACK_SKIP_ROWS),hr=B.getParameter(B.UNPACK_SKIP_IMAGES),Vt=Se.isCompressedTexture?Se.mipmaps[0]:Se.image;B.pixelStorei(B.UNPACK_ROW_LENGTH,Vt.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Vt.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,O.min.x),B.pixelStorei(B.UNPACK_SKIP_ROWS,O.min.y),B.pixelStorei(B.UNPACK_SKIP_IMAGES,O.min.z),Se.isDataTexture||Se.isData3DTexture?B.texSubImage3D(_t,we,le.x,le.y,le.z,et,nt,it,ft,yt,Vt.data):Se.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),B.compressedTexSubImage3D(_t,we,le.x,le.y,le.z,et,nt,it,ft,Vt.data)):B.texSubImage3D(_t,we,le.x,le.y,le.z,et,nt,it,ft,yt,Vt),B.pixelStorei(B.UNPACK_ROW_LENGTH,St),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Nt),B.pixelStorei(B.UNPACK_SKIP_PIXELS,Dn),B.pixelStorei(B.UNPACK_SKIP_ROWS,bi),B.pixelStorei(B.UNPACK_SKIP_IMAGES,hr),we===0&&re.generateMipmaps&&B.generateMipmap(_t),ye.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?_e.setTextureCube(O,0):O.isData3DTexture?_e.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?_e.setTexture2DArray(O,0):_e.setTexture2D(O,0),ye.unbindTexture()},this.resetState=function(){S=0,T=0,C=null,ye.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ht?_o:K_}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===_o?ht:Ir}}class vb extends ax{}vb.prototype.isWebGL1Renderer=!0;class ym{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ve(e),this.density=t}clone(){return new ym(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class _m{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ve(e),this.near=t,this.far=i}clone(){return new _m(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Bp extends Lt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class xm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Kc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ai=new N;class Fi{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ai.fromBufferAttribute(this,t),ai.applyMatrix4(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ai.fromBufferAttribute(this,t),ai.applyNormalMatrix(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ai.fromBufferAttribute(this,t),ai.transformDirection(e),this.setXYZ(t,ai.x,ai.y,ai.z);return this}setX(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=gt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ki(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ki(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ki(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ki(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=gt(t,this.array),i=gt(i,this.array),r=gt(r,this.array),s=gt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ht(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Fi(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class lx extends Hn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let cl;const Ku=new N,fl=new N,dl=new N,hl=new Ee,Ju=new Ee,yb=new ut,vh=new N,Qu=new N,yh=new N,xw=new Ee,O0=new Ee,Sw=new Ee;class _b extends Lt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",cl===void 0){cl=new vt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new xm(t,5);cl.setIndex([0,1,2,0,2,3]),cl.setAttribute("position",new Fi(i,3,0,!1)),cl.setAttribute("uv",new Fi(i,2,3,!1))}this.geometry=cl,this.material=e!==void 0?e:new lx,this.center=new Ee(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fl.setFromMatrixScale(this.matrixWorld),yb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&fl.multiplyScalar(-dl.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;_h(vh.set(-.5,-.5,0),dl,o,fl,r,s),_h(Qu.set(.5,-.5,0),dl,o,fl,r,s),_h(yh.set(.5,.5,0),dl,o,fl,r,s),xw.set(0,0),O0.set(1,0),Sw.set(1,1);let a=e.ray.intersectTriangle(vh,Qu,yh,!1,Ku);if(a===null&&(_h(Qu.set(-.5,.5,0),dl,o,fl,r,s),O0.set(0,1),a=e.ray.intersectTriangle(vh,yh,Qu,!1,Ku),a===null))return;const c=e.ray.origin.distanceTo(Ku);c<e.near||c>e.far||t.push({distance:c,point:Ku.clone(),uv:Mi.getInterpolation(Ku,vh,Qu,yh,xw,O0,Sw,new Ee),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function _h(n,e,t,i,r,s){hl.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ju.x=s*hl.x-r*hl.y,Ju.y=r*hl.x+s*hl.y):Ju.copy(hl),n.copy(e),n.x+=Ju.x,n.y+=Ju.y,n.applyMatrix4(yb)}const xh=new N,Mw=new N;class xb extends Lt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){xh.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(xh);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){xh.setFromMatrixPosition(e.matrixWorld),Mw.setFromMatrixPosition(this.matrixWorld);const i=xh.distanceTo(Mw)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const ww=new N,Ew=new At,Tw=new At,rk=new N,Aw=new ut,pl=new N;class Sb extends Rn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ut,this.bindMatrixInverse=new ut,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Wi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)pl.fromBufferAttribute(t,i),this.applyBoneTransform(i,pl),this.boundingBox.expandByPoint(pl)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new fr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)pl.fromBufferAttribute(t,i),this.applyBoneTransform(i,pl),this.boundingSphere.expandByPoint(pl)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new At,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;Ew.fromBufferAttribute(r.attributes.skinIndex,e),Tw.fromBufferAttribute(r.attributes.skinWeight,e),ww.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Tw.getComponent(s);if(o!==0){const a=Ew.getComponent(s);Aw.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(rk.copy(ww).applyMatrix4(Aw),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class ux extends Lt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xl extends an{constructor(e=null,t=1,i=1,r,s,o,a,c,f=cn,d=cn,h,m){super(null,o,a,c,f,d,r,s,h,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Cw=new ut,sk=new ut;class Sm{constructor(e=[],t=[]){this.uuid=Bi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ut)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ut;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sk;Cw.multiplyMatrices(a,t[s]),Cw.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Sm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=tb(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Xl(t,e,e,wi,Es);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new ux),this.bones.push(o),this.boneInverses.push(new ut().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class ru extends Ht{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ml=new ut,bw=new ut,Sh=[],Pw=new Wi,ok=new ut,ec=new Rn,tc=new fr;class Mb extends Rn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ru(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,ok)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Wi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ml),Pw.copy(e.boundingBox).applyMatrix4(ml),this.boundingBox.union(Pw)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new fr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ml),tc.copy(e.boundingSphere).applyMatrix4(ml),this.boundingSphere.union(tc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(ec.geometry=this.geometry,ec.material=this.material,ec.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),tc.copy(this.boundingSphere),tc.applyMatrix4(i),e.ray.intersectsSphere(tc)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,ml),bw.multiplyMatrices(i,ml),ec.matrixWorld=bw,ec.raycast(e,Sh);for(let o=0,a=Sh.length;o<a;o++){const c=Sh[o];c.instanceId=s,c.object=this,t.push(c)}Sh.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ru(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class pi extends Hn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ve(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Rw=new N,Lw=new N,Iw=new ut,k0=new yf,Mh=new fr;let Co=class extends Lt{constructor(e=new vt,t=new pi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Rw.fromBufferAttribute(t,r-1),Lw.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Rw.distanceTo(Lw);e.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Mh.copy(i.boundingSphere),Mh.applyMatrix4(r),Mh.radius+=s,e.ray.intersectsSphere(Mh)===!1)return;Iw.copy(r).invert(),k0.copy(e.ray).applyMatrix4(Iw);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,f=new N,d=new N,h=new N,m=new N,v=this.isLineSegments?2:1,_=i.index,M=i.attributes.position;if(_!==null){const g=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count);for(let S=g,T=x-1;S<T;S+=v){const C=_.getX(S),P=_.getX(S+1);if(f.fromBufferAttribute(M,C),d.fromBufferAttribute(M,P),k0.distanceSqToSegment(f,d,m,h)>c)continue;m.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(m);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(M.count,o.start+o.count);for(let S=g,T=x-1;S<T;S+=v){if(f.fromBufferAttribute(M,S),d.fromBufferAttribute(M,S+1),k0.distanceSqToSegment(f,d,m,h)>c)continue;m.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(m);P<e.near||P>e.far||t.push({distance:P,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const Dw=new N,Nw=new N;class rs extends Co{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Dw.fromBufferAttribute(t,r),Nw.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Dw.distanceTo(Nw);e.setAttribute("lineDistance",new qe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wb extends Co{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class cx extends Hn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Uw=new ut,Dy=new yf,wh=new fr,Eh=new N;class Eb extends Lt{constructor(e=new vt,t=new cx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),wh.copy(i.boundingSphere),wh.applyMatrix4(r),wh.radius+=s,e.ray.intersectsSphere(wh)===!1)return;Uw.copy(r).invert(),Dy.copy(e.ray).applyMatrix4(Uw);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,f=i.index,h=i.attributes.position;if(f!==null){const m=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let _=m,w=v;_<w;_++){const M=f.getX(_);Eh.fromBufferAttribute(h,M),Ow(Eh,M,c,r,e,t,this)}}else{const m=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let _=m,w=v;_<w;_++)Eh.fromBufferAttribute(h,_),Ow(Eh,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Ow(n,e,t,i,r,s,o){const a=Dy.distanceSqToPoint(n);if(a<t){const c=new N;Dy.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class ak extends an{constructor(e,t,i,r,s,o,a,c,f){super(e,t,i,r,s,o,a,c,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:dn,this.magFilter=s!==void 0?s:dn,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class lk extends an{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=cn,this.minFilter=cn,this.generateMipmaps=!1,this.needsUpdate=!0}}class fx extends an{constructor(e,t,i,r,s,o,a,c,f,d,h,m){super(null,o,a,c,f,d,r,s,h,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class uk extends fx{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Qn}}class ck extends an{constructor(e,t,i,r,s,o,a,c,f){super(e,t,i,r,s,o,a,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ur{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,c=s-1,f;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),f=i[r]-o,f<0)a=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const d=i[r],m=i[r+1]-d,v=(o-d)/m;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Ee:new N);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new N,r=[],s=[],o=[],a=new N,c=new ut;for(let v=0;v<=e;v++){const _=v/e;r[v]=this.getTangentAt(_,new N)}s[0]=new N,o[0]=new N;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),m=Math.abs(r[0].z);d<=f&&(f=d,i.set(1,0,0)),h<=f&&(f=h,i.set(0,1,0)),m<=f&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),a.crossVectors(r[v-1],r[v]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(on(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(a,_))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos(on(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(v=-v);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],v*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Mm extends Ur{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new Ee,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),f=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),m=c-this.aX,v=f-this.aY;c=m*d-v*h+this.aX,f=m*h+v*d+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Tb extends Mm{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function dx(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,f){r(o,a,f*(a-s),f*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,f,d,h){let m=(o-s)/f-(a-s)/(f+d)+(a-o)/d,v=(a-o)/d-(c-o)/(d+h)+(c-a)/h;m*=d,v*=d,r(o,a,m,v)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Th=new N,F0=new dx,z0=new dx,B0=new dx;class Ab extends Ur{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new N){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let f,d;this.closed||a>0?f=r[(a-1)%s]:(Th.subVectors(r[0],r[1]).add(r[0]),f=Th);const h=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(Th.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Th),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let _=Math.pow(f.distanceToSquared(h),v),w=Math.pow(h.distanceToSquared(m),v),M=Math.pow(m.distanceToSquared(d),v);w<1e-4&&(w=1),_<1e-4&&(_=w),M<1e-4&&(M=w),F0.initNonuniformCatmullRom(f.x,h.x,m.x,d.x,_,w,M),z0.initNonuniformCatmullRom(f.y,h.y,m.y,d.y,_,w,M),B0.initNonuniformCatmullRom(f.z,h.z,m.z,d.z,_,w,M)}else this.curveType==="catmullrom"&&(F0.initCatmullRom(f.x,h.x,m.x,d.x,this.tension),z0.initCatmullRom(f.y,h.y,m.y,d.y,this.tension),B0.initCatmullRom(f.z,h.z,m.z,d.z,this.tension));return i.set(F0.calc(c),z0.calc(c),B0.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new N().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kw(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,c=n*a;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*a+s*n+t}function fk(n,e){const t=1-n;return t*t*e}function dk(n,e){return 2*(1-n)*n*e}function hk(n,e){return n*n*e}function Ec(n,e,t,i){return fk(n,e)+dk(n,t)+hk(n,i)}function pk(n,e){const t=1-n;return t*t*t*e}function mk(n,e){const t=1-n;return 3*t*t*n*e}function gk(n,e){return 3*(1-n)*n*n*e}function vk(n,e){return n*n*n*e}function Tc(n,e,t,i,r){return pk(n,e)+mk(n,t)+gk(n,i)+vk(n,r)}class hx extends Ur{constructor(e=new Ee,t=new Ee,i=new Ee,r=new Ee){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Tc(e,r.x,s.x,o.x,a.x),Tc(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Cb extends Ur{constructor(e=new N,t=new N,i=new N,r=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Tc(e,r.x,s.x,o.x,a.x),Tc(e,r.y,s.y,o.y,a.y),Tc(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class wm extends Ur{constructor(e=new Ee,t=new Ee){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ee){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ee){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bb extends Ur{constructor(e=new N,t=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new N){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new N){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class px extends Ur{constructor(e=new Ee,t=new Ee,i=new Ee){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ee){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ec(e,r.x,s.x,o.x),Ec(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mx extends Ur{constructor(e=new N,t=new N,i=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ec(e,r.x,s.x,o.x),Ec(e,r.y,s.y,o.y),Ec(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gx extends Ur{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ee){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],f=r[o],d=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(kw(a,c.x,f.x,d.x,h.x),kw(a,c.y,f.y,d.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ee().fromArray(r))}return this}}var vx=Object.freeze({__proto__:null,ArcCurve:Tb,CatmullRomCurve3:Ab,CubicBezierCurve:hx,CubicBezierCurve3:Cb,EllipseCurve:Mm,LineCurve:wm,LineCurve3:bb,QuadraticBezierCurve:px,QuadraticBezierCurve3:mx,SplineCurve:gx});class Pb extends Ur{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new wm(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],c=a.getLength(),f=c===0?0:1-o/c;return a.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let f=0;f<c.length;f++){const d=c[f];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new vx[r.type]().fromJSON(r))}return this}}class Qc extends Pb{constructor(e){super(),this.type="Path",this.currentPoint=new Ee,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new wm(this.currentPoint.clone(),new Ee(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new px(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new hx(this.currentPoint.clone(),new Ee(e,t),new Ee(i,r),new Ee(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new gx(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const f=new Mm(e,t,i,r,s,o,a,c);if(this.curves.length>0){const h=f.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class mu extends vt{constructor(e=[new Ee(0,-.5),new Ee(.5,0),new Ee(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=on(r,0,Math.PI*2);const s=[],o=[],a=[],c=[],f=[],d=1/t,h=new N,m=new Ee,v=new N,_=new N,w=new N;let M=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:M=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,v.x=g*1,v.y=-M,v.z=g*0,w.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(w.x,w.y,w.z);break;default:M=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,v.x=g*1,v.y=-M,v.z=g*0,_.copy(v),v.x+=w.x,v.y+=w.y,v.z+=w.z,v.normalize(),c.push(v.x,v.y,v.z),w.copy(_)}for(let x=0;x<=t;x++){const S=i+x*d*r,T=Math.sin(S),C=Math.cos(S);for(let P=0;P<=e.length-1;P++){h.x=e[P].x*T,h.y=e[P].y,h.z=e[P].x*C,o.push(h.x,h.y,h.z),m.x=x/t,m.y=P/(e.length-1),a.push(m.x,m.y);const R=c[3*P+0]*T,I=c[3*P+1],b=c[3*P+0]*C;f.push(R,I,b)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const T=S+x*e.length,C=T,P=T+e.length,R=T+e.length+1,I=T+1;s.push(C,P,I),s.push(R,I,P)}this.setIndex(s),this.setAttribute("position",new qe(o,3)),this.setAttribute("uv",new qe(a,2)),this.setAttribute("normal",new qe(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mu(e.points,e.segments,e.phiStart,e.phiLength)}}class Sf extends mu{constructor(e=1,t=1,i=4,r=8){const s=new Qc;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Sf(e.radius,e.length,e.capSegments,e.radialSegments)}}class Mf extends vt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],c=[],f=new N,d=new Ee;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let h=0,m=3;h<=t;h++,m+=3){const v=i+h/t*r;f.x=e*Math.cos(v),f.y=e*Math.sin(v),o.push(f.x,f.y,f.z),a.push(0,0,1),d.x=(o[m]/e+1)/2,d.y=(o[m+1]/e+1)/2,c.push(d.x,d.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new qe(o,3)),this.setAttribute("normal",new qe(a,3)),this.setAttribute("uv",new qe(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Do extends vt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const f=this;r=Math.floor(r),s=Math.floor(s);const d=[],h=[],m=[],v=[];let _=0;const w=[],M=i/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(d),this.setAttribute("position",new qe(h,3)),this.setAttribute("normal",new qe(m,3)),this.setAttribute("uv",new qe(v,2));function x(){const T=new N,C=new N;let P=0;const R=(t-e)/i;for(let I=0;I<=s;I++){const b=[],L=I/s,G=L*(t-e)+e;for(let K=0;K<=r;K++){const q=K/r,te=q*c+a,Q=Math.sin(te),ue=Math.cos(te);C.x=G*Q,C.y=-L*i+M,C.z=G*ue,h.push(C.x,C.y,C.z),T.set(Q,R,ue).normalize(),m.push(T.x,T.y,T.z),v.push(q,1-L),b.push(_++)}w.push(b)}for(let I=0;I<r;I++)for(let b=0;b<s;b++){const L=w[b][I],G=w[b+1][I],K=w[b+1][I+1],q=w[b][I+1];d.push(L,G,q),d.push(G,K,q),P+=6}f.addGroup(g,P,0),g+=P}function S(T){const C=_,P=new Ee,R=new N;let I=0;const b=T===!0?e:t,L=T===!0?1:-1;for(let K=1;K<=r;K++)h.push(0,M*L,0),m.push(0,L,0),v.push(.5,.5),_++;const G=_;for(let K=0;K<=r;K++){const te=K/r*c+a,Q=Math.cos(te),ue=Math.sin(te);R.x=b*ue,R.y=M*L,R.z=b*Q,h.push(R.x,R.y,R.z),m.push(0,L,0),P.x=Q*.5+.5,P.y=ue*.5*L+.5,v.push(P.x,P.y),_++}for(let K=0;K<r;K++){const q=C+K,te=G+K;T===!0?d.push(te,te+1,q):d.push(te+1,te,q),I+=3}f.addGroup(g,I,T===!0?1:2),g+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Do(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wf extends Do{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new wf(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ks extends vt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),f(i),d(),this.setAttribute("position",new qe(s,3)),this.setAttribute("normal",new qe(s.slice(),3)),this.setAttribute("uv",new qe(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const S=new N,T=new N,C=new N;for(let P=0;P<t.length;P+=3)v(t[P+0],S),v(t[P+1],T),v(t[P+2],C),c(S,T,C,x)}function c(x,S,T,C){const P=C+1,R=[];for(let I=0;I<=P;I++){R[I]=[];const b=x.clone().lerp(T,I/P),L=S.clone().lerp(T,I/P),G=P-I;for(let K=0;K<=G;K++)K===0&&I===P?R[I][K]=b:R[I][K]=b.clone().lerp(L,K/G)}for(let I=0;I<P;I++)for(let b=0;b<2*(P-I)-1;b++){const L=Math.floor(b/2);b%2===0?(m(R[I][L+1]),m(R[I+1][L]),m(R[I][L])):(m(R[I][L+1]),m(R[I+1][L+1]),m(R[I+1][L]))}}function f(x){const S=new N;for(let T=0;T<s.length;T+=3)S.x=s[T+0],S.y=s[T+1],S.z=s[T+2],S.normalize().multiplyScalar(x),s[T+0]=S.x,s[T+1]=S.y,s[T+2]=S.z}function d(){const x=new N;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const T=M(x)/2/Math.PI+.5,C=g(x)/Math.PI+.5;o.push(T,1-C)}_(),h()}function h(){for(let x=0;x<o.length;x+=6){const S=o[x+0],T=o[x+2],C=o[x+4],P=Math.max(S,T,C),R=Math.min(S,T,C);P>.9&&R<.1&&(S<.2&&(o[x+0]+=1),T<.2&&(o[x+2]+=1),C<.2&&(o[x+4]+=1))}}function m(x){s.push(x.x,x.y,x.z)}function v(x,S){const T=x*3;S.x=e[T+0],S.y=e[T+1],S.z=e[T+2]}function _(){const x=new N,S=new N,T=new N,C=new N,P=new Ee,R=new Ee,I=new Ee;for(let b=0,L=0;b<s.length;b+=9,L+=6){x.set(s[b+0],s[b+1],s[b+2]),S.set(s[b+3],s[b+4],s[b+5]),T.set(s[b+6],s[b+7],s[b+8]),P.set(o[L+0],o[L+1]),R.set(o[L+2],o[L+3]),I.set(o[L+4],o[L+5]),C.copy(x).add(S).add(T).divideScalar(3);const G=M(C);w(P,L+0,x,G),w(R,L+2,S,G),w(I,L+4,T,G)}}function w(x,S,T,C){C<0&&x.x===1&&(o[S]=x.x-1),T.x===0&&T.z===0&&(o[S]=C/2/Math.PI+.5)}function M(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ks(e.vertices,e.indices,e.radius,e.details)}}class Ef extends ks{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ef(e.radius,e.detail)}}const Ah=new N,Ch=new N,H0=new N,bh=new Mi;class Rb extends vt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(va*t),o=e.getIndex(),a=e.getAttribute("position"),c=o?o.count:a.count,f=[0,0,0],d=["a","b","c"],h=new Array(3),m={},v=[];for(let _=0;_<c;_+=3){o?(f[0]=o.getX(_),f[1]=o.getX(_+1),f[2]=o.getX(_+2)):(f[0]=_,f[1]=_+1,f[2]=_+2);const{a:w,b:M,c:g}=bh;if(w.fromBufferAttribute(a,f[0]),M.fromBufferAttribute(a,f[1]),g.fromBufferAttribute(a,f[2]),bh.getNormal(H0),h[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,h[1]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,h[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let x=0;x<3;x++){const S=(x+1)%3,T=h[x],C=h[S],P=bh[d[x]],R=bh[d[S]],I=`${T}_${C}`,b=`${C}_${T}`;b in m&&m[b]?(H0.dot(m[b].normal)<=s&&(v.push(P.x,P.y,P.z),v.push(R.x,R.y,R.z)),m[b]=null):I in m||(m[I]={index0:f[x],index1:f[S],normal:H0.clone()})}}for(const _ in m)if(m[_]){const{index0:w,index1:M}=m[_];Ah.fromBufferAttribute(a,w),Ch.fromBufferAttribute(a,M),v.push(Ah.x,Ah.y,Ah.z),v.push(Ch.x,Ch.y,Ch.z)}this.setAttribute("position",new qe(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _a extends Qc{constructor(e){super(e),this.uuid=Bi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Qc().fromJSON(r))}return this}}const yk={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Lb(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,f,d,h,m,v;if(i&&(s=wk(n,e,s,t)),n.length>80*t){a=f=n[0],c=d=n[1];for(let _=t;_<r;_+=t)h=n[_],m=n[_+1],h<a&&(a=h),m<c&&(c=m),h>f&&(f=h),m>d&&(d=m);v=Math.max(f-a,d-c),v=v!==0?32767/v:0}return ef(s,o,t,a,c,v,0),o}};function Lb(n,e,t,i,r){let s,o;if(r===Nk(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Fw(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Fw(s,n[s],n[s+1],o);return o&&Em(o,o.next)&&(nf(o),o=o.next),o}function Ca(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Em(t,t.next)||Qt(t.prev,t,t.next)===0)){if(nf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ef(n,e,t,i,r,s,o){if(!n)return;!o&&s&&bk(n,i,r,s);let a=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,s?xk(n,i,r,s):_k(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),nf(n),n=f.next,a=f.next;continue}if(n=f,n===a){o?o===1?(n=Sk(Ca(n),e,t),ef(n,e,t,i,r,s,2)):o===2&&Mk(n,e,t,i,r,s):ef(Ca(n),e,t,i,r,s,1);break}}}function _k(n){const e=n.prev,t=n,i=n.next;if(Qt(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,c=t.y,f=i.y,d=r<s?r<o?r:o:s<o?s:o,h=a<c?a<f?a:f:c<f?c:f,m=r>s?r>o?r:o:s>o?s:o,v=a>c?a>f?a:f:c>f?c:f;let _=i.next;for(;_!==e;){if(_.x>=d&&_.x<=m&&_.y>=h&&_.y<=v&&Ul(r,a,s,c,o,f,_.x,_.y)&&Qt(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function xk(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Qt(r,s,o)>=0)return!1;const a=r.x,c=s.x,f=o.x,d=r.y,h=s.y,m=o.y,v=a<c?a<f?a:f:c<f?c:f,_=d<h?d<m?d:m:h<m?h:m,w=a>c?a>f?a:f:c>f?c:f,M=d>h?d>m?d:m:h>m?h:m,g=Ny(v,_,e,t,i),x=Ny(w,M,e,t,i);let S=n.prevZ,T=n.nextZ;for(;S&&S.z>=g&&T&&T.z<=x;){if(S.x>=v&&S.x<=w&&S.y>=_&&S.y<=M&&S!==r&&S!==o&&Ul(a,d,c,h,f,m,S.x,S.y)&&Qt(S.prev,S,S.next)>=0||(S=S.prevZ,T.x>=v&&T.x<=w&&T.y>=_&&T.y<=M&&T!==r&&T!==o&&Ul(a,d,c,h,f,m,T.x,T.y)&&Qt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;S&&S.z>=g;){if(S.x>=v&&S.x<=w&&S.y>=_&&S.y<=M&&S!==r&&S!==o&&Ul(a,d,c,h,f,m,S.x,S.y)&&Qt(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;T&&T.z<=x;){if(T.x>=v&&T.x<=w&&T.y>=_&&T.y<=M&&T!==r&&T!==o&&Ul(a,d,c,h,f,m,T.x,T.y)&&Qt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Sk(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Em(r,s)&&Ib(r,i,i.next,s)&&tf(r,s)&&tf(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),nf(i),nf(i.next),i=n=s),i=i.next}while(i!==n);return Ca(i)}function Mk(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Lk(o,a)){let c=Db(o,a);o=Ca(o,o.next),c=Ca(c,c.next),ef(o,e,t,i,r,s,0),ef(c,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function wk(n,e,t,i){const r=[];let s,o,a,c,f;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,f=Lb(n,a,c,i,!1),f===f.next&&(f.steiner=!0),r.push(Rk(f));for(r.sort(Ek),s=0;s<r.length;s++)t=Tk(r[s],t);return t}function Ek(n,e){return n.x-e.x}function Tk(n,e){const t=Ak(n,e);if(!t)return e;const i=Db(t,n);return Ca(i,i.next),Ca(t,t.next)}function Ak(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,c=r.x,f=r.y;let d=1/0,h;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&Ul(o<f?s:i,o,c,f,o<f?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),tf(t,n)&&(h<d||h===d&&(t.x>r.x||t.x===r.x&&Ck(r,t)))&&(r=t,d=h)),t=t.next;while(t!==a);return r}function Ck(n,e){return Qt(n.prev,n,e.prev)<0&&Qt(e.next,n,n.next)<0}function bk(n,e,t,i){let r=n;do r.z===0&&(r.z=Ny(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Pk(r)}function Pk(n){let e,t,i,r,s,o,a,c,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<f&&(a++,i=i.nextZ,!!i);e++);for(c=f;a>0||c>0&&i;)a!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function Ny(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Rk(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Ul(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Lk(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Ik(n,e)&&(tf(n,e)&&tf(e,n)&&Dk(n,e)&&(Qt(n.prev,n,e.prev)||Qt(n,e.prev,e))||Em(n,e)&&Qt(n.prev,n,n.next)>0&&Qt(e.prev,e,e.next)>0)}function Qt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Em(n,e){return n.x===e.x&&n.y===e.y}function Ib(n,e,t,i){const r=Rh(Qt(n,e,t)),s=Rh(Qt(n,e,i)),o=Rh(Qt(t,i,n)),a=Rh(Qt(t,i,e));return!!(r!==s&&o!==a||r===0&&Ph(n,t,e)||s===0&&Ph(n,i,e)||o===0&&Ph(t,n,i)||a===0&&Ph(t,e,i))}function Ph(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Rh(n){return n>0?1:n<0?-1:0}function Ik(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Ib(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function tf(n,e){return Qt(n.prev,n,n.next)<0?Qt(n,e,n.next)>=0&&Qt(n,n.prev,e)>=0:Qt(n,e,n.prev)<0||Qt(n,n.next,e)<0}function Dk(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Db(n,e){const t=new Uy(n.i,n.x,n.y),i=new Uy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Fw(n,e,t,i){const r=new Uy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function nf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Uy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nk(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class ts{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ts.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];zw(e),Bw(i,e);let o=e.length;t.forEach(zw);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,Bw(i,t[c]);const a=yk.triangulate(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function zw(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Bw(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Tf extends vt{constructor(e=new _a([new Ee(.5,.5),new Ee(-.5,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){const f=e[a];o(f)}this.setAttribute("position",new qe(r,3)),this.setAttribute("uv",new qe(s,2)),this.computeVertexNormals();function o(a){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:v-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:Uk;let S,T=!1,C,P,R,I;g&&(S=g.getSpacedPoints(d),T=!0,m=!1,C=g.computeFrenetFrames(d,!1),P=new N,R=new N,I=new N),m||(M=0,v=0,_=0,w=0);const b=a.extractPoints(f);let L=b.shape;const G=b.holes;if(!ts.isClockWise(L)){L=L.reverse();for(let se=0,ie=G.length;se<ie;se++){const _e=G[se];ts.isClockWise(_e)&&(G[se]=_e.reverse())}}const q=ts.triangulateShape(L,G),te=L;for(let se=0,ie=G.length;se<ie;se++){const _e=G[se];L=L.concat(_e)}function Q(se,ie,_e){return ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),se.clone().addScaledVector(ie,_e)}const ue=L.length,ne=q.length;function D(se,ie,_e){let Ce,Pe,Re;const ke=se.x-ie.x,Ge=se.y-ie.y,We=_e.x-se.x,rt=_e.y-se.y,k=ke*ke+Ge*Ge,U=ke*rt-Ge*We;if(Math.abs(U)>Number.EPSILON){const Z=Math.sqrt(k),Me=Math.sqrt(We*We+rt*rt),be=ie.x-Ge/Z,Ie=ie.y+ke/Z,$e=_e.x-rt/Me,Be=_e.y+We/Me,xe=(($e-be)*rt-(Be-Ie)*We)/(ke*rt-Ge*We);Ce=be+ke*xe-se.x,Pe=Ie+Ge*xe-se.y;const Ye=Ce*Ce+Pe*Pe;if(Ye<=2)return new Ee(Ce,Pe);Re=Math.sqrt(Ye/2)}else{let Z=!1;ke>Number.EPSILON?We>Number.EPSILON&&(Z=!0):ke<-Number.EPSILON?We<-Number.EPSILON&&(Z=!0):Math.sign(Ge)===Math.sign(rt)&&(Z=!0),Z?(Ce=-Ge,Pe=ke,Re=Math.sqrt(k)):(Ce=ke,Pe=Ge,Re=Math.sqrt(k/2))}return new Ee(Ce/Re,Pe/Re)}const H=[];for(let se=0,ie=te.length,_e=ie-1,Ce=se+1;se<ie;se++,_e++,Ce++)_e===ie&&(_e=0),Ce===ie&&(Ce=0),H[se]=D(te[se],te[_e],te[Ce]);const z=[];let oe,W=H.concat();for(let se=0,ie=G.length;se<ie;se++){const _e=G[se];oe=[];for(let Ce=0,Pe=_e.length,Re=Pe-1,ke=Ce+1;Ce<Pe;Ce++,Re++,ke++)Re===Pe&&(Re=0),ke===Pe&&(ke=0),oe[Ce]=D(_e[Ce],_e[Re],_e[ke]);z.push(oe),W=W.concat(oe)}for(let se=0;se<M;se++){const ie=se/M,_e=v*Math.cos(ie*Math.PI/2),Ce=_*Math.sin(ie*Math.PI/2)+w;for(let Pe=0,Re=te.length;Pe<Re;Pe++){const ke=Q(te[Pe],H[Pe],Ce);B(ke.x,ke.y,-_e)}for(let Pe=0,Re=G.length;Pe<Re;Pe++){const ke=G[Pe];oe=z[Pe];for(let Ge=0,We=ke.length;Ge<We;Ge++){const rt=Q(ke[Ge],oe[Ge],Ce);B(rt.x,rt.y,-_e)}}}const X=_+w;for(let se=0;se<ue;se++){const ie=m?Q(L[se],W[se],X):L[se];T?(R.copy(C.normals[0]).multiplyScalar(ie.x),P.copy(C.binormals[0]).multiplyScalar(ie.y),I.copy(S[0]).add(R).add(P),B(I.x,I.y,I.z)):B(ie.x,ie.y,0)}for(let se=1;se<=d;se++)for(let ie=0;ie<ue;ie++){const _e=m?Q(L[ie],W[ie],X):L[ie];T?(R.copy(C.normals[se]).multiplyScalar(_e.x),P.copy(C.binormals[se]).multiplyScalar(_e.y),I.copy(S[se]).add(R).add(P),B(I.x,I.y,I.z)):B(_e.x,_e.y,h/d*se)}for(let se=M-1;se>=0;se--){const ie=se/M,_e=v*Math.cos(ie*Math.PI/2),Ce=_*Math.sin(ie*Math.PI/2)+w;for(let Pe=0,Re=te.length;Pe<Re;Pe++){const ke=Q(te[Pe],H[Pe],Ce);B(ke.x,ke.y,h+_e)}for(let Pe=0,Re=G.length;Pe<Re;Pe++){const ke=G[Pe];oe=z[Pe];for(let Ge=0,We=ke.length;Ge<We;Ge++){const rt=Q(ke[Ge],oe[Ge],Ce);T?B(rt.x,rt.y+S[d-1].y,S[d-1].x+_e):B(rt.x,rt.y,h+_e)}}}j(),ce();function j(){const se=r.length/3;if(m){let ie=0,_e=ue*ie;for(let Ce=0;Ce<ne;Ce++){const Pe=q[Ce];de(Pe[2]+_e,Pe[1]+_e,Pe[0]+_e)}ie=d+M*2,_e=ue*ie;for(let Ce=0;Ce<ne;Ce++){const Pe=q[Ce];de(Pe[0]+_e,Pe[1]+_e,Pe[2]+_e)}}else{for(let ie=0;ie<ne;ie++){const _e=q[ie];de(_e[2],_e[1],_e[0])}for(let ie=0;ie<ne;ie++){const _e=q[ie];de(_e[0]+ue*d,_e[1]+ue*d,_e[2]+ue*d)}}i.addGroup(se,r.length/3-se,0)}function ce(){const se=r.length/3;let ie=0;V(te,ie),ie+=te.length;for(let _e=0,Ce=G.length;_e<Ce;_e++){const Pe=G[_e];V(Pe,ie),ie+=Pe.length}i.addGroup(se,r.length/3-se,1)}function V(se,ie){let _e=se.length;for(;--_e>=0;){const Ce=_e;let Pe=_e-1;Pe<0&&(Pe=se.length-1);for(let Re=0,ke=d+M*2;Re<ke;Re++){const Ge=ue*Re,We=ue*(Re+1),rt=ie+Ce+Ge,k=ie+Pe+Ge,U=ie+Pe+We,Z=ie+Ce+We;Oe(rt,k,U,Z)}}}function B(se,ie,_e){c.push(se),c.push(ie),c.push(_e)}function de(se,ie,_e){fe(se),fe(ie),fe(_e);const Ce=r.length/3,Pe=x.generateTopUV(i,r,Ce-3,Ce-2,Ce-1);ye(Pe[0]),ye(Pe[1]),ye(Pe[2])}function Oe(se,ie,_e,Ce){fe(se),fe(ie),fe(Ce),fe(ie),fe(_e),fe(Ce);const Pe=r.length/3,Re=x.generateSideWallUV(i,r,Pe-6,Pe-3,Pe-2,Pe-1);ye(Re[0]),ye(Re[1]),ye(Re[3]),ye(Re[1]),ye(Re[2]),ye(Re[3])}function fe(se){r.push(c[se*3+0]),r.push(c[se*3+1]),r.push(c[se*3+2])}function ye(se){s.push(se.x),s.push(se.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Ok(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new vx[r.type]().fromJSON(r)),new Tf(i,e.options)}}const Uk={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],c=e[i*3+1],f=e[r*3],d=e[r*3+1];return[new Ee(s,o),new Ee(a,c),new Ee(f,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],f=e[i*3],d=e[i*3+1],h=e[i*3+2],m=e[r*3],v=e[r*3+1],_=e[r*3+2],w=e[s*3],M=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-f)?[new Ee(o,1-c),new Ee(f,1-h),new Ee(m,1-_),new Ee(w,1-g)]:[new Ee(a,1-c),new Ee(d,1-h),new Ee(v,1-_),new Ee(M,1-g)]}};function Ok(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Af extends ks{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Af(e.radius,e.detail)}}class gu extends ks{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gu(e.radius,e.detail)}}class Cf extends vt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],c=[],f=[],d=[];let h=e;const m=(t-e)/r,v=new N,_=new Ee;for(let w=0;w<=r;w++){for(let M=0;M<=i;M++){const g=s+M/i*o;v.x=h*Math.cos(g),v.y=h*Math.sin(g),c.push(v.x,v.y,v.z),f.push(0,0,1),_.x=(v.x/t+1)/2,_.y=(v.y/t+1)/2,d.push(_.x,_.y)}h+=m}for(let w=0;w<r;w++){const M=w*(i+1);for(let g=0;g<i;g++){const x=g+M,S=x,T=x+i+1,C=x+i+2,P=x+1;a.push(S,T,P),a.push(T,C,P)}}this.setIndex(a),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(f,3)),this.setAttribute("uv",new qe(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class bf extends vt{constructor(e=new _a([new Ee(0,.5),new Ee(-.5,-.5),new Ee(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(a,c,d),a+=c,c=0;this.setIndex(i),this.setAttribute("position",new qe(r,3)),this.setAttribute("normal",new qe(s,3)),this.setAttribute("uv",new qe(o,2));function f(d){const h=r.length/3,m=d.extractPoints(t);let v=m.shape;const _=m.holes;ts.isClockWise(v)===!1&&(v=v.reverse());for(let M=0,g=_.length;M<g;M++){const x=_[M];ts.isClockWise(x)===!0&&(_[M]=x.reverse())}const w=ts.triangulateShape(v,_);for(let M=0,g=_.length;M<g;M++){const x=_[M];v=v.concat(x)}for(let M=0,g=v.length;M<g;M++){const x=v[M];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let M=0,g=w.length;M<g;M++){const x=w[M],S=x[0]+h,T=x[1]+h,C=x[2]+h;i.push(S,T,C),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kk(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new bf(i,e.curveSegments)}}function kk(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class vu extends vt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let f=0;const d=[],h=new N,m=new N,v=[],_=[],w=[],M=[];for(let g=0;g<=i;g++){const x=[],S=g/i;let T=0;g===0&&o===0?T=.5/t:g===i&&c===Math.PI&&(T=-.5/t);for(let C=0;C<=t;C++){const P=C/t;h.x=-e*Math.cos(r+P*s)*Math.sin(o+S*a),h.y=e*Math.cos(o+S*a),h.z=e*Math.sin(r+P*s)*Math.sin(o+S*a),_.push(h.x,h.y,h.z),m.copy(h).normalize(),w.push(m.x,m.y,m.z),M.push(P+T,1-S),x.push(f++)}d.push(x)}for(let g=0;g<i;g++)for(let x=0;x<t;x++){const S=d[g][x+1],T=d[g][x],C=d[g+1][x],P=d[g+1][x+1];(g!==0||o>0)&&v.push(S,T,P),(g!==i-1||c<Math.PI)&&v.push(T,C,P)}this.setIndex(v),this.setAttribute("position",new qe(_,3)),this.setAttribute("normal",new qe(w,3)),this.setAttribute("uv",new qe(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vu(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Pf extends ks{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pf(e.radius,e.detail)}}class Rf extends vt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],c=[],f=[],d=new N,h=new N,m=new N;for(let v=0;v<=i;v++)for(let _=0;_<=r;_++){const w=_/r*s,M=v/i*Math.PI*2;h.x=(e+t*Math.cos(M))*Math.cos(w),h.y=(e+t*Math.cos(M))*Math.sin(w),h.z=t*Math.sin(M),a.push(h.x,h.y,h.z),d.x=e*Math.cos(w),d.y=e*Math.sin(w),m.subVectors(h,d).normalize(),c.push(m.x,m.y,m.z),f.push(_/r),f.push(v/i)}for(let v=1;v<=i;v++)for(let _=1;_<=r;_++){const w=(r+1)*v+_-1,M=(r+1)*(v-1)+_-1,g=(r+1)*(v-1)+_,x=(r+1)*v+_;o.push(w,M,x),o.push(M,g,x)}this.setIndex(o),this.setAttribute("position",new qe(a,3)),this.setAttribute("normal",new qe(c,3)),this.setAttribute("uv",new qe(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Lf extends vt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],c=[],f=[],d=[],h=new N,m=new N,v=new N,_=new N,w=new N,M=new N,g=new N;for(let S=0;S<=i;++S){const T=S/i*s*Math.PI*2;x(T,s,o,e,v),x(T+.01,s,o,e,_),M.subVectors(_,v),g.addVectors(_,v),w.crossVectors(M,g),g.crossVectors(w,M),w.normalize(),g.normalize();for(let C=0;C<=r;++C){const P=C/r*Math.PI*2,R=-t*Math.cos(P),I=t*Math.sin(P);h.x=v.x+(R*g.x+I*w.x),h.y=v.y+(R*g.y+I*w.y),h.z=v.z+(R*g.z+I*w.z),c.push(h.x,h.y,h.z),m.subVectors(h,v).normalize(),f.push(m.x,m.y,m.z),d.push(S/i),d.push(C/r)}}for(let S=1;S<=i;S++)for(let T=1;T<=r;T++){const C=(r+1)*(S-1)+(T-1),P=(r+1)*S+(T-1),R=(r+1)*S+T,I=(r+1)*(S-1)+T;a.push(C,P,I),a.push(P,R,I)}this.setIndex(a),this.setAttribute("position",new qe(c,3)),this.setAttribute("normal",new qe(f,3)),this.setAttribute("uv",new qe(d,2));function x(S,T,C,P,R){const I=Math.cos(S),b=Math.sin(S),L=C/T*S,G=Math.cos(L);R.x=P*(2+G)*.5*I,R.y=P*(2+G)*b*.5,R.z=P*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lf(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class If extends vt{constructor(e=new mx(new N(-1,-1,0),new N(-1,1,0),new N(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new N,c=new N,f=new Ee;let d=new N;const h=[],m=[],v=[],_=[];w(),this.setIndex(_),this.setAttribute("position",new qe(h,3)),this.setAttribute("normal",new qe(m,3)),this.setAttribute("uv",new qe(v,2));function w(){for(let S=0;S<t;S++)M(S);M(s===!1?t:0),x(),g()}function M(S){d=e.getPointAt(S/t,d);const T=o.normals[S],C=o.binormals[S];for(let P=0;P<=r;P++){const R=P/r*Math.PI*2,I=Math.sin(R),b=-Math.cos(R);c.x=b*T.x+I*C.x,c.y=b*T.y+I*C.y,c.z=b*T.z+I*C.z,c.normalize(),m.push(c.x,c.y,c.z),a.x=d.x+i*c.x,a.y=d.y+i*c.y,a.z=d.z+i*c.z,h.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let T=1;T<=r;T++){const C=(r+1)*(S-1)+(T-1),P=(r+1)*S+(T-1),R=(r+1)*S+T,I=(r+1)*(S-1)+T;_.push(C,P,I),_.push(P,R,I)}}function x(){for(let S=0;S<=t;S++)for(let T=0;T<=r;T++)f.x=S/t,f.y=T/r,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new If(new vx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yx extends vt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new N,s=new N;if(e.index!==null){const o=e.attributes.position,a=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let f=0,d=c.length;f<d;++f){const h=c[f],m=h.start,v=h.count;for(let _=m,w=m+v;_<w;_+=3)for(let M=0;M<3;M++){const g=a.getX(_+M),x=a.getX(_+(M+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),Hw(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,c=o.count/3;a<c;a++)for(let f=0;f<3;f++){const d=3*a+f,h=3*a+(f+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,h),Hw(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new qe(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Hw(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Vw=Object.freeze({__proto__:null,BoxGeometry:Io,CapsuleGeometry:Sf,CircleGeometry:Mf,ConeGeometry:wf,CylinderGeometry:Do,DodecahedronGeometry:Ef,EdgesGeometry:Rb,ExtrudeGeometry:Tf,IcosahedronGeometry:Af,LatheGeometry:mu,OctahedronGeometry:gu,PlaneGeometry:hu,PolyhedronGeometry:ks,RingGeometry:Cf,ShapeGeometry:bf,SphereGeometry:vu,TetrahedronGeometry:Pf,TorusGeometry:Rf,TorusKnotGeometry:Lf,TubeGeometry:If,WireframeGeometry:yx});class Nb extends Hn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ve(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ub extends Nr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _x extends Hn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lo,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ob extends _x{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ee(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return on(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ve(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class kb extends Hn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ve(16777215),this.specular=new Ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lo,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Fb extends Hn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ve(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lo,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zb extends Hn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lo,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class xx extends Hn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lo,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Bb extends Hn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ve(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lo,this.normalScale=new Ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sx extends pi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function rr(n,e,t){return Mx(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function da(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Mx(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Hb(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Oy(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function wx(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function Fk(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],d=f.getValueSize(),h=[],m=[];for(let v=0;v<f.times.length;++v){const _=f.times[v]*r;if(!(_<t||_>=i)){h.push(f.times[v]);for(let w=0;w<d;++w)m.push(f.values[v*d+w])}}h.length!==0&&(f.times=da(h,f.times.constructor),f.values=da(m,f.values.constructor),o.push(f))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s}function zk(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===c});if(f===void 0)continue;let d=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let m=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=v/3);const _=a.times.length-1;let w;if(s<=a.times[0]){const g=d,x=h-d;w=rr(a.values,g,x)}else if(s>=a.times[_]){const g=_*h+d,x=g+h-d;w=rr(a.values,g,x)}else{const g=a.createInterpolant(),x=d,S=h-d;g.evaluate(s),w=rr(g.resultBuffer,x,S)}c==="quaternion"&&new ti().fromArray(w).normalize().conjugate().toArray(w);const M=f.times.length;for(let g=0;g<M;++g){const x=g*v+m;if(c==="quaternion")ti.multiplyQuaternionsFlat(f.values,x,w,0,f.values,x);else{const S=v-m*2;for(let T=0;T<S;++T)f.values[x+T]-=w[T]}}}return n.blendMode=Z_,n}const Bk={arraySlice:rr,convertArray:da,isTypedArray:Mx,getKeyframeOrder:Hb,sortedArray:Oy,flattenJSON:wx,subclip:Fk,makeClipAdditive:zk};class Df{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Vb extends Df{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ua,endingEnd:ua}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case ca:s=e,a=2*t-i;break;case Zc:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case ca:o=e,c=2*i-t;break;case Zc:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const f=(i-t)*.5,d=this.valueSize;this._weightPrev=f/(t-a),this._weightNext=f/(c-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,f=c-a,d=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,v=this._weightNext,_=(i-t)/(r-t),w=_*_,M=w*_,g=-m*M+2*m*w-m*_,x=(1+m)*M+(-1.5-2*m)*w+(-.5+m)*_+1,S=(-1-v)*M+(1.5+v)*w+.5*_,T=v*M-v*w;for(let C=0;C!==a;++C)s[C]=g*o[d+C]+x*o[f+C]+S*o[c+C]+T*o[h+C];return s}}class Ex extends Df{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,f=c-a,d=(i-t)/(r-t),h=1-d;for(let m=0;m!==a;++m)s[m]=o[f+m]*h+o[c+m]*d;return s}}class Gb extends Df{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Or{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=da(t,this.TimeBufferType),this.values=da(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:da(e.times,Array),values:da(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Gb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ex(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Vb(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case qc:t=this.InterpolantFactoryMethodDiscrete;break;case $c:t=this.InterpolantFactoryMethodLinear;break;case up:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return qc;case this.InterpolantFactoryMethodLinear:return $c;case this.InterpolantFactoryMethodSmooth:return up}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=rr(i,s,o),this.values=rr(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&Mx(r))for(let a=0,c=r.length;a!==c;++a){const f=r[a];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,f),e=!1;break}}return e}optimize(){const e=rr(this.times),t=rr(this.values),i=this.getValueSize(),r=this.getInterpolation()===up,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const f=e[a],d=e[a+1];if(f!==d&&(a!==1||f!==e[0]))if(r)c=!0;else{const h=a*i,m=h-i,v=h+i;for(let _=0;_!==i;++_){const w=t[h+_];if(w!==t[m+_]||w!==t[v+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const h=a*i,m=o*i;for(let v=0;v!==i;++v)t[m+v]=t[h+v]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,f=0;f!==i;++f)t[c+f]=t[a+f];++o}return o!==e.length?(this.times=rr(e,0,o),this.values=rr(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=rr(this.times,0),t=rr(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Or.prototype.TimeBufferType=Float32Array;Or.prototype.ValueBufferType=Float32Array;Or.prototype.DefaultInterpolation=$c;class La extends Or{}La.prototype.ValueTypeName="bool";La.prototype.ValueBufferType=Array;La.prototype.DefaultInterpolation=qc;La.prototype.InterpolantFactoryMethodLinear=void 0;La.prototype.InterpolantFactoryMethodSmooth=void 0;class Tx extends Or{}Tx.prototype.ValueTypeName="color";class rf extends Or{}rf.prototype.ValueTypeName="number";class Wb extends Df{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let f=e*a;for(let d=f+a;f!==d;f+=4)ti.slerpFlat(s,0,o,f-a,o,f,c);return s}}class yu extends Or{InterpolantFactoryMethodLinear(e){return new Wb(this.times,this.values,this.getValueSize(),e)}}yu.prototype.ValueTypeName="quaternion";yu.prototype.DefaultInterpolation=$c;yu.prototype.InterpolantFactoryMethodSmooth=void 0;class Ia extends Or{}Ia.prototype.ValueTypeName="string";Ia.prototype.ValueBufferType=Array;Ia.prototype.DefaultInterpolation=qc;Ia.prototype.InterpolantFactoryMethodLinear=void 0;Ia.prototype.InterpolantFactoryMethodSmooth=void 0;class sf extends Or{}sf.prototype.ValueTypeName="vector";class of{constructor(e,t=-1,i,r=hm){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Bi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Vk(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Or.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],f=[];c.push((a+s-1)%s,a,(a+1)%s),f.push(0,1,0);const d=Hb(c);c=Oy(c,1,d),f=Oy(f,1,d),!r&&c[0]===0&&(c.push(s),f.push(f[0])),o.push(new rf(".morphTargetInfluences["+t[a].name+"]",c,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const f=e[a],d=f.name.match(s);if(d&&d.length>1){const h=d[1];let m=r[h];m||(r[h]=m=[]),m.push(f)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,m,v,_,w){if(v.length!==0){const M=[],g=[];wx(v,M,g,_),M.length!==0&&w.push(new h(m,M,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let h=0;h<f.length;h++){const m=f[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const v={};let _;for(_=0;_<m.length;_++)if(m[_].morphTargets)for(let w=0;w<m[_].morphTargets.length;w++)v[m[_].morphTargets[w]]=-1;for(const w in v){const M=[],g=[];for(let x=0;x!==m[_].morphTargets.length;++x){const S=m[_];M.push(S.time),g.push(S.morphTarget===w?1:0)}r.push(new rf(".morphTargetInfluence["+w+"]",M,g))}c=v.length*o}else{const v=".bones["+t[h].name+"]";i(sf,v+".position",m,"pos",r),i(yu,v+".quaternion",m,"rot",r),i(sf,v+".scale",m,"scl",r)}}return r.length===0?null:new this(s,c,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Hk(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rf;case"vector":case"vector2":case"vector3":case"vector4":return sf;case"color":return Tx;case"quaternion":return yu;case"bool":case"boolean":return La;case"string":return Ia}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Vk(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Hk(n.type);if(n.times===void 0){const t=[],i=[];wx(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ba={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Ax{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,h){return f.push(d,h),this},this.removeHandler=function(d){const h=f.indexOf(d);return h!==-1&&f.splice(h,2),this},this.getHandler=function(d){for(let h=0,m=f.length;h<m;h+=2){const v=f[h],_=f[h+1];if(v.global&&(v.lastIndex=0),v.test(d))return _}return null}}}const Xb=new Ax;class Xi{constructor(e){this.manager=e!==void 0?e:Xb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ys={};class Gk extends Error{constructor(e,t){super(e),this.response=t}}class Us extends Xi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ba.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ys[e]!==void 0){ys[e].push({onLoad:t,onProgress:i,onError:r});return}ys[e]=[],ys[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=ys[e],h=f.body.getReader(),m=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),v=m?parseInt(m):0,_=v!==0;let w=0;const M=new ReadableStream({start(g){x();function x(){h.read().then(({done:S,value:T})=>{if(S)g.close();else{w+=T.byteLength;const C=new ProgressEvent("progress",{lengthComputable:_,loaded:w,total:v});for(let P=0,R=d.length;P<R;P++){const I=d[P];I.onProgress&&I.onProgress(C)}g.enqueue(T),x()}})}}});return new Response(M)}else throw new Gk(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return f.json();default:if(a===void 0)return f.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),m=h&&h[1]?h[1].toLowerCase():void 0,v=new TextDecoder(m);return f.arrayBuffer().then(_=>v.decode(_))}}}).then(f=>{ba.add(e,f);const d=ys[e];delete ys[e];for(let h=0,m=d.length;h<m;h++){const v=d[h];v.onLoad&&v.onLoad(f)}}).catch(f=>{const d=ys[e];if(d===void 0)throw this.manager.itemError(e),f;delete ys[e];for(let h=0,m=d.length;h<m;h++){const v=d[h];v.onError&&v.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Wk extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Us(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=of.parse(e[i]);t.push(r)}return t}}class Xk extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new fx,c=new Us(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let f=0;function d(h){c.load(e[h],function(m){const v=s.parse(m,!0);o[h]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(a.minFilter=dn),a.image=o,a.format=v.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,m=e.length;h<m;++h)d(h);else c.load(e,function(h){const m=s.parse(h,!0);if(m.isCubemap){const v=m.mipmaps.length/m.mipmapCount;for(let _=0;_<v;_++){o[_]={mipmaps:[]};for(let w=0;w<m.mipmapCount;w++)o[_].mipmaps.push(m.mipmaps[_*m.mipmapCount+w]),o[_].format=m.format,o[_].width=m.width,o[_].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=dn),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class af extends Xi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ba.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Jc("img");function c(){d(),ba.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(h){d(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",c,!1),a.removeEventListener("error",f,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class jk extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=new xf,o=new af(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(f){o.load(e[f],function(d){s.images[f]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return s}}class Yk extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Xl,a=new Us(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){const f=s.parse(c);f&&(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Qn,o.wrapT=f.wrapT!==void 0?f.wrapT:Qn,o.magFilter=f.magFilter!==void 0?f.magFilter:dn,o.minFilter=f.minFilter!==void 0?f.minFilter:dn,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?o.colorSpace=f.colorSpace:f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Ao),f.mipmapCount===1&&(o.minFilter=dn),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},i,r),o}}class qk extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=new an,o=new af(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class No extends Lt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class jb extends No{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ve(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const V0=new ut,Gw=new N,Ww=new N;class Cx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ee(512,512),this.map=null,this.mapPass=null,this.matrix=new ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gm,this._frameExtents=new Ee(1,1),this._viewportCount=1,this._viewports=[new At(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Gw.setFromMatrixPosition(e.matrixWorld),t.position.copy(Gw),Ww.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ww),t.updateMatrixWorld(),V0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V0),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(V0)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class $k extends Cx{constructor(){super(new Gt(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=nu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Yb extends No{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.target=new Lt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new $k}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Xw=new ut,nc=new N,G0=new N;class Zk extends Cx{constructor(){super(new Gt(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ee(4,2),this._viewportCount=6,this._viewports=[new At(2,1,1,1),new At(0,1,1,1),new At(3,1,1,1),new At(1,1,1,1),new At(3,0,1,1),new At(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),nc.setFromMatrixPosition(e.matrixWorld),i.position.copy(nc),G0.copy(i.position),G0.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(G0),i.updateMatrixWorld(),r.makeTranslation(-nc.x,-nc.y,-nc.z),Xw.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xw)}}class qb extends No{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Zk}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Kk extends Cx{constructor(){super(new es(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $b extends No{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.target=new Lt,this.shadow=new Kk}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Zb extends No{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Kb extends No{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Jb{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new N)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class Tm extends No{constructor(e=new Jb,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Am extends Xi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Us(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=Am.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ve().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ve().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ee().fromArray(o.value);break;case"v3":r.uniforms[s].value=new N().fromArray(o.value);break;case"v4":r.uniforms[s].value=new At().fromArray(o.value);break;case"m3":r.uniforms[s].value=new wt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ut().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ee().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ee().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Nb,SpriteMaterial:lx,RawShaderMaterial:Ub,ShaderMaterial:Nr,PointsMaterial:cx,MeshPhysicalMaterial:Ob,MeshStandardMaterial:_x,MeshPhongMaterial:kb,MeshToonMaterial:Fb,MeshNormalMaterial:zb,MeshLambertMaterial:xx,MeshDepthMaterial:sx,MeshDistanceMaterial:ox,MeshBasicMaterial:ii,MeshMatcapMaterial:Bb,LineDashedMaterial:Sx,LineBasicMaterial:pi,Material:Hn};return new t[e]}}class ky{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class bx extends vt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Qb extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Us(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(v,_){if(t[_]!==void 0)return t[_];const M=v.interleavedBuffers[_],g=s(v,M.buffer),x=Il(M.type,g),S=new xm(x,M.stride);return S.uuid=M.uuid,t[_]=S,S}function s(v,_){if(i[_]!==void 0)return i[_];const M=v.arrayBuffers[_],g=new Uint32Array(M).buffer;return i[_]=g,g}const o=e.isInstancedBufferGeometry?new bx:new vt,a=e.data.index;if(a!==void 0){const v=Il(a.type,a.array);o.setIndex(new Ht(v,1))}const c=e.data.attributes;for(const v in c){const _=c[v];let w;if(_.isInterleavedBufferAttribute){const M=r(e.data,_.data);w=new Fi(M,_.itemSize,_.offset,_.normalized)}else{const M=Il(_.type,_.array),g=_.isInstancedBufferAttribute?ru:Ht;w=new g(M,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),_.usage!==void 0&&w.setUsage(_.usage),_.updateRange!==void 0&&(w.updateRange.offset=_.updateRange.offset,w.updateRange.count=_.updateRange.count),o.setAttribute(v,w)}const f=e.data.morphAttributes;if(f)for(const v in f){const _=f[v],w=[];for(let M=0,g=_.length;M<g;M++){const x=_[M];let S;if(x.isInterleavedBufferAttribute){const T=r(e.data,x.data);S=new Fi(T,x.itemSize,x.offset,x.normalized)}else{const T=Il(x.type,x.array);S=new Ht(T,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),w.push(S)}o.morphAttributes[v]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let v=0,_=h.length;v!==_;++v){const w=h[v];o.addGroup(w.start,w.count,w.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const v=new N;m.center!==void 0&&v.fromArray(m.center),o.boundingSphere=new fr(v,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Jk extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?ky.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Us(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ky.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Us(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),f=this.parseObject(e.object,s,c,a,i),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),t!==void 0){let h=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,a,o,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new _a().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Sm().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new Qb;for(let s=0,o=e.length;s<o;s++){let a;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(c);break;default:c.type in Vw?a=Vw[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),i[c.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Am;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const c=e[o];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=of.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){const f=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(d)}else return c.data?{data:Il(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new Ax(t);s=new af(c),s.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const h=e[f],m=h.url;if(Array.isArray(m)){const v=[];for(let _=0,w=m.length;_<w;_++){const M=m[_],g=a(M);g!==null&&(g instanceof HTMLImageElement?v.push(g):v.push(new Xl(g.data,g.width,g.height)))}r[h.uuid]=new fa(v)}else{const v=a(h.url);r[h.uuid]=new fa(v)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(c)}else return o.data?{data:Il(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new af(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const c=e[o],f=c.url;if(Array.isArray(f)){const d=[];for(let h=0,m=f.length;h<m;h++){const v=f[h],_=await s(v);_!==null&&(_ instanceof HTMLImageElement?d.push(_):d.push(new Xl(_.data,_.width,_.height)))}i[c.uuid]=new fa(d)}else{const d=await s(c.url);i[c.uuid]=new fa(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const c=t[a.image],f=c.data;let d;Array.isArray(f)?(d=new xf,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new Xl:d=new an,f&&(d.needsUpdate=!0)),d.source=c,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,Qk)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],jw),d.wrapT=i(a.wrap[1],jw)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,Yw)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,Yw)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const v=[];for(let _=0,w=m.length;_<w;_++){const M=m[_];i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),v.push(i[M])}return v}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function f(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let d,h;switch(e.type){case"Scene":o=new Bp,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ve(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new _m(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ym(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Gt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new es(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Zb(e.color,e.intensity);break;case"DirectionalLight":o=new $b(e.color,e.intensity);break;case"PointLight":o=new qb(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Kb(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Yb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new jb(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Tm().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),h=c(e.material),o=new Sb(d,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),h=c(e.material),o=new Rn(d,h);break;case"InstancedMesh":d=a(e.geometry),h=c(e.material);const m=e.count,v=e.instanceMatrix,_=e.instanceColor;o=new Mb(d,h,m),o.instanceMatrix=new ru(new Float32Array(v.array),16),_!==void 0&&(o.instanceColor=new ru(new Float32Array(_.array),_.itemSize));break;case"LOD":o=new xb;break;case"Line":o=new Co(a(e.geometry),c(e.material));break;case"LineLoop":o=new wb(a(e.geometry),c(e.material));break;case"LineSegments":o=new rs(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Eb(a(e.geometry),c(e.material));break;case"Sprite":o=new _b(c(e.material));break;case"Group":o=new Nl;break;case"Bone":o=new ux;break;default:o=new Lt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let v=0;v<m.length;v++)o.add(this.parseObject(m[v],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let v=0;v<m.length;v++){const _=m[v];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let v=0;v<m.length;v++){const _=m[v],w=o.getObjectByProperty("uuid",_.object);w!==void 0&&o.addLevel(w,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Qk={UVMapping:dm,CubeReflectionMapping:Eo,CubeRefractionMapping:To,EquirectangularReflectionMapping:Wc,EquirectangularRefractionMapping:Xc,CubeUVReflectionMapping:fu},jw={RepeatWrapping:jc,ClampToEdgeWrapping:Qn,MirroredRepeatWrapping:Yc},Yw={NearestFilter:cn,NearestMipmapNearestFilter:Fp,NearestMipmapLinearFilter:Sc,LinearFilter:dn,LinearMipmapNearestFilter:q_,LinearMipmapLinearFilter:Ao};class eF extends Xi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ba.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){ba.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Lh;class Px{static getContext(){return Lh===void 0&&(Lh=new(window.AudioContext||window.webkitAudioContext)),Lh}static setContext(e){Lh=e}}class tF extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Us(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const f=c.slice(0);Px.getContext().decodeAudioData(f,function(h){t(h)},a)}catch(f){a(f)}},i,r);function a(c){r?r(c):console.error(c),s.manager.itemError(e)}}}class nF extends Tm{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Ve().set(e),s=new Ve().set(t),o=new N(r.r,r.g,r.b),a=new N(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(f)}}class iF extends Tm{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Ve().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const qw=new ut,$w=new ut,qo=new ut;class rF{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,qo.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(va*t.fov*.5)/t.zoom;let a,c;$w.elements[12]=-r,qw.elements[12]=r,a=-o*t.aspect+s,c=o*t.aspect+s,qo.elements[0]=2*t.near/(c-a),qo.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(qo),a=-o*t.aspect-s,c=o*t.aspect-s,qo.elements[0]=2*t.near/(c-a),qo.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(qo)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($w),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qw)}}class Rx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Zw(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Zw();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Zw(){return(typeof performance>"u"?Date:performance).now()}const $o=new N,Kw=new ti,sF=new N,Zo=new N;class oF extends Lt{constructor(){super(),this.type="AudioListener",this.context=Px.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Rx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($o,Kw,sF),Zo.set(0,0,-1).applyQuaternion(Kw),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($o.x,r),t.positionY.linearRampToValueAtTime($o.y,r),t.positionZ.linearRampToValueAtTime($o.z,r),t.forwardX.linearRampToValueAtTime(Zo.x,r),t.forwardY.linearRampToValueAtTime(Zo.y,r),t.forwardZ.linearRampToValueAtTime(Zo.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition($o.x,$o.y,$o.z),t.setOrientation(Zo.x,Zo.y,Zo.z,i.x,i.y,i.z)}}class e2 extends Lt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ko=new N,Jw=new ti,aF=new N,Jo=new N;class lF extends e2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ko,Jw,aF),Jo.set(0,0,1).applyQuaternion(Jw);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ko.x,i),t.positionY.linearRampToValueAtTime(Ko.y,i),t.positionZ.linearRampToValueAtTime(Ko.z,i),t.orientationX.linearRampToValueAtTime(Jo.x,i),t.orientationY.linearRampToValueAtTime(Jo.y,i),t.orientationZ.linearRampToValueAtTime(Jo.z,i)}else t.setPosition(Ko.x,Ko.y,Ko.z),t.setOrientation(Jo.x,Jo.y,Jo.z)}}class uF{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class t2{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){ti.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;ti.multiplyQuaternionsFlat(e,o,e,t,e,i),ti.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const Lx="\\[\\]\\.:\\/",cF=new RegExp("["+Lx+"]","g"),Ix="[^"+Lx+"]",fF="[^"+Lx.replace("\\.","")+"]",dF=/((?:WC+[\/:])*)/.source.replace("WC",Ix),hF=/(WCOD+)?/.source.replace("WCOD",fF),pF=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ix),mF=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ix),gF=new RegExp("^"+dF+hF+pF+mF+"$"),vF=["material","materials","bones","map"];class yF{constructor(e,t,i){const r=i||Tt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Tt{constructor(e,t,i){this.path=t,this.parsedPath=i||Tt.parseTrackName(t),this.node=Tt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Tt.Composite(e,t,i):new Tt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cF,"")}static parseTrackName(e){const t=gF.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);vF.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const c=i(a.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Tt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Tt.Composite=yF;Tt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Tt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Tt.prototype.GetterByBindingType=[Tt.prototype._getValue_direct,Tt.prototype._getValue_array,Tt.prototype._getValue_arrayElement,Tt.prototype._getValue_toArray];Tt.prototype.SetterByBindingTypeAndVersioning=[[Tt.prototype._setValue_direct,Tt.prototype._setValue_direct_setNeedsUpdate,Tt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Tt.prototype._setValue_array,Tt.prototype._setValue_array_setNeedsUpdate,Tt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Tt.prototype._setValue_arrayElement,Tt.prototype._setValue_arrayElement_setNeedsUpdate,Tt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Tt.prototype._setValue_fromArray,Tt.prototype._setValue_fromArray_setNeedsUpdate,Tt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _F{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Bi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,c=e.length,f=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const m=arguments[d],v=m.uuid;let _=t[v];if(_===void 0){_=c++,t[v]=_,e.push(m);for(let w=0,M=o;w!==M;++w)s[w].push(new Tt(m,i[w],r[w]))}else if(_<f){a=e[_];const w=--f,M=e[w];t[M.uuid]=_,e[_]=M,t[v]=w,e[w]=m;for(let g=0,x=o;g!==x;++g){const S=s[g],T=S[w];let C=S[_];S[_]=T,C===void 0&&(C=new Tt(m,i[g],r[g])),S[w]=C}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],f=c.uuid,d=t[f];if(d!==void 0&&d>=s){const h=s++,m=e[h];t[m.uuid]=d,e[d]=m,t[f]=h,e[h]=c;for(let v=0,_=r;v!==_;++v){const w=i[v],M=w[h],g=w[d];w[d]=M,w[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,c=arguments.length;a!==c;++a){const f=arguments[a],d=f.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<s){const m=--s,v=e[m],_=--o,w=e[_];t[v.uuid]=h,e[h]=v,t[w.uuid]=m,e[m]=w,e.pop();for(let M=0,g=r;M!==g;++M){const x=i[M],S=x[m],T=x[_];x[h]=S,x[m]=T,x.pop()}}else{const m=--o,v=e[m];m>0&&(t[v.uuid]=h),e[h]=v,e.pop();for(let _=0,w=r;_!==w;++_){const M=i[_];M[h]=M[m],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,c=this._objects,f=c.length,d=this.nCachedObjects_,h=new Array(f);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let m=d,v=c.length;m!==v;++m){const _=c[m];h[m]=new Tt(_,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,c=o[a],f=e[a];t[f]=i,o[i]=c,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class n2{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:ua,endingEnd:ua};for(let f=0;f!==o;++f){const d=s[f].createInterpolant(null);a[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=$C,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,f=a.sampleValues;return c[0]=s,c[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Z_:for(let d=0,h=c.length;d!==h;++d)c[d].evaluate(o),f[d].accumulateAdditive(a);break;case hm:default:for(let d=0,h=c.length;d!==h;++d)c[d].evaluate(o),f[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===ZC;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===qC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=ca,r.endingEnd=ca):(e?r.endingStart=this.zeroSlopeAtStart?ca:ua:r.endingStart=Zc,t?r.endingEnd=this.zeroSlopeAtEnd?ca:ua:r.endingEnd=Zc)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}const xF=new Float32Array(1);class SF extends is{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let h=0;h!==s;++h){const m=r[h],v=m.name;let _=d[v];if(_!==void 0)++_.referenceCount,o[h]=_;else{if(_=o[h],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,v));continue}const w=t&&t._propertyBindings[h].binding.parsedPath;_=new t2(Tt.create(i,v,w),m.ValueTypeName,m.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,v),o[h]=_}a[h].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete h[m],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Ex(new Float32Array(2),new Float32Array(2),1,xF),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?of.findByName(r,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=hm),c!==void 0){const h=c.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;f=c.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const d=new n2(this,o,t,i);return this._bindAction(d,f),this._addInactiveAction(d,a,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?of.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)a[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const f=o[a];this._deactivateAction(f);const d=f._cacheIndex,h=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,c=a[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Dx{constructor(e){this.value=e}clone(){return new Dx(this.value.clone===void 0?this.value:this.value.clone())}}let MF=0;class wF extends is{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:MF++}),this.name="",this.usage=Kc,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class Hp extends xm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class EF{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class i2{constructor(e,t,i=0,r=1/0){this.ray=new yf(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ya,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Fy(e,this,i,t),i.sort(Qw),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)Fy(e[r],this,i,t);return i.sort(Qw),i}}function Qw(n,e){return n.distance-e.distance}function Fy(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)Fy(r[s],e,t,!0)}}class zy{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(on(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class TF{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const eE=new Ee;class AF{constructor(e=new Ee(1/0,1/0),t=new Ee(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=eE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,eE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tE=new N,Ih=new N;class r2{constructor(e=new N,t=new N){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tE.subVectors(e,this.start),Ih.subVectors(this.end,this.start);const i=Ih.dot(Ih);let s=Ih.dot(tE)/i;return t&&(s=on(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nE=new N;class CF extends Lt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new vt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,c=32;o<c;o++,a++){const f=o/c*Math.PI*2,d=a/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new qe(r,3));const s=new pi({fog:!1,toneMapped:!1});this.cone=new rs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Js=new N,Dh=new ut,W0=new ut;class bF extends rs{constructor(e){const t=s2(e),i=new vt,r=[],s=[],o=new Ve(0,0,1),a=new Ve(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new qe(r,3)),i.setAttribute("color",new qe(s,3));const c=new pi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");W0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Dh.multiplyMatrices(W0,a.matrixWorld),Js.setFromMatrixPosition(Dh),r.setXYZ(o,Js.x,Js.y,Js.z),Dh.multiplyMatrices(W0,a.parent.matrixWorld),Js.setFromMatrixPosition(Dh),r.setXYZ(o+1,Js.x,Js.y,Js.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function s2(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,s2(n.children[t]));return e}class PF extends Rn{constructor(e,t,i){const r=new vu(t,4,2),s=new ii({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const RF=new N,iE=new Ve,rE=new Ve;class LF extends Lt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new gu(t);r.rotateY(Math.PI*.5),this.material=new ii({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Ht(o,3)),this.add(new Rn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");iE.copy(this.light.color),rE.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?iE:rE;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(RF.setFromMatrixPosition(this.light.matrixWorld).negate())}}class IF extends rs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ve(i),r=new Ve(r);const s=t/2,o=e/t,a=e/2,c=[],f=[];for(let m=0,v=0,_=-a;m<=t;m++,_+=o){c.push(-a,0,_,a,0,_),c.push(_,0,-a,_,0,a);const w=m===s?i:r;w.toArray(f,v),v+=3,w.toArray(f,v),v+=3,w.toArray(f,v),v+=3,w.toArray(f,v),v+=3}const d=new vt;d.setAttribute("position",new qe(c,3)),d.setAttribute("color",new qe(f,3));const h=new pi({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class DF extends rs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ve(s),o=new Ve(o);const a=[],c=[];if(t>1)for(let h=0;h<t;h++){const m=h/t*(Math.PI*2),v=Math.sin(m)*e,_=Math.cos(m)*e;a.push(0,0,0),a.push(v,0,_);const w=h&1?s:o;c.push(w.r,w.g,w.b),c.push(w.r,w.g,w.b)}for(let h=0;h<i;h++){const m=h&1?s:o,v=e-e/i*h;for(let _=0;_<r;_++){let w=_/r*(Math.PI*2),M=Math.sin(w)*v,g=Math.cos(w)*v;a.push(M,0,g),c.push(m.r,m.g,m.b),w=(_+1)/r*(Math.PI*2),M=Math.sin(w)*v,g=Math.cos(w)*v,a.push(M,0,g),c.push(m.r,m.g,m.b)}}const f=new vt;f.setAttribute("position",new qe(a,3)),f.setAttribute("color",new qe(c,3));const d=new pi({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sE=new N,Nh=new N,oE=new N;class NF extends Lt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new vt;r.setAttribute("position",new qe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new pi({fog:!1,toneMapped:!1});this.lightPlane=new Co(r,s),this.add(this.lightPlane),r=new vt,r.setAttribute("position",new qe([0,0,0,0,0,1],3)),this.targetLine=new Co(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sE.setFromMatrixPosition(this.light.matrixWorld),Nh.setFromMatrixPosition(this.light.target.matrixWorld),oE.subVectors(Nh,sE),this.lightPlane.lookAt(Nh),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Nh),this.targetLine.scale.z=oE.length()}}const Uh=new N,rn=new _f;class UF extends rs{constructor(e){const t=new vt,i=new pi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,w){c(_),c(w)}function c(_){r.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(r.length/3-1)}t.setAttribute("position",new qe(r,3)),t.setAttribute("color",new qe(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new Ve(16755200),d=new Ve(16711680),h=new Ve(43775),m=new Ve(16777215),v=new Ve(3355443);this.setColors(f,d,h,m,v)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;rn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),un("c",t,e,rn,0,0,-1),un("t",t,e,rn,0,0,1),un("n1",t,e,rn,-i,-r,-1),un("n2",t,e,rn,i,-r,-1),un("n3",t,e,rn,-i,r,-1),un("n4",t,e,rn,i,r,-1),un("f1",t,e,rn,-i,-r,1),un("f2",t,e,rn,i,-r,1),un("f3",t,e,rn,-i,r,1),un("f4",t,e,rn,i,r,1),un("u1",t,e,rn,i*.7,r*1.1,-1),un("u2",t,e,rn,-i*.7,r*1.1,-1),un("u3",t,e,rn,0,r*2,-1),un("cf1",t,e,rn,-i,0,1),un("cf2",t,e,rn,i,0,1),un("cf3",t,e,rn,0,-r,1),un("cf4",t,e,rn,0,r,1),un("cn1",t,e,rn,-i,0,-1),un("cn2",t,e,rn,i,0,-1),un("cn3",t,e,rn,0,-r,-1),un("cn4",t,e,rn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function un(n,e,t,i,r,s,o){Uh.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const c=t.getAttribute("position");for(let f=0,d=a.length;f<d;f++)c.setXYZ(a[f],Uh.x,Uh.y,Uh.z)}}const Oh=new Wi;class OF extends rs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new vt;s.setIndex(new Ht(i,1)),s.setAttribute("position",new Ht(r,3)),super(s,new pi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Oh.setFromObject(this.object),Oh.isEmpty())return;const t=Oh.min,i=Oh.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kF extends rs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new vt;s.setIndex(new Ht(i,1)),s.setAttribute("position",new qe(r,3)),super(s,new pi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class FF extends Co{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new vt;o.setAttribute("position",new qe(s,3)),o.computeBoundingSphere(),super(o,new pi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new vt;c.setAttribute("position",new qe(a,3)),c.computeBoundingSphere(),this.add(new Rn(c,new ii({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aE=new N;let kh,X0;class zF extends Lt{constructor(e=new N(0,0,1),t=new N(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",kh===void 0&&(kh=new vt,kh.setAttribute("position",new qe([0,0,0,0,1,0],3)),X0=new Do(0,.5,1,5,1),X0.translate(0,-.5,0)),this.position.copy(t),this.line=new Co(kh,new pi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Rn(X0,new ii({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{aE.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(aE,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class BF extends rs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new vt;r.setAttribute("position",new qe(t,3)),r.setAttribute("color",new qe(i,3));const s=new pi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ve,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class HF{constructor(){this.type="ShapePath",this.color=new Ve,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Qc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,T=g.length;S<T;S++){const C=g[S],P=new _a;P.curves=C.curves,x.push(P)}return x}function i(g,x){const S=x.length;let T=!1;for(let C=S-1,P=0;P<S;C=P++){let R=x[C],I=x[P],b=I.x-R.x,L=I.y-R.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(R=x[P],b=-b,I=x[C],L=-L),g.y<R.y||g.y>I.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const G=L*(g.x-R.x)-b*(g.y-R.y);if(G===0)return!0;if(G<0)continue;T=!T}}else{if(g.y!==R.y)continue;if(I.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=I.x)return!0}}return T}const r=ts.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,c;const f=[];if(s.length===1)return a=s[0],c=new _a,c.curves=a.curves,f.push(c),f;let d=!r(s[0].getPoints());d=e?!d:d;const h=[],m=[];let v=[],_=0,w;m[_]=void 0,v[_]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],w=a.getPoints(),o=r(w),o=e?!o:o,o?(!d&&m[_]&&_++,m[_]={s:new _a,p:w},m[_].s.curves=a.curves,d&&_++,v[_]=[]):v[_].push({h:a,p:w[0]});if(!m[0])return t(s);if(m.length>1){let g=!1,x=0;for(let S=0,T=m.length;S<T;S++)h[S]=[];for(let S=0,T=m.length;S<T;S++){const C=v[S];for(let P=0;P<C.length;P++){const R=C[P];let I=!0;for(let b=0;b<m.length;b++)i(R.p,m[b].p)&&(S!==b&&x++,I?(I=!1,h[b].push(R)):g=!0);I&&h[S].push(R)}}x>0&&g===!1&&(v=h)}let M;for(let g=0,x=m.length;g<x;g++){c=m[g].s,f.push(c),M=v[g];for(let S=0,T=M.length;S<T;S++)c.holes.push(M[S].h)}return f}}class VF extends Io{constructor(e,t,i,r,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,o)}}class GF extends Sf{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class WF extends Mf{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class XF extends wf{constructor(e,t,i,r,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,o,a)}}class jF extends Do{constructor(e,t,i,r,s,o,a,c){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,o,a,c)}}class YF extends Ef{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class qF extends Tf{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class $F extends Af{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class ZF extends mu{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class KF extends gu{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class JF extends hu{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class QF extends ks{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class ez extends Cf{constructor(e,t,i,r,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,o)}}class tz extends bf{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class nz extends vu{constructor(e,t,i,r,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,o,a)}}class iz extends Pf{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class rz extends Rf{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class sz extends Lf{constructor(e,t,i,r,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,o)}}class oz extends If{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cm);const az=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Y_,AddEquation:ra,AddOperation:bC,AdditiveAnimationBlendMode:Z_,AdditiveBlending:ty,AlphaFormat:FC,AlwaysDepth:SC,AlwaysStencilFunc:eb,AmbientLight:Zb,AmbientLightProbe:iF,AnimationAction:n2,AnimationClip:of,AnimationLoader:Wk,AnimationMixer:SF,AnimationObjectGroup:_F,AnimationUtils:Bk,ArcCurve:Tb,ArrayCamera:mb,ArrowHelper:zF,Audio:e2,AudioAnalyser:uF,AudioContext:Px,AudioListener:oF,AudioLoader:tF,AxesHelper:BF,BackSide:ei,BasicDepthPacking:KC,BasicShadowMap:aC,Bone:ux,BooleanKeyframeTrack:La,Box2:AF,Box3:Wi,Box3Helper:kF,BoxBufferGeometry:VF,BoxGeometry:Io,BoxHelper:OF,BufferAttribute:Ht,BufferGeometry:vt,BufferGeometryLoader:Qb,ByteType:DC,Cache:ba,Camera:_f,CameraHelper:UF,CanvasTexture:ck,CapsuleBufferGeometry:GF,CapsuleGeometry:Sf,CatmullRomCurve3:Ab,CineonToneMapping:LC,CircleBufferGeometry:WF,CircleGeometry:Mf,ClampToEdgeWrapping:Qn,Clock:Rx,Color:Ve,ColorKeyframeTrack:Tx,ColorManagement:ir,CompressedArrayTexture:uk,CompressedTexture:fx,CompressedTextureLoader:Xk,ConeBufferGeometry:XF,ConeGeometry:wf,CubeCamera:ab,CubeReflectionMapping:Eo,CubeRefractionMapping:To,CubeTexture:xf,CubeTextureLoader:jk,CubeUVReflectionMapping:fu,CubicBezierCurve:hx,CubicBezierCurve3:Cb,CubicInterpolant:Vb,CullFaceBack:ey,CullFaceFront:oC,CullFaceFrontBack:l3,CullFaceNone:sC,Curve:Ur,CurvePath:Pb,CustomBlending:lC,CustomToneMapping:IC,CylinderBufferGeometry:jF,CylinderGeometry:Do,Cylindrical:TF,Data3DTexture:tx,DataArrayTexture:pm,DataTexture:Xl,DataTextureLoader:Yk,DataUtils:_I,DecrementStencilOp:x3,DecrementWrapStencilOp:M3,DefaultLoadingManager:Xb,DepthFormat:yo,DepthStencilFormat:Aa,DepthTexture:gb,DirectionalLight:$b,DirectionalLightHelper:NF,DiscreteInterpolant:Gb,DisplayP3ColorSpace:J_,DodecahedronBufferGeometry:YF,DodecahedronGeometry:Ef,DoubleSide:Cr,DstAlphaFactor:mC,DstColorFactor:vC,DynamicCopyUsage:k3,DynamicDrawUsage:L3,DynamicReadUsage:N3,EdgesGeometry:Rb,EllipseCurve:Mm,EqualDepth:wC,EqualStencilFunc:A3,EquirectangularReflectionMapping:Wc,EquirectangularRefractionMapping:Xc,Euler:du,EventDispatcher:is,ExtrudeBufferGeometry:qF,ExtrudeGeometry:Tf,FileLoader:Us,Float16BufferAttribute:TI,Float32BufferAttribute:qe,Float64BufferAttribute:AI,FloatType:Es,Fog:_m,FogExp2:ym,FramebufferTexture:lk,FrontSide:Ds,Frustum:gm,GLBufferAttribute:EF,GLSL1:z3,GLSL3:Py,GreaterDepth:TC,GreaterEqualDepth:EC,GreaterEqualStencilFunc:R3,GreaterStencilFunc:b3,GridHelper:IF,Group:Nl,HalfFloatType:tu,HemisphereLight:jb,HemisphereLightHelper:LF,HemisphereLightProbe:nF,IcosahedronBufferGeometry:$F,IcosahedronGeometry:Af,ImageBitmapLoader:eF,ImageLoader:af,ImageUtils:ex,IncrementStencilOp:_3,IncrementWrapStencilOp:S3,InstancedBufferAttribute:ru,InstancedBufferGeometry:bx,InstancedInterleavedBuffer:Hp,InstancedMesh:Mb,Int16BufferAttribute:wI,Int32BufferAttribute:EI,Int8BufferAttribute:xI,IntType:UC,InterleavedBuffer:xm,InterleavedBufferAttribute:Fi,Interpolant:Df,InterpolateDiscrete:qc,InterpolateLinear:$c,InterpolateSmooth:up,InvertStencilOp:w3,KeepStencilOp:cp,KeyframeTrack:Or,LOD:xb,LatheBufferGeometry:ZF,LatheGeometry:mu,Layers:ya,LessDepth:MC,LessEqualDepth:kp,LessEqualStencilFunc:C3,LessStencilFunc:T3,Light:No,LightProbe:Tm,Line:Co,Line3:r2,LineBasicMaterial:pi,LineCurve:wm,LineCurve3:bb,LineDashedMaterial:Sx,LineLoop:wb,LineSegments:rs,LinearEncoding:K_,LinearFilter:dn,LinearInterpolant:Ex,LinearMipMapLinearFilter:h3,LinearMipMapNearestFilter:d3,LinearMipmapLinearFilter:Ao,LinearMipmapNearestFilter:q_,LinearSRGBColorSpace:Ir,LinearToneMapping:PC,Loader:Xi,LoaderUtils:ky,LoadingManager:Ax,LoopOnce:qC,LoopPingPong:ZC,LoopRepeat:$C,LuminanceAlphaFormat:BC,LuminanceFormat:zC,MOUSE:ta,Material:Hn,MaterialLoader:Am,MathUtils:ib,Matrix3:wt,Matrix4:ut,MaxEquation:sy,Mesh:Rn,MeshBasicMaterial:ii,MeshDepthMaterial:sx,MeshDistanceMaterial:ox,MeshLambertMaterial:xx,MeshMatcapMaterial:Bb,MeshNormalMaterial:zb,MeshPhongMaterial:kb,MeshPhysicalMaterial:Ob,MeshStandardMaterial:_x,MeshToonMaterial:Fb,MinEquation:ry,MirroredRepeatWrapping:Yc,MixOperation:CC,MultiplyBlending:iy,MultiplyOperation:vf,NearestFilter:cn,NearestMipMapLinearFilter:f3,NearestMipMapNearestFilter:c3,NearestMipmapLinearFilter:Sc,NearestMipmapNearestFilter:Fp,NeverDepth:xC,NeverStencilFunc:E3,NoBlending:bs,NoColorSpace:xo,NoToneMapping:Rr,NormalAnimationBlendMode:hm,NormalBlending:ma,NotEqualDepth:AC,NotEqualStencilFunc:P3,NumberKeyframeTrack:rf,Object3D:Lt,ObjectLoader:Jk,ObjectSpaceNormalMap:QC,OctahedronBufferGeometry:KF,OctahedronGeometry:gu,OneFactor:dC,OneMinusDstAlphaFactor:gC,OneMinusDstColorFactor:yC,OneMinusSrcAlphaFactor:j_,OneMinusSrcColorFactor:pC,OrthographicCamera:es,PCFShadowMap:fm,PCFSoftShadowMap:xc,PMREMGenerator:Ly,Path:Qc,PerspectiveCamera:Gt,Plane:to,PlaneBufferGeometry:JF,PlaneGeometry:hu,PlaneHelper:FF,PointLight:qb,PointLightHelper:PF,Points:Eb,PointsMaterial:cx,PolarGridHelper:DF,PolyhedronBufferGeometry:QF,PolyhedronGeometry:ks,PositionalAudio:lF,PropertyBinding:Tt,PropertyMixer:t2,QuadraticBezierCurve:px,QuadraticBezierCurve3:mx,Quaternion:ti,QuaternionKeyframeTrack:yu,QuaternionLinearInterpolant:Wb,RED_GREEN_RGTC2_Format:Cy,RED_RGTC1_Format:YC,REVISION:cm,RGBADepthPacking:JC,RGBAFormat:wi,RGBAIntegerFormat:XC,RGBA_ASTC_10x10_Format:wy,RGBA_ASTC_10x5_Format:xy,RGBA_ASTC_10x6_Format:Sy,RGBA_ASTC_10x8_Format:My,RGBA_ASTC_12x10_Format:Ey,RGBA_ASTC_12x12_Format:Ty,RGBA_ASTC_4x4_Format:dy,RGBA_ASTC_5x4_Format:hy,RGBA_ASTC_5x5_Format:py,RGBA_ASTC_6x5_Format:my,RGBA_ASTC_6x6_Format:gy,RGBA_ASTC_8x5_Format:vy,RGBA_ASTC_8x6_Format:yy,RGBA_ASTC_8x8_Format:_y,RGBA_BPTC_Format:lp,RGBA_ETC2_EAC_Format:fy,RGBA_PVRTC_2BPPV1_Format:uy,RGBA_PVRTC_4BPPV1_Format:ly,RGBA_S3TC_DXT1_Format:sp,RGBA_S3TC_DXT3_Format:op,RGBA_S3TC_DXT5_Format:ap,RGB_ETC1_Format:jC,RGB_ETC2_Format:cy,RGB_PVRTC_2BPPV1_Format:ay,RGB_PVRTC_4BPPV1_Format:oy,RGB_S3TC_DXT1_Format:rp,RGFormat:GC,RGIntegerFormat:WC,RawShaderMaterial:Ub,Ray:yf,Raycaster:i2,RectAreaLight:Kb,RedFormat:HC,RedIntegerFormat:VC,ReinhardToneMapping:RC,RepeatWrapping:jc,ReplaceStencilOp:y3,ReverseSubtractEquation:cC,RingBufferGeometry:ez,RingGeometry:Cf,SIGNED_RED_GREEN_RGTC2_Format:by,SIGNED_RED_RGTC1_Format:Ay,SRGBColorSpace:ht,Scene:Bp,ShaderChunk:mt,ShaderLib:ci,ShaderMaterial:Nr,ShadowMaterial:Nb,Shape:_a,ShapeBufferGeometry:tz,ShapeGeometry:bf,ShapePath:HF,ShapeUtils:ts,ShortType:NC,Skeleton:Sm,SkeletonHelper:bF,SkinnedMesh:Sb,Source:fa,Sphere:fr,SphereBufferGeometry:nz,SphereGeometry:vu,Spherical:zy,SphericalHarmonics3:Jb,SplineCurve:gx,SpotLight:Yb,SpotLightHelper:CF,Sprite:_b,SpriteMaterial:lx,SrcAlphaFactor:X_,SrcAlphaSaturateFactor:_C,SrcColorFactor:hC,StaticCopyUsage:O3,StaticDrawUsage:Kc,StaticReadUsage:D3,StereoCamera:rF,StreamCopyUsage:F3,StreamDrawUsage:I3,StreamReadUsage:U3,StringKeyframeTrack:Ia,SubtractEquation:uC,SubtractiveBlending:ny,TOUCH:na,TangentSpaceNormalMap:Lo,TetrahedronBufferGeometry:iz,TetrahedronGeometry:Pf,Texture:an,TextureLoader:qk,TorusBufferGeometry:rz,TorusGeometry:Rf,TorusKnotBufferGeometry:sz,TorusKnotGeometry:Lf,Triangle:Mi,TriangleFanDrawMode:g3,TriangleStripDrawMode:m3,TrianglesDrawMode:p3,TubeBufferGeometry:oz,TubeGeometry:If,TwoPassDoubleSide:u3,UVMapping:dm,Uint16BufferAttribute:nx,Uint32BufferAttribute:ix,Uint8BufferAttribute:SI,Uint8ClampedBufferAttribute:MI,Uniform:Dx,UniformsGroup:wF,UniformsLib:Ue,UniformsUtils:mm,UnsignedByteType:Ns,UnsignedInt248Type:ga,UnsignedIntType:lo,UnsignedShort4444Type:OC,UnsignedShort5551Type:kC,UnsignedShortType:$_,VSMShadowMap:Er,Vector2:Ee,Vector3:N,Vector4:At,VectorKeyframeTrack:sf,VideoTexture:ak,WebGL1Renderer:vb,WebGL3DRenderTarget:lI,WebGLArrayRenderTarget:aI,WebGLCubeRenderTarget:lb,WebGLMultipleRenderTargets:uI,WebGLRenderTarget:Dr,WebGLRenderer:ax,WebGLUtils:pb,WireframeGeometry:yx,WrapAroundEnding:Zc,ZeroCurvatureEnding:ua,ZeroFactor:fC,ZeroSlopeEnding:ca,ZeroStencilOp:v3,_SRGBAFormat:zp,sRGBEncoding:_o},Symbol.toStringTag,{value:"Module"}));var o2={exports:{}},Da={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Da.ConcurrentRoot=1;Da.ContinuousEventPriority=4;Da.DefaultEventPriority=16;Da.DiscreteEventPriority=1;Da.IdleEventPriority=536870912;Da.LegacyRoot=0;o2.exports=Da;var Ol=o2.exports;function lz(n){let e;const t=new Set,i=(f,d)=>{const h=typeof f=="function"?f(e):f;if(h!==e){const m=e;e=d?h:Object.assign({},e,h),t.forEach(v=>v(e,m))}},r=()=>e,s=(f,d=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=d(e);function v(){const _=d(e);if(!h(m,_)){const w=m;f(m=_,w)}}return t.add(v),()=>t.delete(v)},c={setState:i,getState:r,subscribe:(f,d,h)=>d||h?s(f,d,h):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,c),c}const uz=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),lE=uz?me.useEffect:me.useLayoutEffect;function cz(n){const e=typeof n=="function"?lz(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=me.useReducer(M=>M+1,0),o=e.getState(),a=me.useRef(o),c=me.useRef(i),f=me.useRef(r),d=me.useRef(!1),h=me.useRef();h.current===void 0&&(h.current=i(o));let m,v=!1;(a.current!==o||c.current!==i||f.current!==r||d.current)&&(m=i(o),v=!r(h.current,m)),lE(()=>{v&&(h.current=m),a.current=o,c.current=i,f.current=r,d.current=!1});const _=me.useRef(o);lE(()=>{const M=()=>{try{const x=e.getState(),S=c.current(x);f.current(h.current,S)||(a.current=x,h.current=S,s())}catch{d.current=!0,s()}},g=e.subscribe(M);return e.getState()!==_.current&&M(),g},[]);const w=v?m:h.current;return me.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var a2={exports:{}},j0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function fz(){return uE||(uE=1,function(n){function e(D,H){var z=D.length;D.push(H);e:for(;0<z;){var oe=z-1>>>1,W=D[oe];if(0<r(W,H))D[oe]=H,D[z]=W,z=oe;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var H=D[0],z=D.pop();if(z!==H){D[0]=z;e:for(var oe=0,W=D.length,X=W>>>1;oe<X;){var j=2*(oe+1)-1,ce=D[j],V=j+1,B=D[V];if(0>r(ce,z))V<W&&0>r(B,ce)?(D[oe]=B,D[V]=z,oe=V):(D[oe]=ce,D[j]=z,oe=j);else if(V<W&&0>r(B,z))D[oe]=B,D[V]=z,oe=V;else break e}}return H}function r(D,H){var z=D.sortIndex-H.sortIndex;return z!==0?z:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],f=[],d=1,h=null,m=3,v=!1,_=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var H=t(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=D)i(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(D){if(w=!1,S(D),!_)if(t(c)!==null)_=!0,ue(C);else{var H=t(f);H!==null&&ne(T,H.startTime-D)}}function C(D,H){_=!1,w&&(w=!1,g(I),I=-1),v=!0;var z=m;try{for(S(H),h=t(c);h!==null&&(!(h.expirationTime>H)||D&&!G());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,m=h.priorityLevel;var W=oe(h.expirationTime<=H);H=n.unstable_now(),typeof W=="function"?h.callback=W:h===t(c)&&i(c),S(H)}else i(c);h=t(c)}if(h!==null)var X=!0;else{var j=t(f);j!==null&&ne(T,j.startTime-H),X=!1}return X}finally{h=null,m=z,v=!1}}var P=!1,R=null,I=-1,b=5,L=-1;function G(){return!(n.unstable_now()-L<b)}function K(){if(R!==null){var D=n.unstable_now();L=D;var H=!0;try{H=R(!0,D)}finally{H?q():(P=!1,R=null)}}else P=!1}var q;if(typeof x=="function")q=function(){x(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Q=te.port2;te.port1.onmessage=K,q=function(){Q.postMessage(null)}}else q=function(){M(K,0)};function ue(D){R=D,P||(P=!0,q())}function ne(D,H){I=M(function(){D(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,ue(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var z=m;m=H;try{return D()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=m;m=D;try{return H()}finally{m=z}},n.unstable_scheduleCallback=function(D,H,z){var oe=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?oe+z:oe):z=oe,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,D={id:d++,callback:H,priorityLevel:D,startTime:z,expirationTime:W,sortIndex:-1},z>oe?(D.sortIndex=z,e(f,D),t(c)===null&&D===t(f)&&(w?(g(I),I=-1):w=!0,ne(T,z-oe))):(D.sortIndex=W,e(c,D),_||v||(_=!0,ue(C))),D},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(D){var H=m;return function(){var z=m;m=H;try{return D.apply(this,arguments)}finally{m=z}}}}(Y0)),Y0}var cE;function dz(){return cE||(cE=1,j0.exports=fz()),j0.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hz=function(e){var t={},i=me,r=dz(),s=Object.assign;function o(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,p=1;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),f=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),C=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=C&&l[C]||l["@@iterator"],typeof l=="function"?l:null)}function R(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case d:return"Fragment";case f:return"Portal";case m:return"Profiler";case h:return"StrictMode";case M:return"Suspense";case g:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case _:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case w:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x:return u=l.displayName||null,u!==null?u:R(l.type)||"Memo";case S:u=l._payload,l=l._init;try{return R(l(u))}catch{}}return null}function I(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(u);case 8:return u===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function b(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,u.flags&4098&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function L(l){if(b(l)!==l)throw Error(o(188))}function G(l){var u=l.alternate;if(!u){if(u=b(l),u===null)throw Error(o(188));return u!==l?null:l}for(var p=l,y=u;;){var E=p.return;if(E===null)break;var A=E.alternate;if(A===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===p)return L(E),l;if(A===y)return L(E),u;A=A.sibling}throw Error(o(188))}if(p.return!==y.return)p=E,y=A;else{for(var F=!1,J=E.child;J;){if(J===p){F=!0,p=E,y=A;break}if(J===y){F=!0,y=E,p=A;break}J=J.sibling}if(!F){for(J=A.child;J;){if(J===p){F=!0,p=A,y=E;break}if(J===y){F=!0,y=A,p=E;break}J=J.sibling}if(!F)throw Error(o(189))}}if(p.alternate!==y)throw Error(o(190))}if(p.tag!==3)throw Error(o(188));return p.stateNode.current===p?l:u}function K(l){return l=G(l),l!==null?q(l):null}function q(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=q(l);if(u!==null)return u;l=l.sibling}return null}function te(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=te(l);if(u!==null)return u}l=l.sibling}return null}var Q=Array.isArray,ue=e.getPublicInstance,ne=e.getRootHostContext,D=e.getChildHostContext,H=e.prepareForCommit,z=e.resetAfterCommit,oe=e.createInstance,W=e.appendInitialChild,X=e.finalizeInitialChildren,j=e.prepareUpdate,ce=e.shouldSetTextContent,V=e.createTextInstance,B=e.scheduleTimeout,de=e.cancelTimeout,Oe=e.noTimeout,fe=e.isPrimaryRenderer,ye=e.supportsMutation,se=e.supportsPersistence,ie=e.supportsHydration,_e=e.getInstanceFromNode,Ce=e.preparePortalMount,Pe=e.getCurrentEventPriority,Re=e.detachDeletedInstance,ke=e.supportsMicrotasks,Ge=e.scheduleMicrotask,We=e.supportsTestSelectors,rt=e.findFiberRoot,k=e.getBoundingRect,U=e.getTextContent,Z=e.isHiddenSubtree,Me=e.matchAccessibilityRole,be=e.setFocusIfFocusable,Ie=e.setupIntersectionObserver,$e=e.appendChild,Be=e.appendChildToContainer,xe=e.commitTextUpdate,Ye=e.commitMount,Y=e.commitUpdate,ve=e.insertBefore,Te=e.insertInContainerBefore,De=e.removeChild,Qe=e.removeChildFromContainer,ct=e.resetTextContent,Ft=e.hideInstance,$=e.hideTextInstance,pe=e.unhideInstance,Ae=e.unhideTextInstance,He=e.clearContainer,Ze=e.cloneInstance,It=e.createContainerChildSet,Dt=e.appendChildToContainerChildSet,En=e.finalizeContainerChildren,dr=e.replaceContainerChildren,Yt=e.cloneHiddenInstance,ri=e.cloneHiddenTextInstance,Yi=e.canHydrateInstance,Na=e.canHydrateTextInstance,Ff=e.canHydrateSuspenseInstance,zf=e.isSuspenseInstancePending,_u=e.isSuspenseInstanceFallback,Fm=e.registerSuspenseInstanceRetry,O=e.getNextHydratableSibling,le=e.getFirstHydratableChild,Se=e.getFirstHydratableChildWithinContainer,re=e.getFirstHydratableChildWithinSuspenseInstance,we=e.hydrateInstance,et=e.hydrateTextInstance,nt=e.hydrateSuspenseInstance,it=e.getNextHydratableInstanceAfterSuspenseInstance,ft=e.commitHydratedContainer,yt=e.commitHydratedSuspenseInstance,_t=e.clearSuspenseBoundary,St=e.clearSuspenseBoundaryFromContainer,Nt=e.shouldDeleteUnhydratedTailInstances,Dn=e.didNotMatchHydratedContainerTextInstance,bi=e.didNotMatchHydratedTextInstance,hr;function Vt(l){if(hr===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);hr=u&&u[1]||""}return`
`+hr+l}var Mt=!1;function Uo(l,u){if(!l||Mt)return"";Mt=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Ne){var y=Ne}Reflect.construct(l,[],u)}else{try{u.call()}catch(Ne){y=Ne}l.call(u.prototype)}else{try{throw Error()}catch(Ne){y=Ne}l()}}catch(Ne){if(Ne&&y&&typeof Ne.stack=="string"){for(var E=Ne.stack.split(`
`),A=y.stack.split(`
`),F=E.length-1,J=A.length-1;1<=F&&0<=J&&E[F]!==A[J];)J--;for(;1<=F&&0<=J;F--,J--)if(E[F]!==A[J]){if(F!==1||J!==1)do if(F--,J--,0>J||E[F]!==A[J]){var ge=`
`+E[F].replace(" at new "," at ");return l.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",l.displayName)),ge}while(1<=F&&0<=J);break}}}finally{Mt=!1,Error.prepareStackTrace=p}return(l=l?l.displayName||l.name:"")?Vt(l):""}var hn=Object.prototype.hasOwnProperty,pr=[],ss=-1;function mi(l){return{current:l}}function Ut(l){0>ss||(l.current=pr[ss],pr[ss]=null,ss--)}function dt(l,u){ss++,pr[ss]=l.current,l.current=u}var Vn={},pn=mi(Vn),zt=mi(!1),mr=Vn;function Fs(l,u){var p=l.type.contextTypes;if(!p)return Vn;var y=l.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===u)return y.__reactInternalMemoizedMaskedChildContext;var E={},A;for(A in p)E[A]=u[A];return y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=E),E}function Nn(l){return l=l.childContextTypes,l!=null}function Bf(){Ut(zt),Ut(pn)}function qx(l,u,p){if(pn.current!==Vn)throw Error(o(168));dt(pn,u),dt(zt,p)}function $x(l,u,p){var y=l.stateNode;if(u=u.childContextTypes,typeof y.getChildContext!="function")return p;y=y.getChildContext();for(var E in y)if(!(E in u))throw Error(o(108,I(l)||"Unknown",E));return s({},p,y)}function Hf(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Vn,mr=pn.current,dt(pn,l),dt(zt,zt.current),!0}function Zx(l,u,p){var y=l.stateNode;if(!y)throw Error(o(169));p?(l=$x(l,u,mr),y.__reactInternalMemoizedMergedChildContext=l,Ut(zt),Ut(pn),dt(pn,l)):Ut(zt),dt(zt,p)}var gr=Math.clz32?Math.clz32:j2,W2=Math.log,X2=Math.LN2;function j2(l){return l>>>=0,l===0?32:31-(W2(l)/X2|0)|0}var Vf=64,Gf=4194304;function xu(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Wf(l,u){var p=l.pendingLanes;if(p===0)return 0;var y=0,E=l.suspendedLanes,A=l.pingedLanes,F=p&268435455;if(F!==0){var J=F&~E;J!==0?y=xu(J):(A&=F,A!==0&&(y=xu(A)))}else F=p&~E,F!==0?y=xu(F):A!==0&&(y=xu(A));if(y===0)return 0;if(u!==0&&u!==y&&!(u&E)&&(E=y&-y,A=u&-u,E>=A||E===16&&(A&4194240)!==0))return u;if(y&4&&(y|=p&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=y;0<u;)p=31-gr(u),E=1<<p,y|=l[p],u&=~E;return y}function Y2(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q2(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,E=l.expirationTimes,A=l.pendingLanes;0<A;){var F=31-gr(A),J=1<<F,ge=E[F];ge===-1?(!(J&p)||J&y)&&(E[F]=Y2(J,u)):ge<=u&&(l.expiredLanes|=J),A&=~J}}function zm(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Bm(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function Su(l,u,p){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-gr(u),l[u]=p}function $2(l,u){var p=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var y=l.eventTimes;for(l=l.expirationTimes;0<p;){var E=31-gr(p),A=1<<E;u[E]=0,y[E]=-1,l[E]=-1,p&=~A}}function Hm(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-gr(p),E=1<<y;E&u|l[y]&u&&(l[y]|=u),p&=~E}}var bt=0;function Kx(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Vm=r.unstable_scheduleCallback,Jx=r.unstable_cancelCallback,Z2=r.unstable_shouldYield,K2=r.unstable_requestPaint,Tn=r.unstable_now,Gm=r.unstable_ImmediatePriority,J2=r.unstable_UserBlockingPriority,Wm=r.unstable_NormalPriority,Q2=r.unstable_IdlePriority,Xf=null,kr=null;function eP(l){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Xf,l,void 0,(l.current.flags&128)===128)}catch{}}function tP(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Fr=typeof Object.is=="function"?Object.is:tP,os=null,jf=!1,Xm=!1;function Qx(l){os===null?os=[l]:os.push(l)}function nP(l){jf=!0,Qx(l)}function zr(){if(!Xm&&os!==null){Xm=!0;var l=0,u=bt;try{var p=os;for(bt=1;l<p.length;l++){var y=p[l];do y=y(!0);while(y!==null)}os=null,jf=!1}catch(E){throw os!==null&&(os=os.slice(l+1)),Vm(Gm,zr),E}finally{bt=u,Xm=!1}}return null}var iP=a.ReactCurrentBatchConfig;function Yf(l,u){if(Fr(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!hn.call(u,E)||!Fr(l[E],u[E]))return!1}return!0}function rP(l){switch(l.tag){case 5:return Vt(l.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return l=Uo(l.type,!1),l;case 11:return l=Uo(l.type.render,!1),l;case 1:return l=Uo(l.type,!0),l;default:return""}}function vr(l,u){if(l&&l.defaultProps){u=s({},u),l=l.defaultProps;for(var p in l)u[p]===void 0&&(u[p]=l[p]);return u}return u}var qf=mi(null),$f=null,Ua=null,jm=null;function Ym(){jm=Ua=$f=null}function e1(l,u,p){fe?(dt(qf,u._currentValue),u._currentValue=p):(dt(qf,u._currentValue2),u._currentValue2=p)}function qm(l){var u=qf.current;Ut(qf),fe?l._currentValue=u:l._currentValue2=u}function $m(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function Oa(l,u){$f=l,jm=Ua=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&u&&(Li=!0),l.firstContext=null)}function qi(l){var u=fe?l._currentValue:l._currentValue2;if(jm!==l)if(l={context:l,memoizedValue:u,next:null},Ua===null){if($f===null)throw Error(o(308));Ua=l,$f.dependencies={lanes:0,firstContext:l}}else Ua=Ua.next=l;return u}var Br=null,zs=!1;function Zm(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t1(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function as(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Bs(l,u){var p=l.updateQueue;p!==null&&(p=p.shared,mn!==null&&l.mode&1&&!(xt&2)?(l=p.interleaved,l===null?(u.next=u,Br===null?Br=[p]:Br.push(p)):(u.next=l.next,l.next=u),p.interleaved=u):(l=p.pending,l===null?u.next=u:(u.next=l.next,l.next=u),p.pending=u))}function Zf(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194240)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,Hm(l,p)}}function n1(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var F={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};A===null?E=A=F:A=A.next=F,p=p.next}while(p!==null);A===null?E=A=u:A=A.next=u}else E=A=u;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:y.shared,effects:y.effects},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}function Kf(l,u,p,y){var E=l.updateQueue;zs=!1;var A=E.firstBaseUpdate,F=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var ge=J,Ne=ge.next;ge.next=null,F===null?A=Ne:F.next=Ne,F=ge;var je=l.alternate;je!==null&&(je=je.updateQueue,J=je.lastBaseUpdate,J!==F&&(J===null?je.firstBaseUpdate=Ne:J.next=Ne,je.lastBaseUpdate=ge))}if(A!==null){var st=E.baseState;F=0,je=Ne=ge=null,J=A;do{var tt=J.lane,Bt=J.eventTime;if((y&tt)===tt){je!==null&&(je=je.next={eventTime:Bt,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var Je=l,jn=J;switch(tt=u,Bt=p,jn.tag){case 1:if(Je=jn.payload,typeof Je=="function"){st=Je.call(Bt,st,tt);break e}st=Je;break e;case 3:Je.flags=Je.flags&-65537|128;case 0:if(Je=jn.payload,tt=typeof Je=="function"?Je.call(Bt,st,tt):Je,tt==null)break e;st=s({},st,tt);break e;case 2:zs=!0}}J.callback!==null&&J.lane!==0&&(l.flags|=64,tt=E.effects,tt===null?E.effects=[J]:tt.push(J))}else Bt={eventTime:Bt,lane:tt,tag:J.tag,payload:J.payload,callback:J.callback,next:null},je===null?(Ne=je=Bt,ge=st):je=je.next=Bt,F|=tt;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;tt=J,J=tt.next,tt.next=null,E.lastBaseUpdate=tt,E.shared.pending=null}}while(1);if(je===null&&(ge=st),E.baseState=ge,E.firstBaseUpdate=Ne,E.lastBaseUpdate=je,u=E.shared.interleaved,u!==null){E=u;do F|=E.lane,E=E.next;while(E!==u)}else A===null&&(E.shared.lanes=0);Xa|=F,l.lanes=F,l.memoizedState=st}}function i1(l,u,p){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var y=l[u],E=y.callback;if(E!==null){if(y.callback=null,y=p,typeof E!="function")throw Error(o(191,E));E.call(y)}}}var r1=new i.Component().refs;function Km(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:s({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var Jf={isMounted:function(l){return(l=l._reactInternals)?b(l)===l:!1},enqueueSetState:function(l,u,p){l=l._reactInternals;var y=oi(),E=Gs(l),A=as(y,E);A.payload=u,p!=null&&(A.callback=p),Bs(l,A),u=Qi(l,E,y),u!==null&&Zf(u,l,E)},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=oi(),E=Gs(l),A=as(y,E);A.tag=1,A.payload=u,p!=null&&(A.callback=p),Bs(l,A),u=Qi(l,E,y),u!==null&&Zf(u,l,E)},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=oi(),y=Gs(l),E=as(p,y);E.tag=2,u!=null&&(E.callback=u),Bs(l,E),u=Qi(l,y,p),u!==null&&Zf(u,l,y)}};function s1(l,u,p,y,E,A,F){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,A,F):u.prototype&&u.prototype.isPureReactComponent?!Yf(p,y)||!Yf(E,A):!0}function o1(l,u,p){var y=!1,E=Vn,A=u.contextType;return typeof A=="object"&&A!==null?A=qi(A):(E=Nn(u)?mr:pn.current,y=u.contextTypes,A=(y=y!=null)?Fs(l,E):Vn),u=new u(p,A),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Jf,l.stateNode=u,u._reactInternals=l,y&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=E,l.__reactInternalMemoizedMaskedChildContext=A),u}function a1(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&Jf.enqueueReplaceState(u,u.state,null)}function Jm(l,u,p,y){var E=l.stateNode;E.props=p,E.state=l.memoizedState,E.refs=r1,Zm(l);var A=u.contextType;typeof A=="object"&&A!==null?E.context=qi(A):(A=Nn(u)?mr:pn.current,E.context=Fs(l,A)),E.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(Km(l,u,A,p),E.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(u=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),u!==E.state&&Jf.enqueueReplaceState(E,E.state,null),Kf(l,p,E,y),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308)}var ka=[],Fa=0,Qf=null,ed=0,$i=[],Zi=0,Oo=null,ls=1,us="";function ko(l,u){ka[Fa++]=ed,ka[Fa++]=Qf,Qf=l,ed=u}function l1(l,u,p){$i[Zi++]=ls,$i[Zi++]=us,$i[Zi++]=Oo,Oo=l;var y=ls;l=us;var E=32-gr(y)-1;y&=~(1<<E),p+=1;var A=32-gr(u)+E;if(30<A){var F=E-E%5;A=(y&(1<<F)-1).toString(32),y>>=F,E-=F,ls=1<<32-gr(u)+E|p<<E|y,us=A+l}else ls=1<<A|p<<E|y,us=l}function Qm(l){l.return!==null&&(ko(l,1),l1(l,1,0))}function eg(l){for(;l===Qf;)Qf=ka[--Fa],ka[Fa]=null,ed=ka[--Fa],ka[Fa]=null;for(;l===Oo;)Oo=$i[--Zi],$i[Zi]=null,us=$i[--Zi],$i[Zi]=null,ls=$i[--Zi],$i[Zi]=null}var Pi=null,Ri=null,qt=!1,Mu=!1,yr=null;function u1(l,u){var p=er(5,null,null,0);p.elementType="DELETED",p.stateNode=u,p.return=l,u=l.deletions,u===null?(l.deletions=[p],l.flags|=16):u.push(p)}function c1(l,u){switch(l.tag){case 5:return u=Yi(u,l.type,l.pendingProps),u!==null?(l.stateNode=u,Pi=l,Ri=le(u),!0):!1;case 6:return u=Na(u,l.pendingProps),u!==null?(l.stateNode=u,Pi=l,Ri=null,!0):!1;case 13:if(u=Ff(u),u!==null){var p=Oo!==null?{id:ls,overflow:us}:null;return l.memoizedState={dehydrated:u,treeContext:p,retryLane:1073741824},p=er(18,null,null,0),p.stateNode=u,p.return=l,l.child=p,Pi=l,Ri=null,!0}return!1;default:return!1}}function tg(l){return(l.mode&1)!==0&&(l.flags&128)===0}function ng(l){if(qt){var u=Ri;if(u){var p=u;if(!c1(l,u)){if(tg(l))throw Error(o(418));u=O(p);var y=Pi;u&&c1(l,u)?u1(y,p):(l.flags=l.flags&-4097|2,qt=!1,Pi=l)}}else{if(tg(l))throw Error(o(418));l.flags=l.flags&-4097|2,qt=!1,Pi=l}}}function f1(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Pi=l}function wu(l){if(!ie||l!==Pi)return!1;if(!qt)return f1(l),qt=!0,!1;if(l.tag!==3&&(l.tag!==5||Nt(l.type)&&!ce(l.type,l.memoizedProps))){var u=Ri;if(u){if(tg(l)){for(l=Ri;l;)l=O(l);throw Error(o(418))}for(;u;)u1(l,u),u=O(u)}}if(f1(l),l.tag===13){if(!ie)throw Error(o(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));Ri=it(l)}else Ri=Pi?O(l.stateNode):null;return!0}function za(){ie&&(Ri=Pi=null,Mu=qt=!1)}function ig(l){yr===null?yr=[l]:yr.push(l)}function Eu(l,u,p){if(l=p.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(o(309));var y=p.stateNode}if(!y)throw Error(o(147,l));var E=y,A=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===A?u.ref:(u=function(F){var J=E.refs;J===r1&&(J=E.refs={}),F===null?delete J[A]:J[A]=F},u._stringRef=A,u)}if(typeof l!="string")throw Error(o(284));if(!p._owner)throw Error(o(290,l))}return l}function td(l,u){throw l=Object.prototype.toString.call(u),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function d1(l){var u=l._init;return u(l._payload)}function h1(l){function u(ae,ee){if(l){var he=ae.deletions;he===null?(ae.deletions=[ee],ae.flags|=16):he.push(ee)}}function p(ae,ee){if(!l)return null;for(;ee!==null;)u(ae,ee),ee=ee.sibling;return null}function y(ae,ee){for(ae=new Map;ee!==null;)ee.key!==null?ae.set(ee.key,ee):ae.set(ee.index,ee),ee=ee.sibling;return ae}function E(ae,ee){return ae=Xs(ae,ee),ae.index=0,ae.sibling=null,ae}function A(ae,ee,he){return ae.index=he,l?(he=ae.alternate,he!==null?(he=he.index,he<ee?(ae.flags|=2,ee):he):(ae.flags|=2,ee)):(ae.flags|=1048576,ee)}function F(ae){return l&&ae.alternate===null&&(ae.flags|=2),ae}function J(ae,ee,he,ze){return ee===null||ee.tag!==6?(ee=Bg(he,ae.mode,ze),ee.return=ae,ee):(ee=E(ee,he),ee.return=ae,ee)}function ge(ae,ee,he,ze){var Ke=he.type;return Ke===d?je(ae,ee,he.props.children,ze,he.key):ee!==null&&(ee.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===S&&d1(Ke)===ee.type)?(ze=E(ee,he.props),ze.ref=Eu(ae,ee,he),ze.return=ae,ze):(ze=Id(he.type,he.key,he.props,null,ae.mode,ze),ze.ref=Eu(ae,ee,he),ze.return=ae,ze)}function Ne(ae,ee,he,ze){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==he.containerInfo||ee.stateNode.implementation!==he.implementation?(ee=Hg(he,ae.mode,ze),ee.return=ae,ee):(ee=E(ee,he.children||[]),ee.return=ae,ee)}function je(ae,ee,he,ze,Ke){return ee===null||ee.tag!==7?(ee=Wo(he,ae.mode,ze,Ke),ee.return=ae,ee):(ee=E(ee,he),ee.return=ae,ee)}function st(ae,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Bg(""+ee,ae.mode,he),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case c:return he=Id(ee.type,ee.key,ee.props,null,ae.mode,he),he.ref=Eu(ae,null,ee),he.return=ae,he;case f:return ee=Hg(ee,ae.mode,he),ee.return=ae,ee;case S:var ze=ee._init;return st(ae,ze(ee._payload),he)}if(Q(ee)||P(ee))return ee=Wo(ee,ae.mode,he,null),ee.return=ae,ee;td(ae,ee)}return null}function tt(ae,ee,he,ze){var Ke=ee!==null?ee.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return Ke!==null?null:J(ae,ee,""+he,ze);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case c:return he.key===Ke?ge(ae,ee,he,ze):null;case f:return he.key===Ke?Ne(ae,ee,he,ze):null;case S:return Ke=he._init,tt(ae,ee,Ke(he._payload),ze)}if(Q(he)||P(he))return Ke!==null?null:je(ae,ee,he,ze,null);td(ae,he)}return null}function Bt(ae,ee,he,ze,Ke){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ae=ae.get(he)||null,J(ee,ae,""+ze,Ke);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case c:return ae=ae.get(ze.key===null?he:ze.key)||null,ge(ee,ae,ze,Ke);case f:return ae=ae.get(ze.key===null?he:ze.key)||null,Ne(ee,ae,ze,Ke);case S:var pt=ze._init;return Bt(ae,ee,he,pt(ze._payload),Ke)}if(Q(ze)||P(ze))return ae=ae.get(he)||null,je(ee,ae,ze,Ke,null);td(ee,ze)}return null}function Je(ae,ee,he,ze){for(var Ke=null,pt=null,ot=ee,Pt=ee=0,Cn=null;ot!==null&&Pt<he.length;Pt++){ot.index>Pt?(Cn=ot,ot=null):Cn=ot.sibling;var Rt=tt(ae,ot,he[Pt],ze);if(Rt===null){ot===null&&(ot=Cn);break}l&&ot&&Rt.alternate===null&&u(ae,ot),ee=A(Rt,ee,Pt),pt===null?Ke=Rt:pt.sibling=Rt,pt=Rt,ot=Cn}if(Pt===he.length)return p(ae,ot),qt&&ko(ae,Pt),Ke;if(ot===null){for(;Pt<he.length;Pt++)ot=st(ae,he[Pt],ze),ot!==null&&(ee=A(ot,ee,Pt),pt===null?Ke=ot:pt.sibling=ot,pt=ot);return qt&&ko(ae,Pt),Ke}for(ot=y(ae,ot);Pt<he.length;Pt++)Cn=Bt(ot,ae,Pt,he[Pt],ze),Cn!==null&&(l&&Cn.alternate!==null&&ot.delete(Cn.key===null?Pt:Cn.key),ee=A(Cn,ee,Pt),pt===null?Ke=Cn:pt.sibling=Cn,pt=Cn);return l&&ot.forEach(function(js){return u(ae,js)}),qt&&ko(ae,Pt),Ke}function jn(ae,ee,he,ze){var Ke=P(he);if(typeof Ke!="function")throw Error(o(150));if(he=Ke.call(he),he==null)throw Error(o(151));for(var pt=Ke=null,ot=ee,Pt=ee=0,Cn=null,Rt=he.next();ot!==null&&!Rt.done;Pt++,Rt=he.next()){ot.index>Pt?(Cn=ot,ot=null):Cn=ot.sibling;var js=tt(ae,ot,Rt.value,ze);if(js===null){ot===null&&(ot=Cn);break}l&&ot&&js.alternate===null&&u(ae,ot),ee=A(js,ee,Pt),pt===null?Ke=js:pt.sibling=js,pt=js,ot=Cn}if(Rt.done)return p(ae,ot),qt&&ko(ae,Pt),Ke;if(ot===null){for(;!Rt.done;Pt++,Rt=he.next())Rt=st(ae,Rt.value,ze),Rt!==null&&(ee=A(Rt,ee,Pt),pt===null?Ke=Rt:pt.sibling=Rt,pt=Rt);return qt&&ko(ae,Pt),Ke}for(ot=y(ae,ot);!Rt.done;Pt++,Rt=he.next())Rt=Bt(ot,ae,Pt,Rt.value,ze),Rt!==null&&(l&&Rt.alternate!==null&&ot.delete(Rt.key===null?Pt:Rt.key),ee=A(Rt,ee,Pt),pt===null?Ke=Rt:pt.sibling=Rt,pt=Rt);return l&&ot.forEach(function(NP){return u(ae,NP)}),qt&&ko(ae,Pt),Ke}function tr(ae,ee,he,ze){if(typeof he=="object"&&he!==null&&he.type===d&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case c:e:{for(var Ke=he.key,pt=ee;pt!==null;){if(pt.key===Ke){if(Ke=he.type,Ke===d){if(pt.tag===7){p(ae,pt.sibling),ee=E(pt,he.props.children),ee.return=ae,ae=ee;break e}}else if(pt.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===S&&d1(Ke)===pt.type){p(ae,pt.sibling),ee=E(pt,he.props),ee.ref=Eu(ae,pt,he),ee.return=ae,ae=ee;break e}p(ae,pt);break}else u(ae,pt);pt=pt.sibling}he.type===d?(ee=Wo(he.props.children,ae.mode,ze,he.key),ee.return=ae,ae=ee):(ze=Id(he.type,he.key,he.props,null,ae.mode,ze),ze.ref=Eu(ae,ee,he),ze.return=ae,ae=ze)}return F(ae);case f:e:{for(pt=he.key;ee!==null;){if(ee.key===pt)if(ee.tag===4&&ee.stateNode.containerInfo===he.containerInfo&&ee.stateNode.implementation===he.implementation){p(ae,ee.sibling),ee=E(ee,he.children||[]),ee.return=ae,ae=ee;break e}else{p(ae,ee);break}else u(ae,ee);ee=ee.sibling}ee=Hg(he,ae.mode,ze),ee.return=ae,ae=ee}return F(ae);case S:return pt=he._init,tr(ae,ee,pt(he._payload),ze)}if(Q(he))return Je(ae,ee,he,ze);if(P(he))return jn(ae,ee,he,ze);td(ae,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ee!==null&&ee.tag===6?(p(ae,ee.sibling),ee=E(ee,he),ee.return=ae,ae=ee):(p(ae,ee),ee=Bg(he,ae.mode,ze),ee.return=ae,ae=ee),F(ae)):p(ae,ee)}return tr}var Ba=h1(!0),p1=h1(!1),Tu={},Ki=mi(Tu),Au=mi(Tu),Ha=mi(Tu);function Hr(l){if(l===Tu)throw Error(o(174));return l}function rg(l,u){dt(Ha,u),dt(Au,l),dt(Ki,Tu),l=ne(u),Ut(Ki),dt(Ki,l)}function Va(){Ut(Ki),Ut(Au),Ut(Ha)}function m1(l){var u=Hr(Ha.current),p=Hr(Ki.current);u=D(p,l.type,u),p!==u&&(dt(Au,l),dt(Ki,u))}function sg(l){Au.current===l&&(Ut(Ki),Ut(Au))}var Kt=mi(0);function nd(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||zf(p)||_u(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var og=[];function ag(){for(var l=0;l<og.length;l++){var u=og[l];fe?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}og.length=0}var id=a.ReactCurrentDispatcher,Ji=a.ReactCurrentBatchConfig,Ga=0,nn=null,Gn=null,An=null,rd=!1,Cu=!1,bu=0,sP=0;function Wn(){throw Error(o(321))}function lg(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!Fr(l[p],u[p]))return!1;return!0}function ug(l,u,p,y,E,A){if(Ga=A,nn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,id.current=l===null||l.memoizedState===null?uP:cP,l=p(y,E),Cu){A=0;do{if(Cu=!1,bu=0,25<=A)throw Error(o(301));A+=1,An=Gn=null,u.updateQueue=null,id.current=fP,l=p(y,E)}while(Cu)}if(id.current=ud,u=Gn!==null&&Gn.next!==null,Ga=0,An=Gn=nn=null,rd=!1,u)throw Error(o(300));return l}function cg(){var l=bu!==0;return bu=0,l}function cs(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?nn.memoizedState=An=l:An=An.next=l,An}function Vr(){if(Gn===null){var l=nn.alternate;l=l!==null?l.memoizedState:null}else l=Gn.next;var u=An===null?nn.memoizedState:An.next;if(u!==null)An=u,Gn=l;else{if(l===null)throw Error(o(310));Gn=l,l={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},An===null?nn.memoizedState=An=l:An=An.next=l}return An}function Fo(l,u){return typeof u=="function"?u(l):u}function sd(l){var u=Vr(),p=u.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=l;var y=Gn,E=y.baseQueue,A=p.pending;if(A!==null){if(E!==null){var F=E.next;E.next=A.next,A.next=F}y.baseQueue=E=A,p.pending=null}if(E!==null){A=E.next,y=y.baseState;var J=F=null,ge=null,Ne=A;do{var je=Ne.lane;if((Ga&je)===je)ge!==null&&(ge=ge.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),y=Ne.hasEagerState?Ne.eagerState:l(y,Ne.action);else{var st={lane:je,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};ge===null?(J=ge=st,F=y):ge=ge.next=st,nn.lanes|=je,Xa|=je}Ne=Ne.next}while(Ne!==null&&Ne!==A);ge===null?F=y:ge.next=J,Fr(y,u.memoizedState)||(Li=!0),u.memoizedState=y,u.baseState=F,u.baseQueue=ge,p.lastRenderedState=y}if(l=p.interleaved,l!==null){E=l;do A=E.lane,nn.lanes|=A,Xa|=A,E=E.next;while(E!==l)}else E===null&&(p.lanes=0);return[u.memoizedState,p.dispatch]}function od(l){var u=Vr(),p=u.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=l;var y=p.dispatch,E=p.pending,A=u.memoizedState;if(E!==null){p.pending=null;var F=E=E.next;do A=l(A,F.action),F=F.next;while(F!==E);Fr(A,u.memoizedState)||(Li=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),p.lastRenderedState=A}return[A,y]}function g1(){}function v1(l,u){var p=nn,y=Vr(),E=u(),A=!Fr(y.memoizedState,E);if(A&&(y.memoizedState=E,Li=!0),y=y.queue,Ru(x1.bind(null,p,y,l),[l]),y.getSnapshot!==u||A||An!==null&&An.memoizedState.tag&1){if(p.flags|=2048,Pu(9,_1.bind(null,p,y,E,u),void 0,null),mn===null)throw Error(o(349));Ga&30||y1(p,u,E)}return E}function y1(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=nn.updateQueue,u===null?(u={lastEffect:null,stores:null},nn.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function _1(l,u,p,y){u.value=p,u.getSnapshot=y,S1(u)&&Qi(l,1,-1)}function x1(l,u,p){return p(function(){S1(u)&&Qi(l,1,-1)})}function S1(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!Fr(l,p)}catch{return!0}}function fg(l){var u=cs();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:l},u.queue=l,l=l.dispatch=lP.bind(null,nn,l),[u.memoizedState,l]}function Pu(l,u,p,y){return l={tag:l,create:u,destroy:p,deps:y,next:null},u=nn.updateQueue,u===null?(u={lastEffect:null,stores:null},nn.updateQueue=u,u.lastEffect=l.next=l):(p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l)),l}function M1(){return Vr().memoizedState}function ad(l,u,p,y){var E=cs();nn.flags|=l,E.memoizedState=Pu(1|u,p,void 0,y===void 0?null:y)}function ld(l,u,p,y){var E=Vr();y=y===void 0?null:y;var A=void 0;if(Gn!==null){var F=Gn.memoizedState;if(A=F.destroy,y!==null&&lg(y,F.deps)){E.memoizedState=Pu(u,p,A,y);return}}nn.flags|=l,E.memoizedState=Pu(1|u,p,A,y)}function dg(l,u){return ad(8390656,8,l,u)}function Ru(l,u){return ld(2048,8,l,u)}function w1(l,u){return ld(4,2,l,u)}function E1(l,u){return ld(4,4,l,u)}function T1(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function A1(l,u,p){return p=p!=null?p.concat([l]):null,ld(4,4,T1.bind(null,u,l),p)}function hg(){}function C1(l,u){var p=Vr();u=u===void 0?null:u;var y=p.memoizedState;return y!==null&&u!==null&&lg(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function b1(l,u){var p=Vr();u=u===void 0?null:u;var y=p.memoizedState;return y!==null&&u!==null&&lg(u,y[1])?y[0]:(l=l(),p.memoizedState=[l,u],l)}function oP(l,u){var p=bt;bt=p!==0&&4>p?p:4,l(!0);var y=Ji.transition;Ji.transition={};try{l(!1),u()}finally{bt=p,Ji.transition=y}}function P1(){return Vr().memoizedState}function aP(l,u,p){var y=Gs(l);p={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null},R1(l)?L1(u,p):(I1(l,u,p),p=oi(),l=Qi(l,y,p),l!==null&&D1(l,u,y))}function lP(l,u,p){var y=Gs(l),E={lane:y,action:p,hasEagerState:!1,eagerState:null,next:null};if(R1(l))L1(u,E);else{I1(l,u,E);var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var F=u.lastRenderedState,J=A(F,p);if(E.hasEagerState=!0,E.eagerState=J,Fr(J,F))return}catch{}finally{}p=oi(),l=Qi(l,y,p),l!==null&&D1(l,u,y)}}function R1(l){var u=l.alternate;return l===nn||u!==null&&u===nn}function L1(l,u){Cu=rd=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function I1(l,u,p){mn!==null&&l.mode&1&&!(xt&2)?(l=u.interleaved,l===null?(p.next=p,Br===null?Br=[u]:Br.push(u)):(p.next=l.next,l.next=p),u.interleaved=p):(l=u.pending,l===null?p.next=p:(p.next=l.next,l.next=p),u.pending=p)}function D1(l,u,p){if(p&4194240){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,Hm(l,p)}}var ud={readContext:qi,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},uP={readContext:qi,useCallback:function(l,u){return cs().memoizedState=[l,u===void 0?null:u],l},useContext:qi,useEffect:dg,useImperativeHandle:function(l,u,p){return p=p!=null?p.concat([l]):null,ad(4194308,4,T1.bind(null,u,l),p)},useLayoutEffect:function(l,u){return ad(4194308,4,l,u)},useInsertionEffect:function(l,u){return ad(4,2,l,u)},useMemo:function(l,u){var p=cs();return u=u===void 0?null:u,l=l(),p.memoizedState=[l,u],l},useReducer:function(l,u,p){var y=cs();return u=p!==void 0?p(u):u,y.memoizedState=y.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},y.queue=l,l=l.dispatch=aP.bind(null,nn,l),[y.memoizedState,l]},useRef:function(l){var u=cs();return l={current:l},u.memoizedState=l},useState:fg,useDebugValue:hg,useDeferredValue:function(l){var u=fg(l),p=u[0],y=u[1];return dg(function(){var E=Ji.transition;Ji.transition={};try{y(l)}finally{Ji.transition=E}},[l]),p},useTransition:function(){var l=fg(!1),u=l[0];return l=oP.bind(null,l[1]),cs().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,p){var y=nn,E=cs();if(qt){if(p===void 0)throw Error(o(407));p=p()}else{if(p=u(),mn===null)throw Error(o(349));Ga&30||y1(y,u,p)}E.memoizedState=p;var A={value:p,getSnapshot:u};return E.queue=A,dg(x1.bind(null,y,A,l),[l]),y.flags|=2048,Pu(9,_1.bind(null,y,A,p,u),void 0,null),p},useId:function(){var l=cs(),u=mn.identifierPrefix;if(qt){var p=us,y=ls;p=(y&~(1<<32-gr(y)-1)).toString(32)+p,u=":"+u+"R"+p,p=bu++,0<p&&(u+="H"+p.toString(32)),u+=":"}else p=sP++,u=":"+u+"r"+p.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},cP={readContext:qi,useCallback:C1,useContext:qi,useEffect:Ru,useImperativeHandle:A1,useInsertionEffect:w1,useLayoutEffect:E1,useMemo:b1,useReducer:sd,useRef:M1,useState:function(){return sd(Fo)},useDebugValue:hg,useDeferredValue:function(l){var u=sd(Fo),p=u[0],y=u[1];return Ru(function(){var E=Ji.transition;Ji.transition={};try{y(l)}finally{Ji.transition=E}},[l]),p},useTransition:function(){var l=sd(Fo)[0],u=Vr().memoizedState;return[l,u]},useMutableSource:g1,useSyncExternalStore:v1,useId:P1,unstable_isNewReconciler:!1},fP={readContext:qi,useCallback:C1,useContext:qi,useEffect:Ru,useImperativeHandle:A1,useInsertionEffect:w1,useLayoutEffect:E1,useMemo:b1,useReducer:od,useRef:M1,useState:function(){return od(Fo)},useDebugValue:hg,useDeferredValue:function(l){var u=od(Fo),p=u[0],y=u[1];return Ru(function(){var E=Ji.transition;Ji.transition={};try{y(l)}finally{Ji.transition=E}},[l]),p},useTransition:function(){var l=od(Fo)[0],u=Vr().memoizedState;return[l,u]},useMutableSource:g1,useSyncExternalStore:v1,useId:P1,unstable_isNewReconciler:!1};function pg(l,u){try{var p="",y=u;do p+=rP(y),y=y.return;while(y);var E=p}catch(A){E=`
Error generating stack: `+A.message+`
`+A.stack}return{value:l,source:u,stack:E}}function mg(l,u){try{console.error(u.value)}catch(p){setTimeout(function(){throw p})}}var dP=typeof WeakMap=="function"?WeakMap:Map;function N1(l,u,p){p=as(-1,p),p.tag=3,p.payload={element:null};var y=u.value;return p.callback=function(){Td||(Td=!0,Dg=y),mg(l,u)},p}function U1(l,u,p){p=as(-1,p),p.tag=3;var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var E=u.value;p.payload=function(){return y(E)},p.callback=function(){mg(l,u)}}var A=l.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(p.callback=function(){mg(l,u),typeof y!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var F=u.stack;this.componentDidCatch(u.value,{componentStack:F!==null?F:""})}),p}function O1(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new dP;var E=new Set;y.set(u,E)}else E=y.get(u),E===void 0&&(E=new Set,y.set(u,E));E.has(p)||(E.add(p),l=AP.bind(null,l,u,p),u.then(l,l))}function k1(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function F1(l,u,p,y,E){return l.mode&1?(l.flags|=65536,l.lanes=E,l):(l===u?l.flags|=65536:(l.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(u=as(-1,1),u.tag=2,Bs(p,u))),p.lanes|=1),l)}function Gr(l){l.flags|=4}function z1(l,u){if(l!==null&&l.child===u.child)return!0;if(u.flags&16)return!1;for(l=u.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var Lu,Iu,cd,fd;if(ye)Lu=function(l,u){for(var p=u.child;p!==null;){if(p.tag===5||p.tag===6)W(l,p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===u)break;for(;p.sibling===null;){if(p.return===null||p.return===u)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},Iu=function(){},cd=function(l,u,p,y,E){if(l=l.memoizedProps,l!==y){var A=u.stateNode,F=Hr(Ki.current);p=j(A,p,l,y,E,F),(u.updateQueue=p)&&Gr(u)}},fd=function(l,u,p,y){p!==y&&Gr(u)};else if(se){Lu=function(l,u,p,y){for(var E=u.child;E!==null;){if(E.tag===5){var A=E.stateNode;p&&y&&(A=Yt(A,E.type,E.memoizedProps,E)),W(l,A)}else if(E.tag===6)A=E.stateNode,p&&y&&(A=ri(A,E.memoizedProps,E)),W(l,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),Lu(l,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)break;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var B1=function(l,u,p,y){for(var E=u.child;E!==null;){if(E.tag===5){var A=E.stateNode;p&&y&&(A=Yt(A,E.type,E.memoizedProps,E)),Dt(l,A)}else if(E.tag===6)A=E.stateNode,p&&y&&(A=ri(A,E.memoizedProps,E)),Dt(l,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),B1(l,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===u)break;for(;E.sibling===null;){if(E.return===null||E.return===u)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Iu=function(l,u){var p=u.stateNode;if(!z1(l,u)){l=p.containerInfo;var y=It(l);B1(y,u,!1,!1),p.pendingChildren=y,Gr(u),En(l,y)}},cd=function(l,u,p,y,E){var A=l.stateNode,F=l.memoizedProps;if((l=z1(l,u))&&F===y)u.stateNode=A;else{var J=u.stateNode,ge=Hr(Ki.current),Ne=null;F!==y&&(Ne=j(J,p,F,y,E,ge)),l&&Ne===null?u.stateNode=A:(A=Ze(A,Ne,p,F,y,u,l,J),X(A,p,y,E,ge)&&Gr(u),u.stateNode=A,l?Gr(u):Lu(A,u,!1,!1))}},fd=function(l,u,p,y){p!==y?(l=Hr(Ha.current),p=Hr(Ki.current),u.stateNode=V(y,l,p,u),Gr(u)):u.stateNode=l.stateNode}}else Iu=function(){},cd=function(){},fd=function(){};function Du(l,u){if(!qt)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Xn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=l,E=E.sibling;else for(E=l.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=l,E=E.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function hP(l,u,p){var y=u.pendingProps;switch(eg(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(u),null;case 1:return Nn(u.type)&&Bf(),Xn(u),null;case 3:return y=u.stateNode,Va(),Ut(zt),Ut(pn),ag(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(wu(u)?Gr(u):l===null||l.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,yr!==null&&(Og(yr),yr=null))),Iu(l,u),Xn(u),null;case 5:sg(u),p=Hr(Ha.current);var E=u.type;if(l!==null&&u.stateNode!=null)cd(l,u,E,y,p),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!y){if(u.stateNode===null)throw Error(o(166));return Xn(u),null}if(l=Hr(Ki.current),wu(u)){if(!ie)throw Error(o(175));l=we(u.stateNode,u.type,u.memoizedProps,p,l,u,!Mu),u.updateQueue=l,l!==null&&Gr(u)}else{var A=oe(E,y,p,l,u);Lu(A,u,!1,!1),u.stateNode=A,X(A,E,y,p,l)&&Gr(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Xn(u),null;case 6:if(l&&u.stateNode!=null)fd(l,u,l.memoizedProps,y);else{if(typeof y!="string"&&u.stateNode===null)throw Error(o(166));if(l=Hr(Ha.current),p=Hr(Ki.current),wu(u)){if(!ie)throw Error(o(176));if(l=u.stateNode,y=u.memoizedProps,(p=et(l,y,u,!Mu))&&(E=Pi,E!==null))switch(A=(E.mode&1)!==0,E.tag){case 3:Dn(E.stateNode.containerInfo,l,y,A);break;case 5:bi(E.type,E.memoizedProps,E.stateNode,l,y,A)}p&&Gr(u)}else u.stateNode=V(y,l,p,u)}return Xn(u),null;case 13:if(Ut(Kt),y=u.memoizedState,qt&&Ri!==null&&u.mode&1&&!(u.flags&128)){for(l=Ri;l;)l=O(l);return za(),u.flags|=98560,u}if(y!==null&&y.dehydrated!==null){if(y=wu(u),l===null){if(!y)throw Error(o(318));if(!ie)throw Error(o(344));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));nt(l,u)}else za(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;return Xn(u),null}return yr!==null&&(Og(yr),yr=null),u.flags&128?(u.lanes=p,u):(y=y!==null,p=!1,l===null?wu(u):p=l.memoizedState!==null,y&&!p&&(u.child.flags|=8192,u.mode&1&&(l===null||Kt.current&1?_n===0&&(_n=3):Fg())),u.updateQueue!==null&&(u.flags|=4),Xn(u),null);case 4:return Va(),Iu(l,u),l===null&&Ce(u.stateNode.containerInfo),Xn(u),null;case 10:return qm(u.type._context),Xn(u),null;case 17:return Nn(u.type)&&Bf(),Xn(u),null;case 19:if(Ut(Kt),E=u.memoizedState,E===null)return Xn(u),null;if(y=(u.flags&128)!==0,A=E.rendering,A===null)if(y)Du(E,!1);else{if(_n!==0||l!==null&&l.flags&128)for(l=u.child;l!==null;){if(A=nd(l),A!==null){for(u.flags|=128,Du(E,!1),l=A.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=p,y=u.child;y!==null;)p=y,E=l,p.flags&=14680066,A=p.alternate,A===null?(p.childLanes=0,p.lanes=E,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=A.childLanes,p.lanes=A.lanes,p.child=A.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=A.memoizedProps,p.memoizedState=A.memoizedState,p.updateQueue=A.updateQueue,p.type=A.type,E=A.dependencies,p.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),y=y.sibling;return dt(Kt,Kt.current&1|2),u.child}l=l.sibling}E.tail!==null&&Tn()>Ig&&(u.flags|=128,y=!0,Du(E,!1),u.lanes=4194304)}else{if(!y)if(l=nd(A),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),Du(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!qt)return Xn(u),null}else 2*Tn()-E.renderingStartTime>Ig&&p!==1073741824&&(u.flags|=128,y=!0,Du(E,!1),u.lanes=4194304);E.isBackwards?(A.sibling=u.child,u.child=A):(l=E.last,l!==null?l.sibling=A:u.child=A,E.last=A)}return E.tail!==null?(u=E.tail,E.rendering=u,E.tail=u.sibling,E.renderingStartTime=Tn(),u.sibling=null,l=Kt.current,dt(Kt,y?l&1|2:l&1),u):(Xn(u),null);case 22:case 23:return kg(),y=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==y&&(u.flags|=8192),y&&u.mode&1?Ii&1073741824&&(Xn(u),ye&&u.subtreeFlags&6&&(u.flags|=8192)):Xn(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}var pP=a.ReactCurrentOwner,Li=!1;function si(l,u,p,y){u.child=l===null?p1(u,null,p,y):Ba(u,l.child,p,y)}function H1(l,u,p,y,E){p=p.render;var A=u.ref;return Oa(u,E),y=ug(l,u,p,y,A,E),p=cg(),l!==null&&!Li?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~E,fs(l,u,E)):(qt&&p&&Qm(u),u.flags|=1,si(l,u,y,E),u.child)}function V1(l,u,p,y,E){if(l===null){var A=p.type;return typeof A=="function"&&!zg(A)&&A.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(u.tag=15,u.type=A,G1(l,u,A,y,E)):(l=Id(p.type,null,y,u,u.mode,E),l.ref=u.ref,l.return=u,u.child=l)}if(A=l.child,!(l.lanes&E)){var F=A.memoizedProps;if(p=p.compare,p=p!==null?p:Yf,p(F,y)&&l.ref===u.ref)return fs(l,u,E)}return u.flags|=1,l=Xs(A,y),l.ref=u.ref,l.return=u,u.child=l}function G1(l,u,p,y,E){if(l!==null&&Yf(l.memoizedProps,y)&&l.ref===u.ref)if(Li=!1,(l.lanes&E)!==0)l.flags&131072&&(Li=!0);else return u.lanes=l.lanes,fs(l,u,E);return gg(l,u,p,y,E)}function W1(l,u,p){var y=u.pendingProps,E=y.children,A=l!==null?l.memoizedState:null;if(y.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null},dt(Wa,Ii),Ii|=p;else if(p&1073741824)u.memoizedState={baseLanes:0,cachePool:null},y=A!==null?A.baseLanes:p,dt(Wa,Ii),Ii|=y;else return l=A!==null?A.baseLanes|p:p,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null},u.updateQueue=null,dt(Wa,Ii),Ii|=l,null;else A!==null?(y=A.baseLanes|p,u.memoizedState=null):y=p,dt(Wa,Ii),Ii|=y;return si(l,u,E,p),u.child}function X1(l,u){var p=u.ref;(l===null&&p!==null||l!==null&&l.ref!==p)&&(u.flags|=512,u.flags|=2097152)}function gg(l,u,p,y,E){var A=Nn(p)?mr:pn.current;return A=Fs(u,A),Oa(u,E),p=ug(l,u,p,y,A,E),y=cg(),l!==null&&!Li?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~E,fs(l,u,E)):(qt&&y&&Qm(u),u.flags|=1,si(l,u,p,E),u.child)}function j1(l,u,p,y,E){if(Nn(p)){var A=!0;Hf(u)}else A=!1;if(Oa(u,E),u.stateNode===null)l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),o1(u,p,y),Jm(u,p,y,E),y=!0;else if(l===null){var F=u.stateNode,J=u.memoizedProps;F.props=J;var ge=F.context,Ne=p.contextType;typeof Ne=="object"&&Ne!==null?Ne=qi(Ne):(Ne=Nn(p)?mr:pn.current,Ne=Fs(u,Ne));var je=p.getDerivedStateFromProps,st=typeof je=="function"||typeof F.getSnapshotBeforeUpdate=="function";st||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(J!==y||ge!==Ne)&&a1(u,F,y,Ne),zs=!1;var tt=u.memoizedState;F.state=tt,Kf(u,y,F,E),ge=u.memoizedState,J!==y||tt!==ge||zt.current||zs?(typeof je=="function"&&(Km(u,p,je,y),ge=u.memoizedState),(J=zs||s1(u,p,J,y,tt,ge,Ne))?(st||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(u.flags|=4194308)):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=ge),F.props=y,F.state=ge,F.context=Ne,y=J):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{F=u.stateNode,t1(l,u),J=u.memoizedProps,Ne=u.type===u.elementType?J:vr(u.type,J),F.props=Ne,st=u.pendingProps,tt=F.context,ge=p.contextType,typeof ge=="object"&&ge!==null?ge=qi(ge):(ge=Nn(p)?mr:pn.current,ge=Fs(u,ge));var Bt=p.getDerivedStateFromProps;(je=typeof Bt=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(J!==st||tt!==ge)&&a1(u,F,y,ge),zs=!1,tt=u.memoizedState,F.state=tt,Kf(u,y,F,E);var Je=u.memoizedState;J!==st||tt!==Je||zt.current||zs?(typeof Bt=="function"&&(Km(u,p,Bt,y),Je=u.memoizedState),(Ne=zs||s1(u,p,Ne,y,tt,Je,ge)||!1)?(je||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(y,Je,ge),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(y,Je,ge)),typeof F.componentDidUpdate=="function"&&(u.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof F.componentDidUpdate!="function"||J===l.memoizedProps&&tt===l.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&tt===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Je),F.props=y,F.state=Je,F.context=ge,y=Ne):(typeof F.componentDidUpdate!="function"||J===l.memoizedProps&&tt===l.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||J===l.memoizedProps&&tt===l.memoizedState||(u.flags|=1024),y=!1)}return vg(l,u,p,y,A,E)}function vg(l,u,p,y,E,A){X1(l,u);var F=(u.flags&128)!==0;if(!y&&!F)return E&&Zx(u,p,!1),fs(l,u,A);y=u.stateNode,pP.current=u;var J=F&&typeof p.getDerivedStateFromError!="function"?null:y.render();return u.flags|=1,l!==null&&F?(u.child=Ba(u,l.child,null,A),u.child=Ba(u,null,J,A)):si(l,u,J,A),u.memoizedState=y.state,E&&Zx(u,p,!0),u.child}function Y1(l){var u=l.stateNode;u.pendingContext?qx(l,u.pendingContext,u.pendingContext!==u.context):u.context&&qx(l,u.context,!1),rg(l,u.containerInfo)}function q1(l,u,p,y,E){return za(),ig(E),u.flags|=256,si(l,u,p,y),u.child}var dd={dehydrated:null,treeContext:null,retryLane:0};function hd(l){return{baseLanes:l,cachePool:null}}function $1(l,u,p){var y=u.pendingProps,E=Kt.current,A=!1,F=(u.flags&128)!==0,J;if((J=F)||(J=l!==null&&l.memoizedState===null?!1:(E&2)!==0),J?(A=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(E|=1),dt(Kt,E&1),l===null)return ng(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(u.mode&1?_u(l)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(E=y.children,l=y.fallback,A?(y=u.mode,A=u.child,E={mode:"hidden",children:E},!(y&1)&&A!==null?(A.childLanes=0,A.pendingProps=E):A=Dd(E,y,0,null),l=Wo(l,y,p,null),A.return=u,l.return=u,A.sibling=l,u.child=A,u.child.memoizedState=hd(p),u.memoizedState=dd,l):yg(u,E));if(E=l.memoizedState,E!==null){if(J=E.dehydrated,J!==null){if(F)return u.flags&256?(u.flags&=-257,pd(l,u,p,Error(o(422)))):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(A=y.fallback,E=u.mode,y=Dd({mode:"visible",children:y.children},E,0,null),A=Wo(A,E,p,null),A.flags|=2,y.return=u,A.return=u,y.sibling=A,u.child=y,u.mode&1&&Ba(u,l.child,null,p),u.child.memoizedState=hd(p),u.memoizedState=dd,A);if(!(u.mode&1))u=pd(l,u,p,null);else if(_u(J))u=pd(l,u,p,Error(o(419)));else if(y=(p&l.childLanes)!==0,Li||y){if(y=mn,y!==null){switch(p&-p){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}y=A&(y.suspendedLanes|p)?0:A,y!==0&&y!==E.retryLane&&(E.retryLane=y,Qi(l,y,-1))}Fg(),u=pd(l,u,p,Error(o(421)))}else zf(J)?(u.flags|=128,u.child=l.child,u=CP.bind(null,l),Fm(J,u),u=null):(p=E.treeContext,ie&&(Ri=re(J),Pi=u,qt=!0,yr=null,Mu=!1,p!==null&&($i[Zi++]=ls,$i[Zi++]=us,$i[Zi++]=Oo,ls=p.id,us=p.overflow,Oo=u)),u=yg(u,u.pendingProps.children),u.flags|=4096);return u}return A?(y=K1(l,u,y.children,y.fallback,p),A=u.child,E=l.child.memoizedState,A.memoizedState=E===null?hd(p):{baseLanes:E.baseLanes|p,cachePool:null},A.childLanes=l.childLanes&~p,u.memoizedState=dd,y):(p=Z1(l,u,y.children,p),u.memoizedState=null,p)}return A?(y=K1(l,u,y.children,y.fallback,p),A=u.child,E=l.child.memoizedState,A.memoizedState=E===null?hd(p):{baseLanes:E.baseLanes|p,cachePool:null},A.childLanes=l.childLanes&~p,u.memoizedState=dd,y):(p=Z1(l,u,y.children,p),u.memoizedState=null,p)}function yg(l,u){return u=Dd({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function Z1(l,u,p,y){var E=l.child;return l=E.sibling,p=Xs(E,{mode:"visible",children:p}),!(u.mode&1)&&(p.lanes=y),p.return=u,p.sibling=null,l!==null&&(y=u.deletions,y===null?(u.deletions=[l],u.flags|=16):y.push(l)),u.child=p}function K1(l,u,p,y,E){var A=u.mode;l=l.child;var F=l.sibling,J={mode:"hidden",children:p};return!(A&1)&&u.child!==l?(p=u.child,p.childLanes=0,p.pendingProps=J,u.deletions=null):(p=Xs(l,J),p.subtreeFlags=l.subtreeFlags&14680064),F!==null?y=Xs(F,y):(y=Wo(y,A,E,null),y.flags|=2),y.return=u,p.return=u,p.sibling=y,u.child=p,y}function pd(l,u,p,y){return y!==null&&ig(y),Ba(u,l.child,null,p),l=yg(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function J1(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),$m(l.return,u,p)}function _g(l,u,p,y,E){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=p,A.tailMode=E)}function Q1(l,u,p){var y=u.pendingProps,E=y.revealOrder,A=y.tail;if(si(l,u,y.children,p),y=Kt.current,y&2)y=y&1|2,u.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&J1(l,p,u);else if(l.tag===19)J1(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}if(dt(Kt,y),!(u.mode&1))u.memoizedState=null;else switch(E){case"forwards":for(p=u.child,E=null;p!==null;)l=p.alternate,l!==null&&nd(l)===null&&(E=p),p=p.sibling;p=E,p===null?(E=u.child,u.child=null):(E=p.sibling,p.sibling=null),_g(u,!1,E,p,A);break;case"backwards":for(p=null,E=u.child,u.child=null;E!==null;){if(l=E.alternate,l!==null&&nd(l)===null){u.child=E;break}l=E.sibling,E.sibling=p,p=E,E=l}_g(u,!0,p,null,A);break;case"together":_g(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function fs(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Xa|=u.lanes,!(p&u.childLanes))return null;if(l!==null&&u.child!==l.child)throw Error(o(153));if(u.child!==null){for(l=u.child,p=Xs(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=Xs(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function mP(l,u,p){switch(u.tag){case 3:Y1(u),za();break;case 5:m1(u);break;case 1:Nn(u.type)&&Hf(u);break;case 4:rg(u,u.stateNode.containerInfo);break;case 10:e1(u,u.type._context,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(dt(Kt,Kt.current&1),u.flags|=128,null):p&u.child.childLanes?$1(l,u,p):(dt(Kt,Kt.current&1),l=fs(l,u,p),l!==null?l.sibling:null);dt(Kt,Kt.current&1);break;case 19:if(y=(p&u.childLanes)!==0,l.flags&128){if(y)return Q1(l,u,p);u.flags|=128}var E=u.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),dt(Kt,Kt.current),y)break;return null;case 22:case 23:return u.lanes=0,W1(l,u,p)}return fs(l,u,p)}function gP(l,u){switch(eg(u),u.tag){case 1:return Nn(u.type)&&Bf(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Va(),Ut(zt),Ut(pn),ag(),l=u.flags,l&65536&&!(l&128)?(u.flags=l&-65537|128,u):null;case 5:return sg(u),null;case 13:if(Ut(Kt),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(o(340));za()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Ut(Kt),null;case 4:return Va(),null;case 10:return qm(u.type._context),null;case 22:case 23:return kg(),null;case 24:return null;default:return null}}var md=!1,zo=!1,vP=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function gd(l,u){var p=l.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(y){yi(l,u,y)}else p.current=null}function xg(l,u,p){try{p()}catch(y){yi(l,u,y)}}var eS=!1;function yP(l,u){for(H(l.containerInfo),Fe=u;Fe!==null;)if(l=Fe,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,Fe=u;else for(;Fe!==null;){l=Fe;try{var p=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,E=p.memoizedState,A=l.stateNode,F=A.getSnapshotBeforeUpdate(l.elementType===l.type?y:vr(l.type,y),E);A.__reactInternalSnapshotBeforeUpdate=F}break;case 3:ye&&He(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){yi(l,l.return,J)}if(u=l.sibling,u!==null){u.return=l.return,Fe=u;break}Fe=l.return}return p=eS,eS=!1,p}function Bo(l,u,p){var y=u.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&l)===l){var A=E.destroy;E.destroy=void 0,A!==void 0&&xg(u,p,A)}E=E.next}while(E!==y)}}function Nu(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var p=u=u.next;do{if((p.tag&l)===l){var y=p.create;p.destroy=y()}p=p.next}while(p!==u)}}function Sg(l){var u=l.ref;if(u!==null){var p=l.stateNode;switch(l.tag){case 5:l=ue(p);break;default:l=p}typeof u=="function"?u(l):u.current=l}}function tS(l,u,p){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Xf,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(l=u.updateQueue,l!==null&&(l=l.lastEffect,l!==null)){var y=l=l.next;do{var E=y,A=E.destroy;E=E.tag,A!==void 0&&(E&2||E&4)&&xg(u,p,A),y=y.next}while(y!==l)}break;case 1:if(gd(u,p),l=u.stateNode,typeof l.componentWillUnmount=="function")try{l.props=u.memoizedProps,l.state=u.memoizedState,l.componentWillUnmount()}catch(F){yi(u,p,F)}break;case 5:gd(u,p);break;case 4:ye?aS(l,u,p):se&&se&&(u=u.stateNode.containerInfo,p=It(u),dr(u,p))}}function nS(l,u,p){for(var y=u;;)if(tS(l,y,p),y.child===null||ye&&y.tag===4){if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else y.child.return=y,y=y.child}function iS(l){var u=l.alternate;u!==null&&(l.alternate=null,iS(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Re(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function rS(l){return l.tag===5||l.tag===3||l.tag===4}function sS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||rS(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function oS(l){if(ye){e:{for(var u=l.return;u!==null;){if(rS(u))break e;u=u.return}throw Error(o(160))}var p=u;switch(p.tag){case 5:u=p.stateNode,p.flags&32&&(ct(u),p.flags&=-33),p=sS(l),wg(l,p,u);break;case 3:case 4:u=p.stateNode.containerInfo,p=sS(l),Mg(l,p,u);break;default:throw Error(o(161))}}}function Mg(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?Te(p,l,u):Be(p,l);else if(y!==4&&(l=l.child,l!==null))for(Mg(l,u,p),l=l.sibling;l!==null;)Mg(l,u,p),l=l.sibling}function wg(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?ve(p,l,u):$e(p,l);else if(y!==4&&(l=l.child,l!==null))for(wg(l,u,p),l=l.sibling;l!==null;)wg(l,u,p),l=l.sibling}function aS(l,u,p){for(var y=u,E=!1,A,F;;){if(!E){E=y.return;e:for(;;){if(E===null)throw Error(o(160));switch(A=E.stateNode,E.tag){case 5:F=!1;break e;case 3:A=A.containerInfo,F=!0;break e;case 4:A=A.containerInfo,F=!0;break e}E=E.return}E=!0}if(y.tag===5||y.tag===6)nS(l,y,p),F?Qe(A,y.stateNode):De(A,y.stateNode);else if(y.tag===18)F?St(A,y.stateNode):_t(A,y.stateNode);else if(y.tag===4){if(y.child!==null){A=y.stateNode.containerInfo,F=!0,y.child.return=y,y=y.child;continue}}else if(tS(l,y,p),y.child!==null){y.child.return=y,y=y.child;continue}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return,y.tag===4&&(E=!1)}y.sibling.return=y.return,y=y.sibling}}function Eg(l,u){if(ye){switch(u.tag){case 0:case 11:case 14:case 15:Bo(3,u,u.return),Nu(3,u),Bo(5,u,u.return);return;case 1:return;case 5:var p=u.stateNode;if(p!=null){var y=u.memoizedProps;l=l!==null?l.memoizedProps:y;var E=u.type,A=u.updateQueue;u.updateQueue=null,A!==null&&Y(p,A,E,l,y,u)}return;case 6:if(u.stateNode===null)throw Error(o(162));p=u.memoizedProps,xe(u.stateNode,l!==null?l.memoizedProps:p,p);return;case 3:ie&&l!==null&&l.memoizedState.isDehydrated&&ft(u.stateNode.containerInfo);return;case 12:return;case 13:vd(u);return;case 19:vd(u);return;case 17:return}throw Error(o(163))}switch(u.tag){case 0:case 11:case 14:case 15:Bo(3,u,u.return),Nu(3,u),Bo(5,u,u.return);return;case 12:return;case 13:vd(u);return;case 19:vd(u);return;case 3:ie&&l!==null&&l.memoizedState.isDehydrated&&ft(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(se){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,dr(u.containerInfo,u.pendingChildren);break e}throw Error(o(163))}}function vd(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var p=l.stateNode;p===null&&(p=l.stateNode=new vP),u.forEach(function(y){var E=bP.bind(null,l,y);p.has(y)||(p.add(y),y.then(E,E))})}}function _P(l,u){for(Fe=u;Fe!==null;){u=Fe;var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y];try{var A=l;ye?aS(A,E,u):nS(A,E,u);var F=E.alternate;F!==null&&(F.return=null),E.return=null}catch(Ke){yi(E,u,Ke)}}if(p=u.child,u.subtreeFlags&12854&&p!==null)p.return=u,Fe=p;else for(;Fe!==null;){u=Fe;try{var J=u.flags;if(J&32&&ye&&ct(u.stateNode),J&512){var ge=u.alternate;if(ge!==null){var Ne=ge.ref;Ne!==null&&(typeof Ne=="function"?Ne(null):Ne.current=null)}}if(J&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var je=u.alternate;(je===null||je.memoizedState===null)&&(Lg=Tn())}break;case 22:var st=u.memoizedState!==null,tt=u.alternate,Bt=tt!==null&&tt.memoizedState!==null;if(p=u,ye){e:if(y=p,E=st,A=null,ye)for(var Je=y;;){if(Je.tag===5){if(A===null){A=Je;var jn=Je.stateNode;E?Ft(jn):pe(Je.stateNode,Je.memoizedProps)}}else if(Je.tag===6){if(A===null){var tr=Je.stateNode;E?$(tr):Ae(tr,Je.memoizedProps)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===y)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===y)break;for(;Je.sibling===null;){if(Je.return===null||Je.return===y)break e;A===Je&&(A=null),Je=Je.return}A===Je&&(A=null),Je.sibling.return=Je.return,Je=Je.sibling}}if(st&&!Bt&&p.mode&1){Fe=p;for(var ae=p.child;ae!==null;){for(p=Fe=ae;Fe!==null;){y=Fe;var ee=y.child;switch(y.tag){case 0:case 11:case 14:case 15:Bo(4,y,y.return);break;case 1:gd(y,y.return);var he=y.stateNode;if(typeof he.componentWillUnmount=="function"){var ze=y.return;try{he.props=y.memoizedProps,he.state=y.memoizedState,he.componentWillUnmount()}catch(Ke){yi(y,ze,Ke)}}break;case 5:gd(y,y.return);break;case 22:if(y.memoizedState!==null){cS(p);continue}}ee!==null?(ee.return=y,Fe=ee):cS(p)}ae=ae.sibling}}}switch(J&4102){case 2:oS(u),u.flags&=-3;break;case 6:oS(u),u.flags&=-3,Eg(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,Eg(u.alternate,u);break;case 4:Eg(u.alternate,u)}}catch(Ke){yi(u,u.return,Ke)}if(p=u.sibling,p!==null){p.return=u.return,Fe=p;break}Fe=u.return}}}function xP(l,u,p){Fe=l,lS(l)}function lS(l,u,p){for(var y=(l.mode&1)!==0;Fe!==null;){var E=Fe,A=E.child;if(E.tag===22&&y){var F=E.memoizedState!==null||md;if(!F){var J=E.alternate,ge=J!==null&&J.memoizedState!==null||zo;J=md;var Ne=zo;if(md=F,(zo=ge)&&!Ne)for(Fe=E;Fe!==null;)F=Fe,ge=F.child,F.tag===22&&F.memoizedState!==null?fS(E):ge!==null?(ge.return=F,Fe=ge):fS(E);for(;A!==null;)Fe=A,lS(A),A=A.sibling;Fe=E,md=J,zo=Ne}uS(l)}else E.subtreeFlags&8772&&A!==null?(A.return=E,Fe=A):uS(l)}}function uS(l){for(;Fe!==null;){var u=Fe;if(u.flags&8772){var p=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:zo||Nu(5,u);break;case 1:var y=u.stateNode;if(u.flags&4&&!zo)if(p===null)y.componentDidMount();else{var E=u.elementType===u.type?p.memoizedProps:vr(u.type,p.memoizedProps);y.componentDidUpdate(E,p.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var A=u.updateQueue;A!==null&&i1(u,A,y);break;case 3:var F=u.updateQueue;if(F!==null){if(p=null,u.child!==null)switch(u.child.tag){case 5:p=ue(u.child.stateNode);break;case 1:p=u.child.stateNode}i1(u,F,p)}break;case 5:var J=u.stateNode;p===null&&u.flags&4&&Ye(J,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(ie&&u.memoizedState===null){var ge=u.alternate;if(ge!==null){var Ne=ge.memoizedState;if(Ne!==null){var je=Ne.dehydrated;je!==null&&yt(je)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}zo||u.flags&512&&Sg(u)}catch(st){yi(u,u.return,st)}}if(u===l){Fe=null;break}if(p=u.sibling,p!==null){p.return=u.return,Fe=p;break}Fe=u.return}}function cS(l){for(;Fe!==null;){var u=Fe;if(u===l){Fe=null;break}var p=u.sibling;if(p!==null){p.return=u.return,Fe=p;break}Fe=u.return}}function fS(l){for(;Fe!==null;){var u=Fe;try{switch(u.tag){case 0:case 11:case 15:var p=u.return;try{Nu(4,u)}catch(ge){yi(u,p,ge)}break;case 1:var y=u.stateNode;if(typeof y.componentDidMount=="function"){var E=u.return;try{y.componentDidMount()}catch(ge){yi(u,E,ge)}}var A=u.return;try{Sg(u)}catch(ge){yi(u,A,ge)}break;case 5:var F=u.return;try{Sg(u)}catch(ge){yi(u,F,ge)}}}catch(ge){yi(u,u.return,ge)}if(u===l){Fe=null;break}var J=u.sibling;if(J!==null){J.return=u.return,Fe=J;break}Fe=u.return}}var yd=0,_d=1,xd=2,Sd=3,Md=4;if(typeof Symbol=="function"&&Symbol.for){var Uu=Symbol.for;yd=Uu("selector.component"),_d=Uu("selector.has_pseudo_class"),xd=Uu("selector.role"),Sd=Uu("selector.test_id"),Md=Uu("selector.text")}function Tg(l){var u=_e(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(l=rt(l),l===null)throw Error(o(362));return l.stateNode.current}function Ag(l,u){switch(u.$$typeof){case yd:if(l.type===u.value)return!0;break;case _d:e:{u=u.value,l=[l,0];for(var p=0;p<l.length;){var y=l[p++],E=l[p++],A=u[E];if(y.tag!==5||!Z(y)){for(;A!=null&&Ag(y,A);)E++,A=u[E];if(E===u.length){u=!0;break e}else for(y=y.child;y!==null;)l.push(y,E),y=y.sibling}}u=!1}return u;case xd:if(l.tag===5&&Me(l.stateNode,u.value))return!0;break;case Md:if((l.tag===5||l.tag===6)&&(l=U(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Sd:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Cg(l){switch(l.$$typeof){case yd:return"<"+(R(l.value)||"Unknown")+">";case _d:return":has("+(Cg(l)||"")+")";case xd:return'[role="'+l.value+'"]';case Md:return'"'+l.value+'"';case Sd:return'[data-testname="'+l.value+'"]';default:throw Error(o(365))}}function dS(l,u){var p=[];l=[l,0];for(var y=0;y<l.length;){var E=l[y++],A=l[y++],F=u[A];if(E.tag!==5||!Z(E)){for(;F!=null&&Ag(E,F);)A++,F=u[A];if(A===u.length)p.push(E);else for(E=E.child;E!==null;)l.push(E,A),E=E.sibling}}return p}function bg(l,u){if(!We)throw Error(o(363));l=Tg(l),l=dS(l,u),u=[],l=Array.from(l);for(var p=0;p<l.length;){var y=l[p++];if(y.tag===5)Z(y)||u.push(y.stateNode);else for(y=y.child;y!==null;)l.push(y),y=y.sibling}return u}var SP=Math.ceil,wd=a.ReactCurrentDispatcher,Pg=a.ReactCurrentOwner,ln=a.ReactCurrentBatchConfig,xt=0,mn=null,gn=null,Un=0,Ii=0,Wa=mi(0),_n=0,Ou=null,Xa=0,Ed=0,Rg=0,ku=null,gi=null,Lg=0,Ig=1/0;function ja(){Ig=Tn()+500}var Td=!1,Dg=null,Hs=null,Ad=!1,Vs=null,Cd=0,Fu=0,Ng=null,bd=-1,Pd=0;function oi(){return xt&6?Tn():bd!==-1?bd:bd=Tn()}function Gs(l){return l.mode&1?xt&2&&Un!==0?Un&-Un:iP.transition!==null?(Pd===0&&(l=Vf,Vf<<=1,!(Vf&4194240)&&(Vf=64),Pd=l),Pd):(l=bt,l!==0?l:Pe()):1}function Qi(l,u,p){if(50<Fu)throw Fu=0,Ng=null,Error(o(185));var y=Rd(l,u);return y===null?null:(Su(y,u,p),(!(xt&2)||y!==mn)&&(y===mn&&(!(xt&2)&&(Ed|=u),_n===4&&Ws(y,Un)),vi(y,p),u===1&&xt===0&&!(l.mode&1)&&(ja(),jf&&zr())),y)}function Rd(l,u){l.lanes|=u;var p=l.alternate;for(p!==null&&(p.lanes|=u),p=l,l=l.return;l!==null;)l.childLanes|=u,p=l.alternate,p!==null&&(p.childLanes|=u),p=l,l=l.return;return p.tag===3?p.stateNode:null}function vi(l,u){var p=l.callbackNode;q2(l,u);var y=Wf(l,l===mn?Un:0);if(y===0)p!==null&&Jx(p),l.callbackNode=null,l.callbackPriority=0;else if(u=y&-y,l.callbackPriority!==u){if(p!=null&&Jx(p),u===1)l.tag===0?nP(pS.bind(null,l)):Qx(pS.bind(null,l)),ke?Ge(function(){xt===0&&zr()}):Vm(Gm,zr),p=null;else{switch(Kx(y)){case 1:p=Gm;break;case 4:p=J2;break;case 16:p=Wm;break;case 536870912:p=Q2;break;default:p=Wm}p=wS(p,hS.bind(null,l))}l.callbackPriority=u,l.callbackNode=p}}function hS(l,u){if(bd=-1,Pd=0,xt&6)throw Error(o(327));var p=l.callbackNode;if(Go()&&l.callbackNode!==p)return null;var y=Wf(l,l===mn?Un:0);if(y===0)return null;if(y&30||y&l.expiredLanes||u)u=Ld(l,y);else{u=y;var E=xt;xt|=2;var A=vS();(mn!==l||Un!==u)&&(ja(),Ho(l,u));do try{EP();break}catch(J){gS(l,J)}while(1);Ym(),wd.current=A,xt=E,gn!==null?u=0:(mn=null,Un=0,u=_n)}if(u!==0){if(u===2&&(E=zm(l),E!==0&&(y=E,u=Ug(l,E))),u===1)throw p=Ou,Ho(l,0),Ws(l,y),vi(l,Tn()),p;if(u===6)Ws(l,y);else{if(E=l.current.alternate,!(y&30)&&!MP(E)&&(u=Ld(l,y),u===2&&(A=zm(l),A!==0&&(y=A,u=Ug(l,A))),u===1))throw p=Ou,Ho(l,0),Ws(l,y),vi(l,Tn()),p;switch(l.finishedWork=E,l.finishedLanes=y,u){case 0:case 1:throw Error(o(345));case 2:Vo(l,gi);break;case 3:if(Ws(l,y),(y&130023424)===y&&(u=Lg+500-Tn(),10<u)){if(Wf(l,0)!==0)break;if(E=l.suspendedLanes,(E&y)!==y){oi(),l.pingedLanes|=l.suspendedLanes&E;break}l.timeoutHandle=B(Vo.bind(null,l,gi),u);break}Vo(l,gi);break;case 4:if(Ws(l,y),(y&4194240)===y)break;for(u=l.eventTimes,E=-1;0<y;){var F=31-gr(y);A=1<<F,F=u[F],F>E&&(E=F),y&=~A}if(y=E,y=Tn()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*SP(y/1960))-y,10<y){l.timeoutHandle=B(Vo.bind(null,l,gi),y);break}Vo(l,gi);break;case 5:Vo(l,gi);break;default:throw Error(o(329))}}}return vi(l,Tn()),l.callbackNode===p?hS.bind(null,l):null}function Ug(l,u){var p=ku;return l.current.memoizedState.isDehydrated&&(Ho(l,u).flags|=256),l=Ld(l,u),l!==2&&(u=gi,gi=p,u!==null&&Og(u)),l}function Og(l){gi===null?gi=l:gi.push.apply(gi,l)}function MP(l){for(var u=l;;){if(u.flags&16384){var p=u.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var y=0;y<p.length;y++){var E=p[y],A=E.getSnapshot;E=E.value;try{if(!Fr(A(),E))return!1}catch{return!1}}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ws(l,u){for(u&=~Rg,u&=~Ed,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var p=31-gr(u),y=1<<p;l[p]=-1,u&=~y}}function pS(l){if(xt&6)throw Error(o(327));Go();var u=Wf(l,0);if(!(u&1))return vi(l,Tn()),null;var p=Ld(l,u);if(l.tag!==0&&p===2){var y=zm(l);y!==0&&(u=y,p=Ug(l,y))}if(p===1)throw p=Ou,Ho(l,0),Ws(l,u),vi(l,Tn()),p;if(p===6)throw Error(o(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Vo(l,gi),vi(l,Tn()),null}function mS(l){Vs!==null&&Vs.tag===0&&!(xt&6)&&Go();var u=xt;xt|=1;var p=ln.transition,y=bt;try{if(ln.transition=null,bt=1,l)return l()}finally{bt=y,ln.transition=p,xt=u,!(xt&6)&&zr()}}function kg(){Ii=Wa.current,Ut(Wa)}function Ho(l,u){l.finishedWork=null,l.finishedLanes=0;var p=l.timeoutHandle;if(p!==Oe&&(l.timeoutHandle=Oe,de(p)),gn!==null)for(p=gn.return;p!==null;){var y=p;switch(eg(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Bf();break;case 3:Va(),Ut(zt),Ut(pn),ag();break;case 5:sg(y);break;case 4:Va();break;case 13:Ut(Kt);break;case 19:Ut(Kt);break;case 10:qm(y.type._context);break;case 22:case 23:kg()}p=p.return}if(mn=l,gn=l=Xs(l.current,null),Un=Ii=u,_n=0,Ou=null,Rg=Ed=Xa=0,gi=ku=null,Br!==null){for(u=0;u<Br.length;u++)if(p=Br[u],y=p.interleaved,y!==null){p.interleaved=null;var E=y.next,A=p.pending;if(A!==null){var F=A.next;A.next=E,y.next=F}p.pending=y}Br=null}return l}function gS(l,u){do{var p=gn;try{if(Ym(),id.current=ud,rd){for(var y=nn.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}rd=!1}if(Ga=0,An=Gn=nn=null,Cu=!1,bu=0,Pg.current=null,p===null||p.return===null){_n=1,Ou=u,gn=null;break}e:{var A=l,F=p.return,J=p,ge=u;if(u=Un,J.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ne=ge,je=J,st=je.tag;if(!(je.mode&1)&&(st===0||st===11||st===15)){var tt=je.alternate;tt?(je.updateQueue=tt.updateQueue,je.memoizedState=tt.memoizedState,je.lanes=tt.lanes):(je.updateQueue=null,je.memoizedState=null)}var Bt=k1(F);if(Bt!==null){Bt.flags&=-257,F1(Bt,F,J,A,u),Bt.mode&1&&O1(A,Ne,u),u=Bt,ge=Ne;var Je=u.updateQueue;if(Je===null){var jn=new Set;jn.add(ge),u.updateQueue=jn}else Je.add(ge);break e}else{if(!(u&1)){O1(A,Ne,u),Fg();break e}ge=Error(o(426))}}else if(qt&&J.mode&1){var tr=k1(F);if(tr!==null){!(tr.flags&65536)&&(tr.flags|=256),F1(tr,F,J,A,u),ig(ge);break e}}A=ge,_n!==4&&(_n=2),ku===null?ku=[A]:ku.push(A),ge=pg(ge,J),J=F;do{switch(J.tag){case 3:J.flags|=65536,u&=-u,J.lanes|=u;var ae=N1(J,ge,u);n1(J,ae);break e;case 1:A=ge;var ee=J.type,he=J.stateNode;if(!(J.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Hs===null||!Hs.has(he)))){J.flags|=65536,u&=-u,J.lanes|=u;var ze=U1(J,A,u);n1(J,ze);break e}}J=J.return}while(J!==null)}_S(p)}catch(Ke){u=Ke,gn===p&&p!==null&&(gn=p=p.return);continue}break}while(1)}function vS(){var l=wd.current;return wd.current=ud,l===null?ud:l}function Fg(){(_n===0||_n===3||_n===2)&&(_n=4),mn===null||!(Xa&268435455)&&!(Ed&268435455)||Ws(mn,Un)}function Ld(l,u){var p=xt;xt|=2;var y=vS();mn===l&&Un===u||Ho(l,u);do try{wP();break}catch(E){gS(l,E)}while(1);if(Ym(),xt=p,wd.current=y,gn!==null)throw Error(o(261));return mn=null,Un=0,_n}function wP(){for(;gn!==null;)yS(gn)}function EP(){for(;gn!==null&&!Z2();)yS(gn)}function yS(l){var u=MS(l.alternate,l,Ii);l.memoizedProps=l.pendingProps,u===null?_S(l):gn=u,Pg.current=null}function _S(l){var u=l;do{var p=u.alternate;if(l=u.return,u.flags&32768){if(p=gP(p,u),p!==null){p.flags&=32767,gn=p;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{_n=6,gn=null;return}}else if(p=hP(p,u,Ii),p!==null){gn=p;return}if(u=u.sibling,u!==null){gn=u;return}gn=u=l}while(u!==null);_n===0&&(_n=5)}function Vo(l,u){var p=bt,y=ln.transition;try{ln.transition=null,bt=1,TP(l,u,p)}finally{ln.transition=y,bt=p}return null}function TP(l,u,p){do Go();while(Vs!==null);if(xt&6)throw Error(o(327));var y=l.finishedWork,E=l.finishedLanes;if(y===null)return null;if(l.finishedWork=null,l.finishedLanes=0,y===l.current)throw Error(o(177));l.callbackNode=null,l.callbackPriority=0;var A=y.lanes|y.childLanes;if($2(l,A),l===mn&&(gn=mn=null,Un=0),!(y.subtreeFlags&2064)&&!(y.flags&2064)||Ad||(Ad=!0,wS(Wm,function(){return Go(),null})),A=(y.flags&15990)!==0,y.subtreeFlags&15990||A){A=ln.transition,ln.transition=null;var F=bt;bt=1;var J=xt;xt|=4,Pg.current=null,yP(l,y),_P(l,y),z(l.containerInfo),l.current=y,xP(y),K2(),xt=J,bt=F,ln.transition=A}else l.current=y;if(Ad&&(Ad=!1,Vs=l,Cd=E),A=l.pendingLanes,A===0&&(Hs=null),eP(y.stateNode),vi(l,Tn()),u!==null)for(p=l.onRecoverableError,y=0;y<u.length;y++)p(u[y]);if(Td)throw Td=!1,l=Dg,Dg=null,l;return Cd&1&&l.tag!==0&&Go(),A=l.pendingLanes,A&1?l===Ng?Fu++:(Fu=0,Ng=l):Fu=0,zr(),null}function Go(){if(Vs!==null){var l=Kx(Cd),u=ln.transition,p=bt;try{if(ln.transition=null,bt=16>l?16:l,Vs===null)var y=!1;else{if(l=Vs,Vs=null,Cd=0,xt&6)throw Error(o(331));var E=xt;for(xt|=4,Fe=l.current;Fe!==null;){var A=Fe,F=A.child;if(Fe.flags&16){var J=A.deletions;if(J!==null){for(var ge=0;ge<J.length;ge++){var Ne=J[ge];for(Fe=Ne;Fe!==null;){var je=Fe;switch(je.tag){case 0:case 11:case 15:Bo(8,je,A)}var st=je.child;if(st!==null)st.return=je,Fe=st;else for(;Fe!==null;){je=Fe;var tt=je.sibling,Bt=je.return;if(iS(je),je===Ne){Fe=null;break}if(tt!==null){tt.return=Bt,Fe=tt;break}Fe=Bt}}}var Je=A.alternate;if(Je!==null){var jn=Je.child;if(jn!==null){Je.child=null;do{var tr=jn.sibling;jn.sibling=null,jn=tr}while(jn!==null)}}Fe=A}}if(A.subtreeFlags&2064&&F!==null)F.return=A,Fe=F;else e:for(;Fe!==null;){if(A=Fe,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Bo(9,A,A.return)}var ae=A.sibling;if(ae!==null){ae.return=A.return,Fe=ae;break e}Fe=A.return}}var ee=l.current;for(Fe=ee;Fe!==null;){F=Fe;var he=F.child;if(F.subtreeFlags&2064&&he!==null)he.return=F,Fe=he;else e:for(F=ee;Fe!==null;){if(J=Fe,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Nu(9,J)}}catch(Ke){yi(J,J.return,Ke)}if(J===F){Fe=null;break e}var ze=J.sibling;if(ze!==null){ze.return=J.return,Fe=ze;break e}Fe=J.return}}if(xt=E,zr(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Xf,l)}catch{}y=!0}return y}finally{bt=p,ln.transition=u}}return!1}function xS(l,u,p){u=pg(p,u),u=N1(l,u,1),Bs(l,u),u=oi(),l=Rd(l,1),l!==null&&(Su(l,1,u),vi(l,u))}function yi(l,u,p){if(l.tag===3)xS(l,l,p);else for(;u!==null;){if(u.tag===3){xS(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Hs===null||!Hs.has(y))){l=pg(p,l),l=U1(u,l,1),Bs(u,l),l=oi(),u=Rd(u,1),u!==null&&(Su(u,1,l),vi(u,l));break}}u=u.return}}function AP(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),u=oi(),l.pingedLanes|=l.suspendedLanes&p,mn===l&&(Un&p)===p&&(_n===4||_n===3&&(Un&130023424)===Un&&500>Tn()-Lg?Ho(l,0):Rg|=p),vi(l,u)}function SS(l,u){u===0&&(l.mode&1?(u=Gf,Gf<<=1,!(Gf&130023424)&&(Gf=4194304)):u=1);var p=oi();l=Rd(l,u),l!==null&&(Su(l,u,p),vi(l,p))}function CP(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),SS(l,p)}function bP(l,u){var p=0;switch(l.tag){case 13:var y=l.stateNode,E=l.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=l.stateNode;break;default:throw Error(o(314))}y!==null&&y.delete(u),SS(l,p)}var MS;MS=function(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps||zt.current)Li=!0;else{if(!(l.lanes&p)&&!(u.flags&128))return Li=!1,mP(l,u,p);Li=!!(l.flags&131072)}else Li=!1,qt&&u.flags&1048576&&l1(u,ed,u.index);switch(u.lanes=0,u.tag){case 2:var y=u.type;l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),l=u.pendingProps;var E=Fs(u,pn.current);Oa(u,p),E=ug(null,u,y,l,E,p);var A=cg();return u.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Nn(y)?(A=!0,Hf(u)):A=!1,u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Zm(u),E.updater=Jf,u.stateNode=E,E._reactInternals=u,Jm(u,y,l,p),u=vg(null,u,y,!0,A,p)):(u.tag=0,qt&&A&&Qm(u),si(null,u,E,p),u=u.child),u;case 16:y=u.elementType;e:{switch(l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),l=u.pendingProps,E=y._init,y=E(y._payload),u.type=y,E=u.tag=RP(y),l=vr(y,l),E){case 0:u=gg(null,u,y,l,p);break e;case 1:u=j1(null,u,y,l,p);break e;case 11:u=H1(null,u,y,l,p);break e;case 14:u=V1(null,u,y,vr(y.type,l),p);break e}throw Error(o(306,y,""))}return u;case 0:return y=u.type,E=u.pendingProps,E=u.elementType===y?E:vr(y,E),gg(l,u,y,E,p);case 1:return y=u.type,E=u.pendingProps,E=u.elementType===y?E:vr(y,E),j1(l,u,y,E,p);case 3:e:{if(Y1(u),l===null)throw Error(o(387));y=u.pendingProps,A=u.memoizedState,E=A.element,t1(l,u),Kf(u,y,null,p);var F=u.memoizedState;if(y=F.element,ie&&A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:F.cache,transitions:F.transitions},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){E=Error(o(423)),u=q1(l,u,y,p,E);break e}else if(y!==E){E=Error(o(424)),u=q1(l,u,y,p,E);break e}else for(ie&&(Ri=Se(u.stateNode.containerInfo),Pi=u,qt=!0,yr=null,Mu=!1),p=p1(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(za(),y===E){u=fs(l,u,p);break e}si(l,u,y,p)}u=u.child}return u;case 5:return m1(u),l===null&&ng(u),y=u.type,E=u.pendingProps,A=l!==null?l.memoizedProps:null,F=E.children,ce(y,E)?F=null:A!==null&&ce(y,A)&&(u.flags|=32),X1(l,u),si(l,u,F,p),u.child;case 6:return l===null&&ng(u),null;case 13:return $1(l,u,p);case 4:return rg(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=Ba(u,null,y,p):si(l,u,y,p),u.child;case 11:return y=u.type,E=u.pendingProps,E=u.elementType===y?E:vr(y,E),H1(l,u,y,E,p);case 7:return si(l,u,u.pendingProps,p),u.child;case 8:return si(l,u,u.pendingProps.children,p),u.child;case 12:return si(l,u,u.pendingProps.children,p),u.child;case 10:e:{if(y=u.type._context,E=u.pendingProps,A=u.memoizedProps,F=E.value,e1(u,y,F),A!==null)if(Fr(A.value,F)){if(A.children===E.children&&!zt.current){u=fs(l,u,p);break e}}else for(A=u.child,A!==null&&(A.return=u);A!==null;){var J=A.dependencies;if(J!==null){F=A.child;for(var ge=J.firstContext;ge!==null;){if(ge.context===y){if(A.tag===1){ge=as(-1,p&-p),ge.tag=2;var Ne=A.updateQueue;if(Ne!==null){Ne=Ne.shared;var je=Ne.pending;je===null?ge.next=ge:(ge.next=je.next,je.next=ge),Ne.pending=ge}}A.lanes|=p,ge=A.alternate,ge!==null&&(ge.lanes|=p),$m(A.return,p,u),J.lanes|=p;break}ge=ge.next}}else if(A.tag===10)F=A.type===u.type?null:A.child;else if(A.tag===18){if(F=A.return,F===null)throw Error(o(341));F.lanes|=p,J=F.alternate,J!==null&&(J.lanes|=p),$m(F,p,u),F=A.sibling}else F=A.child;if(F!==null)F.return=A;else for(F=A;F!==null;){if(F===u){F=null;break}if(A=F.sibling,A!==null){A.return=F.return,F=A;break}F=F.return}A=F}si(l,u,E.children,p),u=u.child}return u;case 9:return E=u.type,y=u.pendingProps.children,Oa(u,p),E=qi(E),y=y(E),u.flags|=1,si(l,u,y,p),u.child;case 14:return y=u.type,E=vr(y,u.pendingProps),E=vr(y.type,E),V1(l,u,y,E,p);case 15:return G1(l,u,u.type,u.pendingProps,p);case 17:return y=u.type,E=u.pendingProps,E=u.elementType===y?E:vr(y,E),l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,Nn(y)?(l=!0,Hf(u)):l=!1,Oa(u,p),o1(u,y,E),Jm(u,y,E,p),vg(null,u,y,!0,l,p);case 19:return Q1(l,u,p);case 22:return W1(l,u,p)}throw Error(o(156,u.tag))};function wS(l,u){return Vm(l,u)}function PP(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(l,u,p,y){return new PP(l,u,p,y)}function zg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function RP(l){if(typeof l=="function")return zg(l)?1:0;if(l!=null){if(l=l.$$typeof,l===w)return 11;if(l===x)return 14}return 2}function Xs(l,u){var p=l.alternate;return p===null?(p=er(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&14680064,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p}function Id(l,u,p,y,E,A){var F=2;if(y=l,typeof l=="function")zg(l)&&(F=1);else if(typeof l=="string")F=5;else e:switch(l){case d:return Wo(p.children,E,A,u);case h:F=8,E|=8;break;case m:return l=er(12,p,u,E|2),l.elementType=m,l.lanes=A,l;case M:return l=er(13,p,u,E),l.elementType=M,l.lanes=A,l;case g:return l=er(19,p,u,E),l.elementType=g,l.lanes=A,l;case T:return Dd(p,E,A,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:F=10;break e;case _:F=9;break e;case w:F=11;break e;case x:F=14;break e;case S:F=16,y=null;break e}throw Error(o(130,l==null?l:typeof l,""))}return u=er(F,p,u,E),u.elementType=l,u.type=y,u.lanes=A,u}function Wo(l,u,p,y){return l=er(7,l,y,u),l.lanes=p,l}function Dd(l,u,p,y){return l=er(22,l,y,u),l.elementType=T,l.lanes=p,l.stateNode={},l}function Bg(l,u,p){return l=er(6,l,null,u),l.lanes=p,l}function Hg(l,u,p){return u=er(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function LP(l,u,p,y,E){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Oe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bm(0),this.expirationTimes=Bm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bm(0),this.identifierPrefix=y,this.onRecoverableError=E,ie&&(this.mutableSourceEagerHydrationData=null)}function ES(l,u,p,y,E,A,F,J,ge){return l=new LP(l,u,p,J,ge),u===1?(u=1,A===!0&&(u|=8)):u=0,A=er(3,null,null,u),l.current=A,A.stateNode=l,A.memoizedState={element:y,isDehydrated:p,cache:null,transitions:null},Zm(A),l}function TS(l){if(!l)return Vn;l=l._reactInternals;e:{if(b(l)!==l||l.tag!==1)throw Error(o(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Nn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(l.tag===1){var p=l.type;if(Nn(p))return $x(l,p,u)}return u}function AS(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=K(u),l===null?null:l.stateNode}function CS(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function Vg(l,u){CS(l,u),(l=l.alternate)&&CS(l,u)}function IP(l){return l=K(l),l===null?null:l.stateNode}function DP(){return null}return t.attemptContinuousHydration=function(l){if(l.tag===13){var u=oi();Qi(l,134217728,u),Vg(l,134217728)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=oi(),p=Gs(l);Qi(l,p,u),Vg(l,p)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var p=xu(u.pendingLanes);p!==0&&(Hm(u,p|1),vi(u,Tn()),!(xt&6)&&(ja(),zr()))}break;case 13:var y=oi();mS(function(){return Qi(l,1,y)}),Vg(l,1)}},t.batchedUpdates=function(l,u){var p=xt;xt|=1;try{return l(u)}finally{xt=p,xt===0&&(ja(),jf&&zr())}},t.createComponentSelector=function(l){return{$$typeof:yd,value:l}},t.createContainer=function(l,u,p,y,E,A,F){return ES(l,u,!1,null,p,y,E,A,F)},t.createHasPseudoClassSelector=function(l){return{$$typeof:_d,value:l}},t.createHydrationContainer=function(l,u,p,y,E,A,F,J,ge){return l=ES(p,y,!0,l,E,A,F,J,ge),l.context=TS(null),p=l.current,y=oi(),E=Gs(p),A=as(y,E),A.callback=u??null,Bs(p,A),l.current.lanes=E,Su(l,E,y),vi(l,y),l},t.createPortal=function(l,u,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:y==null?null:""+y,children:l,containerInfo:u,implementation:p}},t.createRoleSelector=function(l){return{$$typeof:xd,value:l}},t.createTestNameSelector=function(l){return{$$typeof:Sd,value:l}},t.createTextSelector=function(l){return{$$typeof:Md,value:l}},t.deferredUpdates=function(l){var u=bt,p=ln.transition;try{return ln.transition=null,bt=16,l()}finally{bt=u,ln.transition=p}},t.discreteUpdates=function(l,u,p,y,E){var A=bt,F=ln.transition;try{return ln.transition=null,bt=1,l(u,p,y,E)}finally{bt=A,ln.transition=F,xt===0&&ja()}},t.findAllNodes=bg,t.findBoundingRects=function(l,u){if(!We)throw Error(o(363));u=bg(l,u),l=[];for(var p=0;p<u.length;p++)l.push(k(u[p]));for(u=l.length-1;0<u;u--){p=l[u];for(var y=p.x,E=y+p.width,A=p.y,F=A+p.height,J=u-1;0<=J;J--)if(u!==J){var ge=l[J],Ne=ge.x,je=Ne+ge.width,st=ge.y,tt=st+ge.height;if(y>=Ne&&A>=st&&E<=je&&F<=tt){l.splice(u,1);break}else if(y!==Ne||p.width!==ge.width||tt<A||st>F){if(!(A!==st||p.height!==ge.height||je<y||Ne>E)){Ne>y&&(ge.width+=Ne-y,ge.x=y),je<E&&(ge.width=E-Ne),l.splice(u,1);break}}else{st>A&&(ge.height+=st-A,ge.y=A),tt<F&&(ge.height=F-st),l.splice(u,1);break}}}return l},t.findHostInstance=AS,t.findHostInstanceWithNoPortals=function(l){return l=G(l),l=l!==null?te(l):null,l===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return AS(l)},t.flushControlled=function(l){var u=xt;xt|=1;var p=ln.transition,y=bt;try{ln.transition=null,bt=1,l()}finally{bt=y,ln.transition=p,xt=u,xt===0&&(ja(),zr())}},t.flushPassiveEffects=Go,t.flushSync=mS,t.focusWithin=function(l,u){if(!We)throw Error(o(363));for(l=Tg(l),u=dS(l,u),u=Array.from(u),l=0;l<u.length;){var p=u[l++];if(!Z(p)){if(p.tag===5&&be(p.stateNode))return!0;for(p=p.child;p!==null;)u.push(p),p=p.sibling}}return!1},t.getCurrentUpdatePriority=function(){return bt},t.getFindAllNodesFailureDescription=function(l,u){if(!We)throw Error(o(363));var p=0,y=[];l=[Tg(l),0];for(var E=0;E<l.length;){var A=l[E++],F=l[E++],J=u[F];if((A.tag!==5||!Z(A))&&(Ag(A,J)&&(y.push(Cg(J)),F++,F>p&&(p=F)),F<u.length))for(A=A.child;A!==null;)l.push(A,F),A=A.sibling}if(p<u.length){for(l=[];p<u.length;p++)l.push(Cg(u[p]));return`findAllNodes was able to match part of the selector:
  `+(y.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},t.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return ue(l.child.stateNode);default:return l.child.stateNode}},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:IP,findFiberByHostInstance:l.findFiberByHostInstance||DP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{Xf=u.inject(l),kr=u}catch{}l=!!u.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,u,p,y){if(!We)throw Error(o(363));l=bg(l,u);var E=Ie(l,p,y).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(l,u){var p=u._getVersion;p=p(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,p]:l.mutableSourceEagerHydrationData.push(u,p)},t.runWithPriority=function(l,u){var p=bt;try{return bt=l,u()}finally{bt=p}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,u,p,y){var E=u.current,A=oi(),F=Gs(E);return p=TS(p),u.context===null?u.context=p:u.pendingContext=p,u=as(A,F),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),Bs(E,u),l=Qi(E,F,A),l!==null&&Zf(l,E,F),F},t};a2.exports=hz;var pz=a2.exports;const mz=Yp(pz);var l2={exports:{}},u2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,H){var z=D.length;D.push(H);e:for(;0<z;){var oe=z-1>>>1,W=D[oe];if(0<r(W,H))D[oe]=H,D[z]=W,z=oe;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var H=D[0],z=D.pop();if(z!==H){D[0]=z;e:for(var oe=0,W=D.length,X=W>>>1;oe<X;){var j=2*(oe+1)-1,ce=D[j],V=j+1,B=D[V];if(0>r(ce,z))V<W&&0>r(B,ce)?(D[oe]=B,D[V]=z,oe=V):(D[oe]=ce,D[j]=z,oe=j);else if(V<W&&0>r(B,z))D[oe]=B,D[V]=z,oe=V;else break e}}return H}function r(D,H){var z=D.sortIndex-H.sortIndex;return z!==0?z:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],f=[],d=1,h=null,m=3,v=!1,_=!1,w=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var H=t(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=D)i(f),H.sortIndex=H.expirationTime,e(c,H);else break;H=t(f)}}function T(D){if(w=!1,S(D),!_)if(t(c)!==null)_=!0,ue(C);else{var H=t(f);H!==null&&ne(T,H.startTime-D)}}function C(D,H){_=!1,w&&(w=!1,g(I),I=-1),v=!0;var z=m;try{for(S(H),h=t(c);h!==null&&(!(h.expirationTime>H)||D&&!G());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,m=h.priorityLevel;var W=oe(h.expirationTime<=H);H=n.unstable_now(),typeof W=="function"?h.callback=W:h===t(c)&&i(c),S(H)}else i(c);h=t(c)}if(h!==null)var X=!0;else{var j=t(f);j!==null&&ne(T,j.startTime-H),X=!1}return X}finally{h=null,m=z,v=!1}}var P=!1,R=null,I=-1,b=5,L=-1;function G(){return!(n.unstable_now()-L<b)}function K(){if(R!==null){var D=n.unstable_now();L=D;var H=!0;try{H=R(!0,D)}finally{H?q():(P=!1,R=null)}}else P=!1}var q;if(typeof x=="function")q=function(){x(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Q=te.port2;te.port1.onmessage=K,q=function(){Q.postMessage(null)}}else q=function(){M(K,0)};function ue(D){R=D,P||(P=!0,q())}function ne(D,H){I=M(function(){D(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){_||v||(_=!0,ue(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var z=m;m=H;try{return D()}finally{m=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=m;m=D;try{return H()}finally{m=z}},n.unstable_scheduleCallback=function(D,H,z){var oe=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?oe+z:oe):z=oe,D){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,D={id:d++,callback:H,priorityLevel:D,startTime:z,expirationTime:W,sortIndex:-1},z>oe?(D.sortIndex=z,e(f,D),t(c)===null&&D===t(f)&&(w?(g(I),I=-1):w=!0,ne(T,z-oe))):(D.sortIndex=W,e(c,D),_||v||(_=!0,ue(C))),D},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(D){var H=m;return function(){var z=m;m=H;try{return D.apply(this,arguments)}finally{m=z}}}})(u2);l2.exports=u2;var fE=l2.exports;const Nx={},gz=n=>void Object.assign(Nx,n);function vz(n,e){function t(d,{args:h=[],attach:m,...v},_){let w=`${d[0].toUpperCase()}${d.slice(1)}`,M;if(d==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=v.object;M=yl(g,{type:d,root:_,attach:m,primitive:!0})}else{const g=Nx[w];if(!g)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");M=yl(new g(...h),{type:d,root:_,attach:m,memoizedProps:{args:h}})}return M.__r3f.attach===void 0&&(M instanceof vt?M.__r3f.attach="geometry":M instanceof Hn&&(M.__r3f.attach="material")),w!=="inject"&&Z0(M,v),M}function i(d,h){let m=!1;if(h){var v,_;(v=h.__r3f)!=null&&v.attach?$0(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),m=!0),m||(_=d.__r3f)==null||_.objects.push(h),h.__r3f||yl(h,{}),h.__r3f.parent=d,Hy(h),_l(h)}}function r(d,h,m){let v=!1;if(h){var _,w;if((_=h.__r3f)!=null&&_.attach)$0(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"});const M=d.children.filter(x=>x!==h),g=M.indexOf(m);d.children=[...M.slice(0,g),h,...M.slice(g)],v=!0}v||(w=d.__r3f)==null||w.objects.push(h),h.__r3f||yl(h,{}),h.__r3f.parent=d,Hy(h),_l(h)}}function s(d,h,m=!1){d&&[...d].forEach(v=>o(h,v,m))}function o(d,h,m){if(h){var v,_,w;if(h.__r3f&&(h.__r3f.parent=null),(v=d.__r3f)!=null&&v.objects&&(d.__r3f.objects=d.__r3f.objects.filter(T=>T!==h)),(_=h.__r3f)!=null&&_.attach)gE(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var M;d.remove(h),(M=h.__r3f)!=null&&M.root&&Ez(h.__r3f.root,h)}const x=(w=h.__r3f)==null?void 0:w.primitive,S=m===void 0?h.dispose!==null&&!x:m;if(!x){var g;s((g=h.__r3f)==null?void 0:g.objects,h,S),s(h.children,h,S)}h.__r3f&&(delete h.__r3f.root,delete h.__r3f.objects,delete h.__r3f.handlers,delete h.__r3f.memoizedProps,x||delete h.__r3f),S&&h.dispose&&h.type!=="Scene"&&fE.unstable_scheduleCallback(fE.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),_l(d)}}function a(d,h,m,v){var _;const w=(_=d.__r3f)==null?void 0:_.parent;if(!w)return;const M=t(h,m,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&i(M,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>i(M,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(w,d),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),i(w,M),M.raycast&&M.__r3f.eventCount&&M.__r3f.root.getState().internal.interaction.push(M),[v,v.alternate].forEach(g=>{g!==null&&(g.stateNode=M,g.ref&&(typeof g.ref=="function"?g.ref(M):g.ref.current=M))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:mz({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const m=d.getState().scene;m.__r3f&&(m.__r3f.root=d,i(m,h))},removeChildFromContainer:(d,h)=>{h&&o(d.getState().scene,h)},insertInContainerBefore:(d,h,m)=>{if(!h||!m)return;const v=d.getState().scene;v.__r3f&&r(v,h,m)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,m,v){if(d.__r3f.primitive&&v.object&&v.object!==d)return[!0];{const{args:_=[],children:w,...M}=v,{args:g=[],children:x,...S}=m;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((C,P)=>C!==g[P]))return[!0];const T=g2(d,M,S,!0);return T.changes.length?[!1,T]:null}},commitUpdate(d,[h,m],v,_,w,M){h?a(d,v,w,M):Z0(d,m)},commitMount(d,h,m,v){var _;const w=(_=d.__r3f)!=null?_:{};d.raycast&&w.handlers&&w.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>yl(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:m,parent:v}=(h=d.__r3f)!=null?h:{};m&&v&&gE(v,d,m),d.isObject3D&&(d.visible=!1),_l(d)},unhideInstance(d,h){var m;const{attach:v,parent:_}=(m=d.__r3f)!=null?m:{};v&&_&&$0(_,d,v),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),_l(d)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Ol.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&$t.fun(performance.now)?performance.now:$t.fun(Date.now)?Date.now:()=>0,scheduleTimeout:$t.fun(setTimeout)?setTimeout:void 0,cancelTimeout:$t.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Z0}}var dE,hE;const q0=n=>"colorSpace"in n||"outputColorSpace"in n,c2=()=>{var n;return(n=Nx.ColorManagement)!=null?n:null},f2=n=>n&&n.isOrthographicCamera,yz=n=>n&&n.hasOwnProperty("current"),Nf=typeof window<"u"&&((dE=window.document)!=null&&dE.createElement||((hE=window.navigator)==null?void 0:hE.product)==="ReactNative")?me.useLayoutEffect:me.useEffect;function d2(n){const e=me.useRef(n);return Nf(()=>void(e.current=n),[n]),e}function _z({set:n}){return Nf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class h2 extends me.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}h2.getDerivedStateFromError=()=>({error:!0});const p2="__default",pE=new Map,xz=n=>n&&!!n.memoized&&!!n.changes;function m2(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const ic=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},$t={obj:n=>n===Object(n)&&!$t.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if($t.str(n)||$t.num(n))return n===e;const s=$t.obj(n);if(s&&i==="reference")return n===e;const o=$t.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!$t.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if($t.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Sz(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function yl(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function By(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const mE=/-\d+$/;function $0(n,e,t){if($t.str(t)){if(mE.test(t)){const s=t.replace(mE,""),{target:o,key:a}=By(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=By(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function gE(n,e,t){var i,r;if($t.str(t)){const{target:s,key:o}=By(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function g2(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...c}={},f=!1){var d;const h=(d=n==null?void 0:n.__r3f)!=null?d:{},m=Object.entries(r),v=[];if(f){const w=Object.keys(c);for(let M=0;M<w.length;M++)r.hasOwnProperty(w[M])||m.unshift([w[M],p2+"remove"])}m.forEach(([w,M])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&w==="object"||$t.equ(M,c[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return v.push([w,M,!0,[]]);let x=[];w.includes("-")&&(x=w.split("-")),v.push([w,M,!1,x]);for(const S in r){const T=r[S];S.startsWith(`${w}-`)&&v.push([S,T,!1,S.split("-")])}});const _={...r};return h.memoizedProps&&h.memoizedProps.args&&(_.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(_.attach=h.memoizedProps.attach),{memoized:_,changes:v}}function Z0(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:c,changes:f}=xz(e)?e:g2(n,e),d=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=c);for(let m=0;m<f.length;m++){let[v,_,w,M]=f[m];if(q0(n)){const T="srgb",C="srgb-linear";v==="encoding"?(v="colorSpace",_=_===3001?T:C):v==="outputEncoding"&&(v="outputColorSpace",_=_===3001?T:C)}let g=n,x=g[v];if(M.length&&(x=M.reduce((S,T)=>S[T],n),!(x&&x.set))){const[S,...T]=M.reverse();g=T.reverse().reduce((C,P)=>C[P],n),v=S}if(_===p2+"remove")if(g.constructor){let S=pE.get(g.constructor);S||(S=new g.constructor,pE.set(g.constructor,S)),_=S[v]}else _=0;if(w)_?s.handlers[v]=_:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof ya)){if(Array.isArray(_))x.fromArray?x.fromArray(_):x.set(..._);else if(x.copy&&_&&_.constructor&&x.constructor===_.constructor)x.copy(_);else if(_!==void 0){const S=x instanceof Ve;!S&&x.setScalar?x.setScalar(_):x instanceof ya&&_ instanceof ya?x.mask=_.mask:x.set(_),!c2()&&!a.linear&&S&&x.convertSRGBToLinear()}}else if(g[v]=_,g[v]instanceof an&&g[v].format===wi&&g[v].type===Ns){const S=g[v];q0(S)&&q0(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}_l(n)}if(s.parent&&a.internal&&n.raycast&&d!==s.eventCount){const m=a.internal.interaction.indexOf(n);m>-1&&a.internal.interaction.splice(m,1),s.eventCount&&a.internal.interaction.push(n)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(r=n.__r3f)!=null&&r.parent&&Hy(n),n}function _l(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Hy(n){n.onUpdate==null||n.onUpdate(n)}function Mz(n,e){n.manual||(f2(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Fh(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function wz(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ol.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ol.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ol.ContinuousEventPriority;default:return Ol.DefaultEventPriority}}function v2(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Ez(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{v2(t.capturedMap,e,i,r)})}function Tz(n){function e(c){const{internal:f}=n.getState(),d=c.offsetX-f.initialClick[0],h=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=f.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function i(c,f){const d=n.getState(),h=new Set,m=[],v=f?f(d.internal.interaction):d.internal.interaction;for(let g=0;g<v.length;g++){const x=ic(v[g]);x&&(x.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function _(g){const x=ic(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(c,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let w=v.flatMap(_).sort((g,x)=>{const S=ic(g.object),T=ic(x.object);return!S||!T?g.distance-x.distance:T.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=Fh(g);return h.has(x)?!1:(h.add(x),!0)});d.events.filter&&(w=d.events.filter(w,d));for(const g of w){let x=g.object;for(;x;){var M;(M=x.__r3f)!=null&&M.eventCount&&m.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let g of d.internal.capturedMap.get(c.pointerId).values())h.has(Fh(g.intersection))||m.push(g.intersection);return m}function r(c,f,d,h){const m=n.getState();if(c.length){const v={stopped:!1};for(const _ of c){const w=ic(_.object)||m,{raycaster:M,pointer:g,camera:x,internal:S}=w,T=new N(g.x,g.y,0).unproject(x),C=L=>{var G,K;return(G=(K=S.capturedMap.get(L))==null?void 0:K.has(_.eventObject))!=null?G:!1},P=L=>{const G={intersection:_,target:f.target};S.capturedMap.has(L)?S.capturedMap.get(L).set(_.eventObject,G):S.capturedMap.set(L,new Map([[_.eventObject,G]])),f.target.setPointerCapture(L)},R=L=>{const G=S.capturedMap.get(L);G&&v2(S.capturedMap,_.eventObject,G,L)};let I={};for(let L in f){let G=f[L];typeof G!="function"&&(I[L]=G)}let b={..._,...I,pointer:g,intersections:c,stopped:v.stopped,delta:d,unprojectedPoint:T,ray:M.ray,camera:x,stopPropagation(){const L="pointerId"in f&&S.capturedMap.get(f.pointerId);if((!L||L.has(_.eventObject))&&(b.stopped=v.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(G=>G.eventObject===_.eventObject))){const G=c.slice(0,c.indexOf(_));s([...G,_])}},target:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:R},nativeEvent:f};if(h(b),v.stopped===!0)break}}return c}function s(c){const{internal:f}=n.getState();for(const d of f.hovered.values())if(!c.length||!c.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const m=d.eventObject.__r3f,v=m==null?void 0:m.handlers;if(f.hovered.delete(Fh(d)),m!=null&&m.eventCount){const _={...d,intersections:c};v.onPointerOut==null||v.onPointerOut(_),v.onPointerLeave==null||v.onPointerLeave(_)}}}function o(c,f){for(let d=0;d<f.length;d++){const h=f[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(c)}}function a(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:d}=n.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),s([]))})}}return function(d){const{onPointerMissed:h,internal:m}=n.getState();m.lastEvent.current=d;const v=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=i(d,v?t:void 0),g=_?e(d):0;c==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=M.map(S=>S.eventObject)),_&&!M.length&&g<=2&&(o(d,m.interaction),h&&h(d)),v&&s(M);function x(S){const T=S.eventObject,C=T.__r3f,P=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(v){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const R=Fh(S),I=m.hovered.get(R);I?I.stopped&&S.stopPropagation():(m.hovered.set(R,S),P.onPointerOver==null||P.onPointerOver(S),P.onPointerEnter==null||P.onPointerEnter(S))}P.onPointerMove==null||P.onPointerMove(S)}else{const R=P[c];R?(!_||m.initialHits.includes(T))&&(o(d,m.interaction.filter(I=>!m.initialHits.includes(I))),R(S)):_&&m.initialHits.includes(T)&&o(d,m.interaction.filter(I=>!m.initialHits.includes(I)))}}r(M,d,g,x)}}return{handlePointer:a}}const y2=n=>!!(n!=null&&n.render),_2=me.createContext(null),Az=(n,e)=>{const t=cz((a,c)=>{const f=new N,d=new N,h=new N;function m(g=c().camera,x=d,S=c().size){const{width:T,height:C,top:P,left:R}=S,I=T/C;x instanceof N?h.copy(x):h.set(...x);const b=g.getWorldPosition(f).distanceTo(h);if(f2(g))return{width:T/g.zoom,height:C/g.zoom,top:P,left:R,factor:1,distance:b,aspect:I};{const L=g.fov*Math.PI/180,G=2*Math.tan(L/2)*b,K=G*(T/C);return{width:K,height:G,top:P,left:R,factor:T/K,distance:b,aspect:I}}}let v;const _=g=>a(x=>({performance:{...x.performance,current:g}})),w=new Ee;return{set:a,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(c(),g),advance:(g,x)=>e(g,x,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Rx,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=c();v&&clearTimeout(v),g.performance.current!==g.performance.min&&_(g.performance.min),v=setTimeout(()=>_(c().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,T,C)=>{const P=c().camera,R={width:g,height:x,top:T||0,left:C||0,updateStyle:S};a(I=>({size:R,viewport:{...I.viewport,...m(P,d,R)}}))},setDpr:g=>a(x=>{const S=m2(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=c().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:me.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const T=c().internal;return T.priority=T.priority+(x>0?1:0),T.subscribers.push({ref:g,priority:x,store:S}),T.subscribers=T.subscribers.sort((C,P)=>C.priority-P.priority),()=>{const C=c().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(x>0?1:0),C.subscribers=C.subscribers.filter(P=>P.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:c,viewport:f,gl:d,set:h}=t.getState();if(c!==r||f.dpr!==s){var m;r=c,s=f.dpr,Mz(a,c),d.setPixelRatio(f.dpr);const v=(m=c.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,v)}a!==o&&(o=a,h(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let zh,Cz=new Set,bz=new Set,Pz=new Set;function K0(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function rc(n,e){switch(n){case"before":return K0(Cz,e);case"after":return K0(bz,e);case"tail":return K0(Pz,e)}}let J0,Q0;function ev(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),J0=e.internal.subscribers,zh=0;zh<J0.length;zh++)Q0=J0[zh],Q0.ref.current(Q0.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Rz(n){let e=!1,t,i,r;function s(c){i=requestAnimationFrame(s),e=!0,t=0,rc("before",c);for(const d of n.values()){var f;r=d.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(t+=ev(c,r))}if(rc("after",c),t===0)return rc("tail",c),e=!1,cancelAnimationFrame(i)}function o(c,f=1){var d;if(!c)return n.forEach(h=>o(h.store.getState()),f);(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function a(c,f=!0,d,h){if(f&&rc("before",c),d)ev(c,d,h);else for(const m of n.values())ev(c,m.store.getState());f&&rc("after",c)}return{loop:s,invalidate:o,advance:a}}function x2(){const n=me.useContext(_2);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function $r(n=t=>t,e){return x2()(n,e)}function Ux(n,e=0){const t=x2(),i=t.getState().internal.subscribe,r=d2(n);return Nf(()=>i(r,e,t),[e,i,t]),null}const su=new Map,{invalidate:vE,advance:yE}=Rz(su),{reconciler:Vp,applyProps:gl}=vz(su,wz),vl={objects:"shallow",strict:!1},Lz=(n,e)=>{const t=typeof n=="function"?n(e):n;return y2(t)?t:new ax({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Iz(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Dz(n){const e=su.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Az(vE,yE),o=t||Vp.createContainer(s,Ol.ConcurrentRoot,null,!1,null,"",r,null);e||su.set(n,{fiber:o,store:s});let a,c=!1,f;return{configure(d={}){let{gl:h,size:m,scene:v,events:_,onCreated:w,shadows:M=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:T=!1,frameloop:C="always",dpr:P=[1,2],performance:R,raycaster:I,camera:b,onPointerMissed:L}=d,G=s.getState(),K=G.gl;G.gl||G.set({gl:K=Lz(h,n)});let q=G.raycaster;q||G.set({raycaster:q=new i2});const{params:te,...Q}=I||{};if($t.equ(Q,q,vl)||gl(q,{...Q}),$t.equ(te,q.params,vl)||gl(q,{params:{...q.params,...te}}),!G.camera||G.camera===f&&!$t.equ(f,b,vl)){f=b;const oe=b instanceof _f,W=oe?b:T?new es(0,0,0,0,.1,1e3):new Gt(75,0,.1,1e3);oe||(W.position.z=5,b&&gl(W,b),!G.camera&&!(b!=null&&b.rotation)&&W.lookAt(0,0,0)),G.set({camera:W})}if(!G.scene){let oe;v instanceof Bp?oe=v:(oe=new Bp,v&&gl(oe,v)),G.set({scene:yl(oe)})}if(!G.xr){const oe=(j,ce)=>{const V=s.getState();V.frameloop!=="never"&&yE(j,!0,V,ce)},W=()=>{const j=s.getState();j.gl.xr.enabled=j.gl.xr.isPresenting,j.gl.xr.setAnimationLoop(j.gl.xr.isPresenting?oe:null),j.gl.xr.isPresenting||vE(j)},X={connect(){const j=s.getState().gl;j.xr.addEventListener("sessionstart",W),j.xr.addEventListener("sessionend",W)},disconnect(){const j=s.getState().gl;j.xr.removeEventListener("sessionstart",W),j.xr.removeEventListener("sessionend",W)}};K.xr&&X.connect(),G.set({xr:X})}if(K.shadowMap){const oe=K.shadowMap.enabled,W=K.shadowMap.type;if(K.shadowMap.enabled=!!M,$t.boo(M))K.shadowMap.type=xc;else if($t.str(M)){var ue;const X={basic:aC,percentage:fm,soft:xc,variance:Er};K.shadowMap.type=(ue=X[M])!=null?ue:xc}else $t.obj(M)&&Object.assign(K.shadowMap,M);(oe!==K.shadowMap.enabled||W!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const ne=c2();ne&&("enabled"in ne?ne.enabled=!S:"legacyMode"in ne&&(ne.legacyMode=S)),gl(K,{outputEncoding:g?3e3:3001,toneMapping:x?Rr:Y_}),G.legacy!==S&&G.set(()=>({legacy:S})),G.linear!==g&&G.set(()=>({linear:g})),G.flat!==x&&G.set(()=>({flat:x})),h&&!$t.fun(h)&&!y2(h)&&!$t.equ(h,K,vl)&&gl(K,h),_&&!G.events.handlers&&G.set({events:_(s)});const z=Iz(n,m);return $t.equ(z,G.size,vl)||G.setSize(z.width,z.height,z.updateStyle,z.top,z.left),P&&G.viewport.dpr!==m2(P)&&G.setDpr(P),G.frameloop!==C&&G.setFrameloop(C),G.onPointerMissed||G.set({onPointerMissed:L}),R&&!$t.equ(R,G.performance,vl)&&G.set(oe=>({performance:{...oe.performance,...R}})),a=w,c=!0,this},render(d){return c||this.configure(),Vp.updateContainer(me.createElement(Nz,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){S2(n)}}}function Nz({store:n,children:e,onCreated:t,rootElement:i}){return Nf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),me.createElement(_2.Provider,{value:n},e)}function S2(n,e){const t=su.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Vp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),Sz(r),su.delete(n),e&&e(n)}catch{}},500)})}}Vp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:me.version});function ns(){return ns=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ns.apply(this,arguments)}function Vy(n,e,t){var i,r,s,o,a;e==null&&(e=100);function c(){var d=Date.now()-o;d<e&&d>=0?i=setTimeout(c,e-d):(i=null,t||(a=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var d=t&&!i;return i||(i=setTimeout(c,e)),d&&(a=n.apply(s,r),s=r=null),a};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}Vy.debounce=Vy;var Uz=Vy;const _E=Yp(Uz);function Oz(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=me.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=me.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=me.useRef(!1);me.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[m,v,_]=me.useMemo(()=>{const x=()=>{if(!c.current.element)return;const{left:S,top:T,width:C,height:P,bottom:R,right:I,x:b,y:L}=c.current.element.getBoundingClientRect(),G={left:S,top:T,width:C,height:P,bottom:R,right:I,x:b,y:L};c.current.element instanceof HTMLElement&&r&&(G.height=c.current.element.offsetHeight,G.width=c.current.element.offsetWidth),Object.freeze(G),h.current&&!Bz(c.current.lastBounds,G)&&a(c.current.lastBounds=G)};return[x,d?_E(x,d):x,f?_E(x,f):x]},[a,r,f,d]);function w(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",_,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function M(){c.current.element&&(c.current.resizeObserver=new s(_),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(x=>x.addEventListener("scroll",_,{capture:!0,passive:!0})))}const g=x=>{!x||x===c.current.element||(w(),c.current.element=x,c.current.scrollContainers=M2(x),M())};return Fz(_,!!t),kz(v),me.useEffect(()=>{w(),M()},[t,_,v]),me.useEffect(()=>w,[]),[g,o,m]}function kz(n){me.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Fz(n,e){me.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function M2(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...M2(n.parentElement)]}const zz=["x","y","top","bottom","left","right","width","height"],Bz=(n,e)=>zz.every(t=>n[t]===e[t]);var Hz=Object.defineProperty,Vz=Object.defineProperties,Gz=Object.getOwnPropertyDescriptors,xE=Object.getOwnPropertySymbols,Wz=Object.prototype.hasOwnProperty,Xz=Object.prototype.propertyIsEnumerable,SE=(n,e,t)=>e in n?Hz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ME=(n,e)=>{for(var t in e||(e={}))Wz.call(e,t)&&SE(n,t,e[t]);if(xE)for(var t of xE(e))Xz.call(e,t)&&SE(n,t,e[t]);return n},jz=(n,e)=>Vz(n,Gz(e));function w2(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=w2(i,e,t);if(r)return r;i=e?null:i.sibling}}function E2(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Ox=E2(me.createContext(null));class T2 extends me.Component{render(){return me.createElement(Ox.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:wE,ReactCurrentDispatcher:EE}=me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Yz(){const n=me.useContext(Ox);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=me.useId();return me.useMemo(()=>{for(const i of[wE==null?void 0:wE.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=w2(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function qz(){var n,e;const t=Yz(),[i]=me.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==Ox&&!i.has(s)&&i.set(s,(e=EE==null?void 0:EE.current)==null?void 0:e.readContext(E2(s))),r=r.return}return i}function $z(){const n=qz();return me.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>me.createElement(e,null,me.createElement(t.Provider,jz(ME({},i),{value:n.get(t)}))),e=>me.createElement(T2,ME({},e))),[n])}const tv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Zz(n){const{handlePointer:e}=Tz(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(tv).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[c,f]=tv[o];t.addEventListener(c,a,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=tv[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const Kz=me.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=Zz,eventSource:a,eventPrefix:c,shadows:f,linear:d,flat:h,legacy:m,orthographic:v,frameloop:_,dpr:w,performance:M,raycaster:g,camera:x,onPointerMissed:S,onCreated:T,...C},P){me.useMemo(()=>gz(az),[]);const R=$z(),[I,b]=Oz({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=me.useRef(null),G=me.useRef(null);me.useImperativeHandle(P,()=>L.current);const K=d2(S),[q,te]=me.useState(!1),[Q,ue]=me.useState(!1);if(q)throw q;if(Q)throw Q;const ne=me.useRef(null);Nf(()=>{const H=L.current;b.width>0&&b.height>0&&H&&(ne.current||(ne.current=Dz(H)),ne.current.configure({gl:s,events:o,shadows:f,linear:d,flat:h,legacy:m,orthographic:v,frameloop:_,dpr:w,performance:M,raycaster:g,camera:x,size:b,onPointerMissed:(...z)=>K.current==null?void 0:K.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(a?yz(a)?a.current:a:G.current),c&&z.setEvents({compute:(oe,W)=>{const X=oe[c+"X"],j=oe[c+"Y"];W.pointer.set(X/W.size.width*2-1,-(j/W.size.height)*2+1),W.raycaster.setFromCamera(W.pointer,W.camera)}}),T==null||T(z)}}),ne.current.render(me.createElement(R,null,me.createElement(h2,{set:ue},me.createElement(me.Suspense,{fallback:me.createElement(_z,{set:te})},e)))))}),me.useEffect(()=>{const H=L.current;if(H)return()=>S2(H)},[]);const D=a?"none":"auto";return me.createElement("div",ns({ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:D,...r}},C),me.createElement("div",{ref:I,style:{width:"100%",height:"100%"}},me.createElement("canvas",{ref:L,style:{display:"block"}},t)))}),Jz=me.forwardRef(function(e,t){return me.createElement(T2,null,me.createElement(Kz,ns({},e,{ref:t})))}),Xp=class{constructor(){_i(this,"dummyHead");this.dummyHead=new nv(-1)}append(e){const t=new nv(e);let i=this.dummyHead;for(;i.next;)i=i.next;i.next=t}pop(){var t;let e=this.dummyHead;for(;(t=e.next)!=null&&t.next;)e=e.next;e.next=null}get(e){let t=-1,i=this.dummyHead;for(;t!=e&&i;)i=i.next,t+=1;return t===e?i:null}insertAtIndex(e,t){let i=this.dummyHead,r=-1;for(;r!==e-1&&i.next;)i=i.next,r++;let s=i.next;i.next=new nv(t),i.next.next=s}deleteAtIndex(e){var r;let t=this.dummyHead,i=-1;for(;i!==e-1&&t.next;)t=t.next,i++;t.next=((r=t.next)==null?void 0:r.next)||null}delete(e){let t=this.dummyHead,i=-1;for(;i!=e-1&&t.next;)t=t.next,i+=1;t.next=null}intoArray(){const e=[];let t=this.dummyHead.next;for(;t;)e.push(t.value),t=t.next;return e}clone(){return Xp.fromArray(this.intoArray())}};let jl=Xp;_i(jl,"fromArray",e=>{const t=new Xp;for(let i of e)t.append(i);return t});class nv{constructor(e){_i(this,"value");_i(this,"next");this.value=e,this.next=null}}const Uf=new N,kx=new N,Qz=new N;function eB(n,e,t){const i=Uf.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function tB(n,e){const t=Uf.setFromMatrixPosition(n.matrixWorld),i=kx.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(Qz);return r.angleTo(s)>Math.PI/2}function nB(n,e,t,i){const r=Uf.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function iB(n,e){if(e instanceof es)return e.zoom;if(e instanceof Gt){const t=Uf.setFromMatrixPosition(n.matrixWorld),i=kx.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function rB(n,e,t){if(e instanceof Gt||e instanceof es){const i=Uf.setFromMatrixPosition(n.matrixWorld),r=kx.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Gy=n=>Math.abs(n)<1e-10?0:n;function A2(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=Gy(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const sB=(n=>e=>A2(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),oB=(n=>(e,t)=>A2(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function aB(n){return n&&typeof n=="object"&&"current"in n}const TE=me.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:c,sprite:f=!1,transform:d=!1,occlude:h,onOcclude:m,castShadow:v,receiveShadow:_,material:w,geometry:M,zIndexRange:g=[16777271,0],calculatePosition:x=eB,as:S="div",wrapperClass:T,pointerEvents:C="auto",...P},R)=>{const{gl:I,camera:b,scene:L,size:G,raycaster:K,events:q,viewport:te}=$r(),[Q]=me.useState(()=>document.createElement(S)),ue=me.useRef(),ne=me.useRef(null),D=me.useRef(0),H=me.useRef([0,0]),z=me.useRef(null),oe=me.useRef(null),W=(a==null?void 0:a.current)||q.connected||I.domElement.parentNode,X=me.useRef(null),j=me.useRef(!1),ce=me.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&aB(h[0]),[h]);me.useLayoutEffect(()=>{const fe=I.domElement;h&&h==="blending"?(fe.style.zIndex=`${Math.floor(g[0]/2)}`,fe.style.position="absolute",fe.style.pointerEvents="none"):(fe.style.zIndex=null,fe.style.position=null,fe.style.pointerEvents=null)},[h]),me.useLayoutEffect(()=>{if(ne.current){const fe=ue.current=rC(Q);if(L.updateMatrixWorld(),d)Q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ye=x(ne.current,b,G);Q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ye[0]}px,${ye[1]}px,0);transform-origin:0 0;`}return W&&(r?W.prepend(Q):W.appendChild(Q)),()=>{W&&W.removeChild(Q),fe.unmount()}}},[W,d]),me.useLayoutEffect(()=>{T&&(Q.className=T)},[T]);const V=me.useMemo(()=>d?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height},...t},[t,s,o,G,d]),B=me.useMemo(()=>({position:"absolute",pointerEvents:C}),[C]);me.useLayoutEffect(()=>{if(j.current=!1,d){var fe;(fe=ue.current)==null||fe.render(me.createElement("div",{ref:z,style:V},me.createElement("div",{ref:oe,style:B},me.createElement("div",{ref:R,className:i,style:t,children:n}))))}else{var ye;(ye=ue.current)==null||ye.render(me.createElement("div",{ref:R,style:V,className:i,children:n}))}});const de=me.useRef(!0);Ux(fe=>{if(ne.current){b.updateMatrixWorld(),ne.current.updateWorldMatrix(!0,!1);const ye=d?H.current:x(ne.current,b,G);if(d||Math.abs(D.current-b.zoom)>e||Math.abs(H.current[0]-ye[0])>e||Math.abs(H.current[1]-ye[1])>e){const se=tB(ne.current,b);let ie=!1;ce&&(h!=="blending"?ie=[L]:Array.isArray(h)&&(ie=h.map(Re=>Re.current)));const _e=de.current;if(ie){const Re=nB(ne.current,b,K,ie);de.current=Re&&!se}else de.current=!se;_e!==de.current&&(m?m(!de.current):Q.style.display=de.current?"block":"none");const Ce=Math.floor(g[0]/2),Pe=h?ce?[g[0],Ce]:[Ce-1,0]:g;if(Q.style.zIndex=`${rB(ne.current,b,Pe)}`,d){const[Re,ke]=[G.width/2,G.height/2],Ge=b.projectionMatrix.elements[5]*ke,{isOrthographicCamera:We,top:rt,left:k,bottom:U,right:Z}=b,Me=sB(b.matrixWorldInverse),be=We?`scale(${Ge})translate(${Gy(-(Z+k)/2)}px,${Gy((rt+U)/2)}px)`:`translateZ(${Ge}px)`;let Ie=ne.current.matrixWorld;f&&(Ie=b.matrixWorldInverse.clone().transpose().copyPosition(Ie).scale(ne.current.scale),Ie.elements[3]=Ie.elements[7]=Ie.elements[11]=0,Ie.elements[15]=1),Q.style.width=G.width+"px",Q.style.height=G.height+"px",Q.style.perspective=We?"":`${Ge}px`,z.current&&oe.current&&(z.current.style.transform=`${be}${Me}translate(${Re}px,${ke}px)`,oe.current.style.transform=oB(Ie,1/((c||10)/400)))}else{const Re=c===void 0?1:iB(ne.current,b)*c;Q.style.transform=`translate3d(${ye[0]}px,${ye[1]}px,0) scale(${Re})`}H.current=ye,D.current=b.zoom}}if(!ce&&X.current&&!j.current)if(d){if(z.current){const ye=z.current.children[0];if(ye!=null&&ye.clientWidth&&ye!=null&&ye.clientHeight){const{isOrthographicCamera:se}=b;if(se||M)P.scale&&(Array.isArray(P.scale)?P.scale instanceof N?X.current.scale.copy(P.scale.clone().divideScalar(1)):X.current.scale.set(1/P.scale[0],1/P.scale[1],1/P.scale[2]):X.current.scale.setScalar(1/P.scale));else{const ie=(c||10)/400,_e=ye.clientWidth*ie,Ce=ye.clientHeight*ie;X.current.scale.set(_e,Ce,1)}j.current=!0}}}else{const ye=Q.children[0];if(ye!=null&&ye.clientWidth&&ye!=null&&ye.clientHeight){const se=1/te.factor,ie=ye.clientWidth*se,_e=ye.clientHeight*se;X.current.scale.set(ie,_e,1),j.current=!0}X.current.lookAt(fe.camera.position)}});const Oe=me.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return me.createElement("group",ns({},P,{ref:ne}),h&&!ce&&me.createElement("mesh",{castShadow:v,receiveShadow:_,ref:X},M||me.createElement("planeGeometry",null),w||me.createElement("shaderMaterial",{side:Cr,vertexShader:Oe.vertexShader,fragmentShader:Oe.fragmentShader})))});function lB(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function lf(n){return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(n)}function uB(n,e){if(lf(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(lf(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cB(n){var e=uB(n,"string");return lf(e)==="symbol"?e:String(e)}function at(n,e,t){return e=cB(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const AE=(n,e)=>(n%e+e)%e;let fB=class extends is{constructor(e,t){super(),at(this,"object",void 0),at(this,"domElement",void 0),at(this,"enabled",!0),at(this,"target",new N),at(this,"minDistance",0),at(this,"maxDistance",1/0),at(this,"minZoom",0),at(this,"maxZoom",1/0),at(this,"minPolarAngle",0),at(this,"maxPolarAngle",Math.PI),at(this,"minAzimuthAngle",-1/0),at(this,"maxAzimuthAngle",1/0),at(this,"enableDamping",!1),at(this,"dampingFactor",.05),at(this,"enableZoom",!0),at(this,"zoomSpeed",1),at(this,"enableRotate",!0),at(this,"rotateSpeed",1),at(this,"enablePan",!0),at(this,"panSpeed",1),at(this,"screenSpacePanning",!0),at(this,"keyPanSpeed",7),at(this,"autoRotate",!1),at(this,"autoRotateSpeed",2),at(this,"reverseOrbit",!1),at(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),at(this,"mouseButtons",{LEFT:ta.ROTATE,MIDDLE:ta.DOLLY,RIGHT:ta.PAN}),at(this,"touches",{ONE:na.ROTATE,TWO:na.DOLLY_PAN}),at(this,"target0",void 0),at(this,"position0",void 0),at(this,"zoom0",void 0),at(this,"_domElementKeyEvents",null),at(this,"getPolarAngle",void 0),at(this,"getAzimuthalAngle",void 0),at(this,"setPolarAngle",void 0),at(this,"setAzimuthalAngle",void 0),at(this,"getDistance",void 0),at(this,"listenToKeyEvents",void 0),at(this,"saveState",void 0),at(this,"reset",void 0),at(this,"update",void 0),at(this,"connect",void 0),at(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Gt?this.object.zoom:1,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=Y=>{let ve=AE(Y,2*Math.PI),Te=d.phi;Te<0&&(Te+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let De=Math.abs(ve-Te);2*Math.PI-De<De&&(ve<Te?ve+=2*Math.PI:Te+=2*Math.PI),h.phi=ve-Te,i.update()},this.setAzimuthalAngle=Y=>{let ve=AE(Y,2*Math.PI),Te=d.theta;Te<0&&(Te+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let De=Math.abs(ve-Te);2*Math.PI-De<De&&(ve<Te?ve+=2*Math.PI:Te+=2*Math.PI),h.theta=ve-Te,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Y=>{Y.addEventListener("keydown",Z),this._domElementKeyEvents=Y},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Gt?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Gt&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),c=a.NONE},this.update=(()=>{const Y=new N,ve=new ti().setFromUnitVectors(e.up,new N(0,1,0)),Te=ve.clone().invert(),De=new N,Qe=new ti,ct=2*Math.PI;return function(){const $=i.object.position;Y.copy($).sub(i.target),Y.applyQuaternion(ve),d.setFromVector3(Y),i.autoRotate&&c===a.NONE&&K(L()),i.enableDamping?(d.theta+=h.theta*i.dampingFactor,d.phi+=h.phi*i.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let pe=i.minAzimuthAngle,Ae=i.maxAzimuthAngle;return isFinite(pe)&&isFinite(Ae)&&(pe<-Math.PI?pe+=ct:pe>Math.PI&&(pe-=ct),Ae<-Math.PI?Ae+=ct:Ae>Math.PI&&(Ae-=ct),pe<=Ae?d.theta=Math.max(pe,Math.min(Ae,d.theta)):d.theta=d.theta>(pe+Ae)/2?Math.max(pe,d.theta):Math.min(Ae,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=m,d.radius=Math.max(i.minDistance,Math.min(i.maxDistance,d.radius)),i.enableDamping===!0?i.target.addScaledVector(v,i.dampingFactor):i.target.add(v),Y.setFromSpherical(d),Y.applyQuaternion(Te),$.copy(i.target).add(Y),i.object.lookAt(i.target),i.enableDamping===!0?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor,v.multiplyScalar(1-i.dampingFactor)):(h.set(0,0,0),v.set(0,0,0)),m=1,_||De.distanceToSquared(i.object.position)>f||8*(1-Qe.dot(i.object.quaternion))>f?(i.dispatchEvent(r),De.copy(i.object.position),Qe.copy(i.object.quaternion),_=!1,!0):!1}})(),this.connect=Y=>{Y===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=Y,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ie),i.domElement.addEventListener("pointerdown",Re),i.domElement.addEventListener("pointercancel",We),i.domElement.addEventListener("wheel",U)},this.dispose=()=>{var Y,ve,Te,De,Qe,ct;(Y=i.domElement)===null||Y===void 0||Y.removeEventListener("contextmenu",Ie),(ve=i.domElement)===null||ve===void 0||ve.removeEventListener("pointerdown",Re),(Te=i.domElement)===null||Te===void 0||Te.removeEventListener("pointercancel",We),(De=i.domElement)===null||De===void 0||De.removeEventListener("wheel",U),(Qe=i.domElement)===null||Qe===void 0||Qe.ownerDocument.removeEventListener("pointermove",ke),(ct=i.domElement)===null||ct===void 0||ct.ownerDocument.removeEventListener("pointerup",Ge),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Z)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const f=1e-6,d=new zy,h=new zy;let m=1;const v=new N;let _=!1;const w=new Ee,M=new Ee,g=new Ee,x=new Ee,S=new Ee,T=new Ee,C=new Ee,P=new Ee,R=new Ee,I=[],b={};function L(){return 2*Math.PI/60/60*i.autoRotateSpeed}function G(){return Math.pow(.95,i.zoomSpeed)}function K(Y){i.reverseOrbit?h.theta+=Y:h.theta-=Y}function q(Y){i.reverseOrbit?h.phi+=Y:h.phi-=Y}const te=(()=>{const Y=new N;return function(Te,De){Y.setFromMatrixColumn(De,0),Y.multiplyScalar(-Te),v.add(Y)}})(),Q=(()=>{const Y=new N;return function(Te,De){i.screenSpacePanning===!0?Y.setFromMatrixColumn(De,1):(Y.setFromMatrixColumn(De,0),Y.crossVectors(i.object.up,Y)),Y.multiplyScalar(Te),v.add(Y)}})(),ue=(()=>{const Y=new N;return function(Te,De){const Qe=i.domElement;if(Qe&&i.object instanceof Gt&&i.object.isPerspectiveCamera){const ct=i.object.position;Y.copy(ct).sub(i.target);let Ft=Y.length();Ft*=Math.tan(i.object.fov/2*Math.PI/180),te(2*Te*Ft/Qe.clientHeight,i.object.matrix),Q(2*De*Ft/Qe.clientHeight,i.object.matrix)}else Qe&&i.object instanceof es&&i.object.isOrthographicCamera?(te(Te*(i.object.right-i.object.left)/i.object.zoom/Qe.clientWidth,i.object.matrix),Q(De*(i.object.top-i.object.bottom)/i.object.zoom/Qe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function ne(Y){i.object instanceof Gt&&i.object.isPerspectiveCamera?m/=Y:i.object instanceof es&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Y)),i.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function D(Y){i.object instanceof Gt&&i.object.isPerspectiveCamera?m*=Y:i.object instanceof es&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Y)),i.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(Y){w.set(Y.clientX,Y.clientY)}function z(Y){C.set(Y.clientX,Y.clientY)}function oe(Y){x.set(Y.clientX,Y.clientY)}function W(Y){M.set(Y.clientX,Y.clientY),g.subVectors(M,w).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(K(2*Math.PI*g.x/ve.clientHeight),q(2*Math.PI*g.y/ve.clientHeight)),w.copy(M),i.update()}function X(Y){P.set(Y.clientX,Y.clientY),R.subVectors(P,C),R.y>0?ne(G()):R.y<0&&D(G()),C.copy(P),i.update()}function j(Y){S.set(Y.clientX,Y.clientY),T.subVectors(S,x).multiplyScalar(i.panSpeed),ue(T.x,T.y),x.copy(S),i.update()}function ce(Y){Y.deltaY<0?D(G()):Y.deltaY>0&&ne(G()),i.update()}function V(Y){let ve=!1;switch(Y.code){case i.keys.UP:ue(0,i.keyPanSpeed),ve=!0;break;case i.keys.BOTTOM:ue(0,-i.keyPanSpeed),ve=!0;break;case i.keys.LEFT:ue(i.keyPanSpeed,0),ve=!0;break;case i.keys.RIGHT:ue(-i.keyPanSpeed,0),ve=!0;break}ve&&(Y.preventDefault(),i.update())}function B(){if(I.length==1)w.set(I[0].pageX,I[0].pageY);else{const Y=.5*(I[0].pageX+I[1].pageX),ve=.5*(I[0].pageY+I[1].pageY);w.set(Y,ve)}}function de(){if(I.length==1)x.set(I[0].pageX,I[0].pageY);else{const Y=.5*(I[0].pageX+I[1].pageX),ve=.5*(I[0].pageY+I[1].pageY);x.set(Y,ve)}}function Oe(){const Y=I[0].pageX-I[1].pageX,ve=I[0].pageY-I[1].pageY,Te=Math.sqrt(Y*Y+ve*ve);C.set(0,Te)}function fe(){i.enableZoom&&Oe(),i.enablePan&&de()}function ye(){i.enableZoom&&Oe(),i.enableRotate&&B()}function se(Y){if(I.length==1)M.set(Y.pageX,Y.pageY);else{const Te=Ye(Y),De=.5*(Y.pageX+Te.x),Qe=.5*(Y.pageY+Te.y);M.set(De,Qe)}g.subVectors(M,w).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(K(2*Math.PI*g.x/ve.clientHeight),q(2*Math.PI*g.y/ve.clientHeight)),w.copy(M)}function ie(Y){if(I.length==1)S.set(Y.pageX,Y.pageY);else{const ve=Ye(Y),Te=.5*(Y.pageX+ve.x),De=.5*(Y.pageY+ve.y);S.set(Te,De)}T.subVectors(S,x).multiplyScalar(i.panSpeed),ue(T.x,T.y),x.copy(S)}function _e(Y){const ve=Ye(Y),Te=Y.pageX-ve.x,De=Y.pageY-ve.y,Qe=Math.sqrt(Te*Te+De*De);P.set(0,Qe),R.set(0,Math.pow(P.y/C.y,i.zoomSpeed)),ne(R.y),C.copy(P)}function Ce(Y){i.enableZoom&&_e(Y),i.enablePan&&ie(Y)}function Pe(Y){i.enableZoom&&_e(Y),i.enableRotate&&se(Y)}function Re(Y){if(i.enabled!==!1){if(I.length===0){var ve,Te;(ve=i.domElement)===null||ve===void 0||ve.ownerDocument.addEventListener("pointermove",ke),(Te=i.domElement)===null||Te===void 0||Te.ownerDocument.addEventListener("pointerup",Ge)}$e(Y),Y.pointerType==="touch"?Me(Y):rt(Y)}}function ke(Y){i.enabled!==!1&&(Y.pointerType==="touch"?be(Y):k(Y))}function Ge(Y){if(Be(Y),I.length===0){var ve,Te,De;(ve=i.domElement)===null||ve===void 0||ve.releasePointerCapture(Y.pointerId),(Te=i.domElement)===null||Te===void 0||Te.ownerDocument.removeEventListener("pointermove",ke),(De=i.domElement)===null||De===void 0||De.ownerDocument.removeEventListener("pointerup",Ge)}i.dispatchEvent(o),c=a.NONE}function We(Y){Be(Y)}function rt(Y){let ve;switch(Y.button){case 0:ve=i.mouseButtons.LEFT;break;case 1:ve=i.mouseButtons.MIDDLE;break;case 2:ve=i.mouseButtons.RIGHT;break;default:ve=-1}switch(ve){case ta.DOLLY:if(i.enableZoom===!1)return;z(Y),c=a.DOLLY;break;case ta.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(i.enablePan===!1)return;oe(Y),c=a.PAN}else{if(i.enableRotate===!1)return;H(Y),c=a.ROTATE}break;case ta.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(i.enableRotate===!1)return;H(Y),c=a.ROTATE}else{if(i.enablePan===!1)return;oe(Y),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&i.dispatchEvent(s)}function k(Y){if(i.enabled!==!1)switch(c){case a.ROTATE:if(i.enableRotate===!1)return;W(Y);break;case a.DOLLY:if(i.enableZoom===!1)return;X(Y);break;case a.PAN:if(i.enablePan===!1)return;j(Y);break}}function U(Y){i.enabled===!1||i.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(Y.preventDefault(),i.dispatchEvent(s),ce(Y),i.dispatchEvent(o))}function Z(Y){i.enabled===!1||i.enablePan===!1||V(Y)}function Me(Y){switch(xe(Y),I.length){case 1:switch(i.touches.ONE){case na.ROTATE:if(i.enableRotate===!1)return;B(),c=a.TOUCH_ROTATE;break;case na.PAN:if(i.enablePan===!1)return;de(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(i.touches.TWO){case na.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;fe(),c=a.TOUCH_DOLLY_PAN;break;case na.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ye(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&i.dispatchEvent(s)}function be(Y){switch(xe(Y),c){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;se(Y),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;ie(Y),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ce(Y),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Pe(Y),i.update();break;default:c=a.NONE}}function Ie(Y){i.enabled!==!1&&Y.preventDefault()}function $e(Y){I.push(Y)}function Be(Y){delete b[Y.pointerId];for(let ve=0;ve<I.length;ve++)if(I[ve].pointerId==Y.pointerId){I.splice(ve,1);return}}function xe(Y){let ve=b[Y.pointerId];ve===void 0&&(ve=new Ee,b[Y.pointerId]=ve),ve.set(Y.pageX,Y.pageY)}function Ye(Y){const ve=Y.pointerId===I[0].pointerId?I[1]:I[0];return b[ve.pointerId]}t!==void 0&&this.connect(t),this.update()}};const CE=new Wi,Bh=new N;class Fx extends bx{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new qe(e,3)),this.setAttribute("uv",new qe(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Hp(t,6,1);return this.setAttribute("instanceStart",new Fi(i,3,0)),this.setAttribute("instanceEnd",new Fi(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Hp(t,6,1);return this.setAttribute("instanceColorStart",new Fi(i,3,0)),this.setAttribute("instanceColorEnd",new Fi(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new yx(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),CE.setFromBufferAttribute(t),this.boundingBox.union(CE))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Bh.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Bh)),Bh.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(Bh));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class C2 extends Fx{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Ue.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ee(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ci.line={uniforms:mm.merge([Ue.common,Ue.fog,Ue.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class zx extends Nr{constructor(e){super({type:"LineMaterial",uniforms:mm.clone(ci.line.uniforms),vertexShader:ci.line.vertexShader,fragmentShader:ci.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const bE=new N,PE=new N,On=new At,kn=new At,jr=new At,iv=new N,rv=new ut,Kn=new r2,RE=new N,Hh=new Wi,Vh=new fr,Yr=new At;let Kr,Wy,b2,xa;function LE(n,e,t){return Yr.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Yr.multiplyScalar(1/Yr.w),Yr.x=xa/t.width,Yr.y=xa/t.height,Yr.applyMatrix4(n.projectionMatrixInverse),Yr.multiplyScalar(1/Yr.w),Math.abs(Math.max(Yr.x,Yr.y))}function dB(n,e){for(let t=0,i=Wy.count;t<i;t++){Kn.start.fromBufferAttribute(Wy,t),Kn.end.fromBufferAttribute(b2,t);const r=new N,s=new N;Kr.distanceSqToSegment(Kn.start,Kn.end,s,r),s.distanceTo(r)<xa*.5&&e.push({point:s,pointOnLine:r,distance:Kr.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function hB(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,c=a.attributes.instanceStart,f=a.attributes.instanceEnd,d=-e.near;Kr.at(1,jr),jr.w=1,jr.applyMatrix4(e.matrixWorldInverse),jr.applyMatrix4(i),jr.multiplyScalar(1/jr.w),jr.x*=s.x/2,jr.y*=s.y/2,jr.z=0,iv.copy(jr),rv.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,m=c.count;h<m;h++){if(On.fromBufferAttribute(c,h),kn.fromBufferAttribute(f,h),On.w=1,kn.w=1,On.applyMatrix4(rv),kn.applyMatrix4(rv),On.z>d&&kn.z>d)continue;if(On.z>d){const x=On.z-kn.z,S=(On.z-d)/x;On.lerp(kn,S)}else if(kn.z>d){const x=kn.z-On.z,S=(kn.z-d)/x;kn.lerp(On,S)}On.applyMatrix4(i),kn.applyMatrix4(i),On.multiplyScalar(1/On.w),kn.multiplyScalar(1/kn.w),On.x*=s.x/2,On.y*=s.y/2,kn.x*=s.x/2,kn.y*=s.y/2,Kn.start.copy(On),Kn.start.z=0,Kn.end.copy(kn),Kn.end.z=0;const _=Kn.closestPointToPointParameter(iv,!0);Kn.at(_,RE);const w=ib.lerp(On.z,kn.z,_),M=w>=-1&&w<=1,g=iv.distanceTo(RE)<xa*.5;if(M&&g){Kn.start.fromBufferAttribute(c,h),Kn.end.fromBufferAttribute(f,h),Kn.start.applyMatrix4(o),Kn.end.applyMatrix4(o);const x=new N,S=new N;Kr.distanceSqToSegment(Kn.start,Kn.end,S,x),t.push({point:S,pointOnLine:x,distance:Kr.origin.distanceTo(S),object:n,face:null,faceIndex:h,uv:null,uv2:null})}}}class P2 extends Rn{constructor(e=new Fx,t=new zx({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,c=t.count;o<c;o++,a+=2)bE.fromBufferAttribute(t,o),PE.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+bE.distanceTo(PE);const s=new Hp(r,2,1);return e.setAttribute("instanceDistanceStart",new Fi(s,1,0)),e.setAttribute("instanceDistanceEnd",new Fi(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Kr=e.ray;const o=this.matrixWorld,a=this.geometry,c=this.material;xa=c.linewidth+s,Wy=a.attributes.instanceStart,b2=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Vh.copy(a.boundingSphere).applyMatrix4(o);let f;if(i)f=xa*.5;else{const h=Math.max(r.near,Vh.distanceToPoint(Kr.origin));f=LE(r,h,c.resolution)}if(Vh.radius+=f,Kr.intersectsSphere(Vh)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Hh.copy(a.boundingBox).applyMatrix4(o);let d;if(i)d=xa*.5;else{const h=Math.max(r.near,Hh.distanceToPoint(Kr.origin));d=LE(r,h,c.resolution)}Hh.expandByScalar(d),Kr.intersectsBox(Hh)!==!1&&(i?dB(this,t):hB(this,r,t))}}class pB extends P2{constructor(e=new C2,t=new zx({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const mB=me.forwardRef(({children:n,depth:e=-1,...t},i)=>{const r=me.useRef(null);return Ux(({camera:s})=>{r.current.quaternion.copy(s.quaternion),r.current.position.copy(s.position)}),me.createElement("group",ns({ref:lB([i,r])},t),me.createElement("group",{"position-z":-e},n))}),gB=me.forwardRef(function({points:e,color:t="black",vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...c},f){const d=$r(_=>_.size),h=me.useMemo(()=>o?new P2:new pB,[o]),[m]=me.useState(()=>new zx),v=me.useMemo(()=>{const _=o?new Fx:new C2,w=e.map(M=>{const g=Array.isArray(M);return M instanceof N?[M.x,M.y,M.z]:M instanceof Ee?[M.x,M.y,0]:g&&M.length===3?[M[0],M[1],M[2]]:g&&M.length===2?[M[0],M[1],0]:M});if(_.setPositions(w.flat()),i){const M=i.map(g=>g instanceof Ve?g.toArray():g);_.setColors(M.flat())}return _},[e,o,i]);return me.useLayoutEffect(()=>{h.computeLineDistances()},[e,h]),me.useLayoutEffect(()=>{a?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0},[a,m]),me.useEffect(()=>()=>v.dispose(),[v]),me.createElement("primitive",ns({object:h,ref:f},c),me.createElement("primitive",{object:v,attach:"geometry"}),me.createElement("primitive",ns({object:m,attach:"material",color:t,vertexColors:!!i,resolution:[d.width,d.height],linewidth:r??s,dashed:a},c)))}),vB=me.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:a,...c},f)=>{const d=$r(C=>C.invalidate),h=$r(C=>C.camera),m=$r(C=>C.gl),v=$r(C=>C.events),_=$r(C=>C.setEvents),w=$r(C=>C.set),M=$r(C=>C.get),g=$r(C=>C.performance),x=e||h,S=i||v.connected||m.domElement,T=me.useMemo(()=>new fB(x),[x]);return Ux(()=>{T.enabled&&T.update()},-1),me.useEffect(()=>(T.connect(S),()=>void T.dispose()),[S,t,T,d]),me.useEffect(()=>{const C=I=>{d(),t&&g.regress(),s&&s(I)},P=I=>{o&&o(I)},R=I=>{a&&a(I)};return T.addEventListener("change",C),T.addEventListener("start",P),T.addEventListener("end",R),()=>{T.removeEventListener("start",P),T.removeEventListener("end",R),T.removeEventListener("change",C)}},[s,o,a,T,d,_]),me.useEffect(()=>{if(n){const C=M().controls;return w({controls:T}),()=>w({controls:C})}},[n,T]),me.createElement("primitive",ns({ref:f,object:T,enableDamping:r},c))});function yB(n,e){const t=n+"Geometry";return me.forwardRef(({args:i,children:r,...s},o)=>{const a=me.useRef(null);return me.useImperativeHandle(o,()=>a.current),me.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),me.createElement("mesh",ns({ref:a},s),me.createElement(t,{attach:"geometry",args:i}),r)})}const _B=yB("box"),xB=new ii({wireframe:!0,color:"rgb(99,99,99)"}),SB=new ii({wireframe:!0,color:"rgb(255, 0, 136)"});new Sx({color:"white"});const MB=new ii({wireframe:!0,color:"rgb(26,255,0)"}),wB=new ii({wireframe:!0,color:"rgb(114,100,21)"}),EB=new ii({wireframe:!0,color:"rgb(221,255,0)"}),TB=new ii({wireframe:!0,color:"rgb(255,92,203)"}),AB=new ii({wireframe:!0,color:"white"}),CB=new ii({wireframe:!0,color:"rgb(255,255,0)"}),uf=n=>{const{position:e,rotation:t,deselectAllNodes:i,selectNode:r,deselectAllPlants:s,selectPlant:o,isSelected:a,cylinderArgs:c,defaultMaterial:f}=n,d=me.useRef(null),[h,m]=me.useState(!1);return lt.jsx("mesh",{ref:d,scale:1,position:e,rotation:new du(t.x,t.y,t.z),material:a?AB:h?CB:f,geometry:new Do(...c),onPointerEnter:v=>{v.stopPropagation(),m(!0)},onPointerLeave:v=>{v.stopPropagation(),m(!1)},onPointerMissed:v=>{v.stopPropagation(),a&&s(),a&&i()},onPointerDown:v=>{v.stopPropagation(),o(),r()}})};var R2={exports:{}},kt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=typeof Symbol=="function"&&Symbol.for,Bx=In?Symbol.for("react.element"):60103,Hx=In?Symbol.for("react.portal"):60106,Cm=In?Symbol.for("react.fragment"):60107,bm=In?Symbol.for("react.strict_mode"):60108,Pm=In?Symbol.for("react.profiler"):60114,Rm=In?Symbol.for("react.provider"):60109,Lm=In?Symbol.for("react.context"):60110,Vx=In?Symbol.for("react.async_mode"):60111,Im=In?Symbol.for("react.concurrent_mode"):60111,Dm=In?Symbol.for("react.forward_ref"):60112,Nm=In?Symbol.for("react.suspense"):60113,bB=In?Symbol.for("react.suspense_list"):60120,Um=In?Symbol.for("react.memo"):60115,Om=In?Symbol.for("react.lazy"):60116,PB=In?Symbol.for("react.block"):60121,RB=In?Symbol.for("react.fundamental"):60117,LB=In?Symbol.for("react.responder"):60118,IB=In?Symbol.for("react.scope"):60119;function ji(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case Bx:switch(n=n.type,n){case Vx:case Im:case Cm:case Pm:case bm:case Nm:return n;default:switch(n=n&&n.$$typeof,n){case Lm:case Dm:case Om:case Um:case Rm:return n;default:return e}}case Hx:return e}}}function L2(n){return ji(n)===Im}kt.AsyncMode=Vx;kt.ConcurrentMode=Im;kt.ContextConsumer=Lm;kt.ContextProvider=Rm;kt.Element=Bx;kt.ForwardRef=Dm;kt.Fragment=Cm;kt.Lazy=Om;kt.Memo=Um;kt.Portal=Hx;kt.Profiler=Pm;kt.StrictMode=bm;kt.Suspense=Nm;kt.isAsyncMode=function(n){return L2(n)||ji(n)===Vx};kt.isConcurrentMode=L2;kt.isContextConsumer=function(n){return ji(n)===Lm};kt.isContextProvider=function(n){return ji(n)===Rm};kt.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===Bx};kt.isForwardRef=function(n){return ji(n)===Dm};kt.isFragment=function(n){return ji(n)===Cm};kt.isLazy=function(n){return ji(n)===Om};kt.isMemo=function(n){return ji(n)===Um};kt.isPortal=function(n){return ji(n)===Hx};kt.isProfiler=function(n){return ji(n)===Pm};kt.isStrictMode=function(n){return ji(n)===bm};kt.isSuspense=function(n){return ji(n)===Nm};kt.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Cm||n===Im||n===Pm||n===bm||n===Nm||n===bB||typeof n=="object"&&n!==null&&(n.$$typeof===Om||n.$$typeof===Um||n.$$typeof===Rm||n.$$typeof===Lm||n.$$typeof===Dm||n.$$typeof===RB||n.$$typeof===LB||n.$$typeof===IB||n.$$typeof===PB)};kt.typeOf=ji;R2.exports=kt;var Gx=R2.exports;function DB(n){function e(W,X,j,ce,V){for(var B=0,de=0,Oe=0,fe=0,ye,se,ie=0,_e=0,Ce,Pe=Ce=ye=0,Re=0,ke=0,Ge=0,We=0,rt=j.length,k=rt-1,U,Z="",Me="",be="",Ie="",$e;Re<rt;){if(se=j.charCodeAt(Re),Re===k&&de+fe+Oe+B!==0&&(de!==0&&(se=de===47?10:47),fe=Oe=B=0,rt++,k++),de+fe+Oe+B===0){if(Re===k&&(0<ke&&(Z=Z.replace(m,"")),0<Z.trim().length)){switch(se){case 32:case 9:case 59:case 13:case 10:break;default:Z+=j.charAt(Re)}se=59}switch(se){case 123:for(Z=Z.trim(),ye=Z.charCodeAt(0),Ce=1,We=++Re;Re<rt;){switch(se=j.charCodeAt(Re)){case 123:Ce++;break;case 125:Ce--;break;case 47:switch(se=j.charCodeAt(Re+1)){case 42:case 47:e:{for(Pe=Re+1;Pe<k;++Pe)switch(j.charCodeAt(Pe)){case 47:if(se===42&&j.charCodeAt(Pe-1)===42&&Re+2!==Pe){Re=Pe+1;break e}break;case 10:if(se===47){Re=Pe+1;break e}}Re=Pe}}break;case 91:se++;case 40:se++;case 34:case 39:for(;Re++<k&&j.charCodeAt(Re)!==se;);}if(Ce===0)break;Re++}switch(Ce=j.substring(We,Re),ye===0&&(ye=(Z=Z.replace(h,"").trim()).charCodeAt(0)),ye){case 64:switch(0<ke&&(Z=Z.replace(m,"")),se=Z.charCodeAt(1),se){case 100:case 109:case 115:case 45:ke=X;break;default:ke=ue}if(Ce=e(X,ke,Ce,se,V+1),We=Ce.length,0<D&&(ke=t(ue,Z,Ge),$e=a(3,Ce,ke,X,q,K,We,se,V,ce),Z=ke.join(""),$e!==void 0&&(We=(Ce=$e.trim()).length)===0&&(se=0,Ce="")),0<We)switch(se){case 115:Z=Z.replace(P,o);case 100:case 109:case 45:Ce=Z+"{"+Ce+"}";break;case 107:Z=Z.replace(x,"$1 $2"),Ce=Z+"{"+Ce+"}",Ce=Q===1||Q===2&&s("@"+Ce,3)?"@-webkit-"+Ce+"@"+Ce:"@"+Ce;break;default:Ce=Z+Ce,ce===112&&(Ce=(Me+=Ce,""))}else Ce="";break;default:Ce=e(X,t(X,Z,Ge),Ce,ce,V+1)}be+=Ce,Ce=Ge=ke=Pe=ye=0,Z="",se=j.charCodeAt(++Re);break;case 125:case 59:if(Z=(0<ke?Z.replace(m,""):Z).trim(),1<(We=Z.length))switch(Pe===0&&(ye=Z.charCodeAt(0),ye===45||96<ye&&123>ye)&&(We=(Z=Z.replace(" ",":")).length),0<D&&($e=a(1,Z,X,W,q,K,Me.length,ce,V,ce))!==void 0&&(We=(Z=$e.trim()).length)===0&&(Z="\0\0"),ye=Z.charCodeAt(0),se=Z.charCodeAt(1),ye){case 0:break;case 64:if(se===105||se===99){Ie+=Z+j.charAt(Re);break}default:Z.charCodeAt(We-1)!==58&&(Me+=r(Z,ye,se,Z.charCodeAt(2)))}Ge=ke=Pe=ye=0,Z="",se=j.charCodeAt(++Re)}}switch(se){case 13:case 10:de===47?de=0:1+ye===0&&ce!==107&&0<Z.length&&(ke=1,Z+="\0"),0<D*z&&a(0,Z,X,W,q,K,Me.length,ce,V,ce),K=1,q++;break;case 59:case 125:if(de+fe+Oe+B===0){K++;break}default:switch(K++,U=j.charAt(Re),se){case 9:case 32:if(fe+B+de===0)switch(ie){case 44:case 58:case 9:case 32:U="";break;default:se!==32&&(U=" ")}break;case 0:U="\\0";break;case 12:U="\\f";break;case 11:U="\\v";break;case 38:fe+de+B===0&&(ke=Ge=1,U="\f"+U);break;case 108:if(fe+de+B+te===0&&0<Pe)switch(Re-Pe){case 2:ie===112&&j.charCodeAt(Re-3)===58&&(te=ie);case 8:_e===111&&(te=_e)}break;case 58:fe+de+B===0&&(Pe=Re);break;case 44:de+Oe+fe+B===0&&(ke=1,U+="\r");break;case 34:case 39:de===0&&(fe=fe===se?0:fe===0?se:fe);break;case 91:fe+de+Oe===0&&B++;break;case 93:fe+de+Oe===0&&B--;break;case 41:fe+de+B===0&&Oe--;break;case 40:if(fe+de+B===0){if(ye===0)switch(2*ie+3*_e){case 533:break;default:ye=1}Oe++}break;case 64:de+Oe+fe+B+Pe+Ce===0&&(Ce=1);break;case 42:case 47:if(!(0<fe+B+Oe))switch(de){case 0:switch(2*se+3*j.charCodeAt(Re+1)){case 235:de=47;break;case 220:We=Re,de=42}break;case 42:se===47&&ie===42&&We+2!==Re&&(j.charCodeAt(We+2)===33&&(Me+=j.substring(We,Re+1)),U="",de=0)}}de===0&&(Z+=U)}_e=ie,ie=se,Re++}if(We=Me.length,0<We){if(ke=X,0<D&&($e=a(2,Me,ke,W,q,K,We,ce,V,ce),$e!==void 0&&(Me=$e).length===0))return Ie+Me+be;if(Me=ke.join(",")+"{"+Me+"}",Q*te!==0){switch(Q!==2||s(Me,2)||(te=0),te){case 111:Me=Me.replace(T,":-moz-$1")+Me;break;case 112:Me=Me.replace(S,"::-webkit-input-$1")+Me.replace(S,"::-moz-$1")+Me.replace(S,":-ms-input-$1")+Me}te=0}}return Ie+Me+be}function t(W,X,j){var ce=X.trim().split(M);X=ce;var V=ce.length,B=W.length;switch(B){case 0:case 1:var de=0;for(W=B===0?"":W[0]+" ";de<V;++de)X[de]=i(W,X[de],j).trim();break;default:var Oe=de=0;for(X=[];de<V;++de)for(var fe=0;fe<B;++fe)X[Oe++]=i(W[fe]+" ",ce[de],j).trim()}return X}function i(W,X,j){var ce=X.charCodeAt(0);switch(33>ce&&(ce=(X=X.trim()).charCodeAt(0)),ce){case 38:return X.replace(g,"$1"+W.trim());case 58:return W.trim()+X.replace(g,"$1"+W.trim());default:if(0<1*j&&0<X.indexOf("\f"))return X.replace(g,(W.charCodeAt(0)===58?"":"$1")+W.trim())}return W+X}function r(W,X,j,ce){var V=W+";",B=2*X+3*j+4*ce;if(B===944){W=V.indexOf(":",9)+1;var de=V.substring(W,V.length-1).trim();return de=V.substring(0,W).trim()+de+";",Q===1||Q===2&&s(de,1)?"-webkit-"+de+de:de}if(Q===0||Q===2&&!s(V,1))return V;switch(B){case 1015:return V.charCodeAt(10)===97?"-webkit-"+V+V:V;case 951:return V.charCodeAt(3)===116?"-webkit-"+V+V:V;case 963:return V.charCodeAt(5)===110?"-webkit-"+V+V:V;case 1009:if(V.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+V+V;case 978:return"-webkit-"+V+"-moz-"+V+V;case 1019:case 983:return"-webkit-"+V+"-moz-"+V+"-ms-"+V+V;case 883:if(V.charCodeAt(8)===45)return"-webkit-"+V+V;if(0<V.indexOf("image-set(",11))return V.replace(G,"$1-webkit-$2")+V;break;case 932:if(V.charCodeAt(4)===45)switch(V.charCodeAt(5)){case 103:return"-webkit-box-"+V.replace("-grow","")+"-webkit-"+V+"-ms-"+V.replace("grow","positive")+V;case 115:return"-webkit-"+V+"-ms-"+V.replace("shrink","negative")+V;case 98:return"-webkit-"+V+"-ms-"+V.replace("basis","preferred-size")+V}return"-webkit-"+V+"-ms-"+V+V;case 964:return"-webkit-"+V+"-ms-flex-"+V+V;case 1023:if(V.charCodeAt(8)!==99)break;return de=V.substring(V.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+de+"-webkit-"+V+"-ms-flex-pack"+de+V;case 1005:return _.test(V)?V.replace(v,":-webkit-")+V.replace(v,":-moz-")+V:V;case 1e3:switch(de=V.substring(13).trim(),X=de.indexOf("-")+1,de.charCodeAt(0)+de.charCodeAt(X)){case 226:de=V.replace(C,"tb");break;case 232:de=V.replace(C,"tb-rl");break;case 220:de=V.replace(C,"lr");break;default:return V}return"-webkit-"+V+"-ms-"+de+V;case 1017:if(V.indexOf("sticky",9)===-1)break;case 975:switch(X=(V=W).length-10,de=(V.charCodeAt(X)===33?V.substring(0,X):V).substring(W.indexOf(":",7)+1).trim(),B=de.charCodeAt(0)+(de.charCodeAt(7)|0)){case 203:if(111>de.charCodeAt(8))break;case 115:V=V.replace(de,"-webkit-"+de)+";"+V;break;case 207:case 102:V=V.replace(de,"-webkit-"+(102<B?"inline-":"")+"box")+";"+V.replace(de,"-webkit-"+de)+";"+V.replace(de,"-ms-"+de+"box")+";"+V}return V+";";case 938:if(V.charCodeAt(5)===45)switch(V.charCodeAt(6)){case 105:return de=V.replace("-items",""),"-webkit-"+V+"-webkit-box-"+de+"-ms-flex-"+de+V;case 115:return"-webkit-"+V+"-ms-flex-item-"+V.replace(I,"")+V;default:return"-webkit-"+V+"-ms-flex-line-pack"+V.replace("align-content","").replace(I,"")+V}break;case 973:case 989:if(V.charCodeAt(3)!==45||V.charCodeAt(4)===122)break;case 931:case 953:if(L.test(W)===!0)return(de=W.substring(W.indexOf(":")+1)).charCodeAt(0)===115?r(W.replace("stretch","fill-available"),X,j,ce).replace(":fill-available",":stretch"):V.replace(de,"-webkit-"+de)+V.replace(de,"-moz-"+de.replace("fill-",""))+V;break;case 962:if(V="-webkit-"+V+(V.charCodeAt(5)===102?"-ms-"+V:"")+V,j+ce===211&&V.charCodeAt(13)===105&&0<V.indexOf("transform",10))return V.substring(0,V.indexOf(";",27)+1).replace(w,"$1-webkit-$2")+V}return V}function s(W,X){var j=W.indexOf(X===1?":":"{"),ce=W.substring(0,X!==3?j:10);return j=W.substring(j+1,W.length-1),H(X!==2?ce:ce.replace(b,"$1"),j,X)}function o(W,X){var j=r(X,X.charCodeAt(0),X.charCodeAt(1),X.charCodeAt(2));return j!==X+";"?j.replace(R," or ($1)").substring(4):"("+X+")"}function a(W,X,j,ce,V,B,de,Oe,fe,ye){for(var se=0,ie=X,_e;se<D;++se)switch(_e=ne[se].call(d,W,ie,j,ce,V,B,de,Oe,fe,ye)){case void 0:case!1:case!0:case null:break;default:ie=_e}if(ie!==X)return ie}function c(W){switch(W){case void 0:case null:D=ne.length=0;break;default:if(typeof W=="function")ne[D++]=W;else if(typeof W=="object")for(var X=0,j=W.length;X<j;++X)c(W[X]);else z=!!W|0}return c}function f(W){return W=W.prefix,W!==void 0&&(H=null,W?typeof W!="function"?Q=1:(Q=2,H=W):Q=0),f}function d(W,X){var j=W;if(33>j.charCodeAt(0)&&(j=j.trim()),oe=j,j=[oe],0<D){var ce=a(-1,X,j,j,q,K,0,0,0,0);ce!==void 0&&typeof ce=="string"&&(X=ce)}var V=e(ue,j,X,0,0);return 0<D&&(ce=a(-2,V,j,j,q,K,V.length,0,0,0),ce!==void 0&&(V=ce)),oe="",te=0,K=q=1,V}var h=/^\0+/g,m=/[\0\r\f]/g,v=/: */g,_=/zoo|gra/,w=/([,: ])(transform)/g,M=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,x=/@(k\w+)\s*(\S*)\s*/,S=/::(place)/g,T=/:(read-only)/g,C=/[svh]\w+-[tblr]{2}/,P=/\(\s*(.*)\s*\)/g,R=/([\s\S]*?);/g,I=/-self|flex-/g,b=/[^]*?(:[rp][el]a[\w-]+)[^]*/,L=/stretch|:\s*\w+\-(?:conte|avail)/,G=/([^-])(image-set\()/,K=1,q=1,te=0,Q=1,ue=[],ne=[],D=0,H=null,z=0,oe="";return d.use=c,d.set=f,n!==void 0&&f(n),d}var NB={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function UB(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var OB=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IE=UB(function(n){return OB.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Wx=Gx,kB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},FB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},I2={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Xx={};Xx[Wx.ForwardRef]=zB;Xx[Wx.Memo]=I2;function DE(n){return Wx.isMemo(n)?I2:Xx[n.$$typeof]||kB}var BB=Object.defineProperty,HB=Object.getOwnPropertyNames,NE=Object.getOwnPropertySymbols,VB=Object.getOwnPropertyDescriptor,GB=Object.getPrototypeOf,UE=Object.prototype;function D2(n,e,t){if(typeof e!="string"){if(UE){var i=GB(e);i&&i!==UE&&D2(n,i,t)}var r=HB(e);NE&&(r=r.concat(NE(e)));for(var s=DE(n),o=DE(e),a=0;a<r.length;++a){var c=r[a];if(!FB[c]&&!(t&&t[c])&&!(o&&o[c])&&!(s&&s[c])){var f=VB(e,c);try{BB(n,c,f)}catch{}}}}return n}var WB=D2;const XB=Yp(WB);function Ts(){return(Ts=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}var OE=function(n,e){for(var t=[n[0]],i=0,r=e.length;i<r;i+=1)t.push(e[i],n[i+1]);return t},Xy=function(n){return n!==null&&typeof n=="object"&&(n.toString?n.toString():Object.prototype.toString.call(n))==="[object Object]"&&!Gx.typeOf(n)},Gp=Object.freeze([]),So=Object.freeze({});function cf(n){return typeof n=="function"}function kE(n){return n.displayName||n.name||"Component"}function jx(n){return n&&typeof n.styledComponentId=="string"}var ou=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Yx=typeof window<"u"&&"HTMLElement"in window,jB=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY));function Of(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+n+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var YB=function(){function n(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=n.prototype;return e.indexOfGroup=function(t){for(var i=0,r=0;r<t;r++)i+=this.groupSizes[r];return i},e.insertRules=function(t,i){if(t>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,o=s;t>=o;)(o<<=1)<0&&Of(16,""+t);this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var c=this.indexOfGroup(t+1),f=0,d=i.length;f<d;f++)this.tag.insertRule(c,i[f])&&(this.groupSizes[t]++,c++)},e.clearGroup=function(t){if(t<this.length){var i=this.groupSizes[t],r=this.indexOfGroup(t),s=r+i;this.groupSizes[t]=0;for(var o=r;o<s;o++)this.tag.deleteRule(r)}},e.getGroup=function(t){var i="";if(t>=this.length||this.groupSizes[t]===0)return i;for(var r=this.groupSizes[t],s=this.indexOfGroup(t),o=s+r,a=s;a<o;a++)i+=this.tag.getRule(a)+`/*!sc*/
`;return i},n}(),dp=new Map,Wp=new Map,Ac=1,Gh=function(n){if(dp.has(n))return dp.get(n);for(;Wp.has(Ac);)Ac++;var e=Ac++;return dp.set(n,e),Wp.set(e,n),e},qB=function(n){return Wp.get(n)},$B=function(n,e){e>=Ac&&(Ac=e+1),dp.set(n,e),Wp.set(e,n)},ZB="style["+ou+'][data-styled-version="5.3.10"]',KB=new RegExp("^"+ou+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),JB=function(n,e,t){for(var i,r=t.split(","),s=0,o=r.length;s<o;s++)(i=r[s])&&n.registerName(e,i)},QB=function(n,e){for(var t=(e.textContent||"").split(`/*!sc*/
`),i=[],r=0,s=t.length;r<s;r++){var o=t[r].trim();if(o){var a=o.match(KB);if(a){var c=0|parseInt(a[1],10),f=a[2];c!==0&&($B(f,c),JB(n,f,a[3]),n.getTag().insertRules(c,i)),i.length=0}else i.push(o)}}},e4=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},N2=function(n){var e=document.head,t=n||e,i=document.createElement("style"),r=function(a){for(var c=a.childNodes,f=c.length;f>=0;f--){var d=c[f];if(d&&d.nodeType===1&&d.hasAttribute(ou))return d}}(t),s=r!==void 0?r.nextSibling:null;i.setAttribute(ou,"active"),i.setAttribute("data-styled-version","5.3.10");var o=e4();return o&&i.setAttribute("nonce",o),t.insertBefore(i,s),i},t4=function(){function n(t){var i=this.element=N2(t);i.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var c=s[o];if(c.ownerNode===r)return c}Of(17)}(i),this.length=0}var e=n.prototype;return e.insertRule=function(t,i){try{return this.sheet.insertRule(i,t),this.length++,!0}catch{return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var i=this.sheet.cssRules[t];return i!==void 0&&typeof i.cssText=="string"?i.cssText:""},n}(),n4=function(){function n(t){var i=this.element=N2(t);this.nodes=i.childNodes,this.length=0}var e=n.prototype;return e.insertRule=function(t,i){if(t<=this.length&&t>=0){var r=document.createTextNode(i),s=this.nodes[t];return this.element.insertBefore(r,s||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},n}(),i4=function(){function n(t){this.rules=[],this.length=0}var e=n.prototype;return e.insertRule=function(t,i){return t<=this.length&&(this.rules.splice(t,0,i),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},n}(),FE=Yx,r4={isServer:!Yx,useCSSOMInjection:!jB},U2=function(){function n(t,i,r){t===void 0&&(t=So),i===void 0&&(i={}),this.options=Ts({},r4,{},t),this.gs=i,this.names=new Map(r),this.server=!!t.isServer,!this.server&&Yx&&FE&&(FE=!1,function(s){for(var o=document.querySelectorAll(ZB),a=0,c=o.length;a<c;a++){var f=o[a];f&&f.getAttribute(ou)!=="active"&&(QB(s,f),f.parentNode&&f.parentNode.removeChild(f))}}(this))}n.registerId=function(t){return Gh(t)};var e=n.prototype;return e.reconstructWithOptions=function(t,i){return i===void 0&&(i=!0),new n(Ts({},this.options,{},t),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(r=(i=this.options).isServer,s=i.useCSSOMInjection,o=i.target,t=r?new i4(o):s?new t4(o):new n4(o),new YB(t)));var t,i,r,s,o},e.hasNameForId=function(t,i){return this.names.has(t)&&this.names.get(t).has(i)},e.registerName=function(t,i){if(Gh(t),this.names.has(t))this.names.get(t).add(i);else{var r=new Set;r.add(i),this.names.set(t,r)}},e.insertRules=function(t,i,r){this.registerName(t,i),this.getTag().insertRules(Gh(t),r)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(Gh(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var i=t.getTag(),r=i.length,s="",o=0;o<r;o++){var a=qB(o);if(a!==void 0){var c=t.names.get(a),f=i.getGroup(o);if(c&&f&&c.size){var d=ou+".g"+o+'[id="'+a+'"]',h="";c!==void 0&&c.forEach(function(m){m.length>0&&(h+=m+",")}),s+=""+f+d+'{content:"'+h+`"}/*!sc*/
`}}}return s}(this)},n}(),s4=/(a)(d)/gi,zE=function(n){return String.fromCharCode(n+(n>25?39:97))};function jy(n){var e,t="";for(e=Math.abs(n);e>52;e=e/52|0)t=zE(e%52)+t;return(zE(e%52)+t).replace(s4,"$1-$2")}var kl=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},O2=function(n){return kl(5381,n)};function o4(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(cf(t)&&!jx(t))return!1}return!0}var a4=O2("5.3.10"),l4=function(){function n(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&o4(e),this.componentId=t,this.baseHash=kl(a4,t),this.baseStyle=i,U2.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,i){var r=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))s.push(this.staticRulesId);else{var o=au(this.rules,e,t,i).join(""),a=jy(kl(this.baseHash,o)>>>0);if(!t.hasNameForId(r,a)){var c=i(o,"."+a,void 0,r);t.insertRules(r,a,c)}s.push(a),this.staticRulesId=a}else{for(var f=this.rules.length,d=kl(this.baseHash,i.hash),h="",m=0;m<f;m++){var v=this.rules[m];if(typeof v=="string")h+=v;else if(v){var _=au(v,e,t,i),w=Array.isArray(_)?_.join(""):_;d=kl(d,w+m),h+=w}}if(h){var M=jy(d>>>0);if(!t.hasNameForId(r,M)){var g=i(h,"."+M,void 0,r);t.insertRules(r,M,g)}s.push(M)}}return s.join(" ")},n}(),u4=/^\s*\/\/.*$/gm,c4=[":","[",".","#"];function f4(n){var e,t,i,r,s=n===void 0?So:n,o=s.options,a=o===void 0?So:o,c=s.plugins,f=c===void 0?Gp:c,d=new DB(a),h=[],m=function(w){function M(g){if(g)try{w(g+"}")}catch{}}return function(g,x,S,T,C,P,R,I,b,L){switch(g){case 1:if(b===0&&x.charCodeAt(0)===64)return w(x+";"),"";break;case 2:if(I===0)return x+"/*|*/";break;case 3:switch(I){case 102:case 112:return w(S[0]+x),"";default:return x+(L===0?"/*|*/":"")}case-2:x.split("/*|*/}").forEach(M)}}}(function(w){h.push(w)}),v=function(w,M,g){return M===0&&c4.indexOf(g[t.length])!==-1||g.match(r)?w:"."+e};function _(w,M,g,x){x===void 0&&(x="&");var S=w.replace(u4,""),T=M&&g?g+" "+M+" { "+S+" }":S;return e=x,t=M,i=new RegExp("\\"+t+"\\b","g"),r=new RegExp("(\\"+t+"\\b){2,}"),d(g||!M?"":M,T)}return d.use([].concat(f,[function(w,M,g){w===2&&g.length&&g[0].lastIndexOf(t)>0&&(g[0]=g[0].replace(i,v))},m,function(w){if(w===-2){var M=h;return h=[],M}}])),_.hash=f.length?f.reduce(function(w,M){return M.name||Of(15),kl(w,M.name)},5381).toString():"",_}var k2=df.createContext();k2.Consumer;var F2=df.createContext(),d4=(F2.Consumer,new U2),Yy=f4();function h4(){return me.useContext(k2)||d4}function p4(){return me.useContext(F2)||Yy}var m4=function(){function n(e,t){var i=this;this.inject=function(r,s){s===void 0&&(s=Yy);var o=i.name+s.hash;r.hasNameForId(i.id,o)||r.insertRules(i.id,o,s(i.rules,o,"@keyframes"))},this.toString=function(){return Of(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return n.prototype.getName=function(e){return e===void 0&&(e=Yy),this.name+e.hash},n}(),g4=/([A-Z])/,v4=/([A-Z])/g,y4=/^ms-/,_4=function(n){return"-"+n.toLowerCase()};function BE(n){return g4.test(n)?n.replace(v4,_4).replace(y4,"-ms-"):n}var HE=function(n){return n==null||n===!1||n===""};function au(n,e,t,i){if(Array.isArray(n)){for(var r,s=[],o=0,a=n.length;o<a;o+=1)(r=au(n[o],e,t,i))!==""&&(Array.isArray(r)?s.push.apply(s,r):s.push(r));return s}if(HE(n))return"";if(jx(n))return"."+n.styledComponentId;if(cf(n)){if(typeof(f=n)!="function"||f.prototype&&f.prototype.isReactComponent||!e)return n;var c=n(e);return au(c,e,t,i)}var f;return n instanceof m4?t?(n.inject(t,i),n.getName(i)):n:Xy(n)?function d(h,m){var v,_,w=[];for(var M in h)h.hasOwnProperty(M)&&!HE(h[M])&&(Array.isArray(h[M])&&h[M].isCss||cf(h[M])?w.push(BE(M)+":",h[M],";"):Xy(h[M])?w.push.apply(w,d(h[M],M)):w.push(BE(M)+": "+(v=M,(_=h[M])==null||typeof _=="boolean"||_===""?"":typeof _!="number"||_===0||v in NB||v.startsWith("--")?String(_).trim():_+"px")+";"));return m?[m+" {"].concat(w,["}"]):w}(n):n.toString()}var VE=function(n){return Array.isArray(n)&&(n.isCss=!0),n};function x4(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return cf(n)||Xy(n)?VE(au(OE(Gp,[n].concat(t)))):t.length===0&&n.length===1&&typeof n[0]=="string"?n:VE(au(OE(n,t)))}var S4=function(n,e,t){return t===void 0&&(t=So),n.theme!==t.theme&&n.theme||e||t.theme},M4=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,w4=/(^-|-$)/g;function sv(n){return n.replace(M4,"-").replace(w4,"")}var E4=function(n){return jy(O2(n)>>>0)};function Wh(n){return typeof n=="string"&&!0}var qy=function(n){return typeof n=="function"||typeof n=="object"&&n!==null&&!Array.isArray(n)},T4=function(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"};function A4(n,e,t){var i=n[t];qy(e)&&qy(i)?z2(i,e):n[t]=e}function z2(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];for(var r=0,s=t;r<s.length;r++){var o=s[r];if(qy(o))for(var a in o)T4(a)&&A4(n,o[a],a)}return n}var B2=df.createContext();B2.Consumer;var ov={};function H2(n,e,t){var i=jx(n),r=!Wh(n),s=e.attrs,o=s===void 0?Gp:s,a=e.componentId,c=a===void 0?function(x,S){var T=typeof x!="string"?"sc":sv(x);ov[T]=(ov[T]||0)+1;var C=T+"-"+E4("5.3.10"+T+ov[T]);return S?S+"-"+C:C}(e.displayName,e.parentComponentId):a,f=e.displayName,d=f===void 0?function(x){return Wh(x)?"styled."+x:"Styled("+kE(x)+")"}(n):f,h=e.displayName&&e.componentId?sv(e.displayName)+"-"+e.componentId:e.componentId||c,m=i&&n.attrs?Array.prototype.concat(n.attrs,o).filter(Boolean):o,v=e.shouldForwardProp;i&&n.shouldForwardProp&&(v=e.shouldForwardProp?function(x,S,T){return n.shouldForwardProp(x,S,T)&&e.shouldForwardProp(x,S,T)}:n.shouldForwardProp);var _,w=new l4(t,h,i?n.componentStyle:void 0),M=w.isStatic&&o.length===0,g=function(x,S){return function(T,C,P,R){var I=T.attrs,b=T.componentStyle,L=T.defaultProps,G=T.foldedComponentIds,K=T.shouldForwardProp,q=T.styledComponentId,te=T.target,Q=function(ce,V,B){ce===void 0&&(ce=So);var de=Ts({},V,{theme:ce}),Oe={};return B.forEach(function(fe){var ye,se,ie,_e=fe;for(ye in cf(_e)&&(_e=_e(de)),_e)de[ye]=Oe[ye]=ye==="className"?(se=Oe[ye],ie=_e[ye],se&&ie?se+" "+ie:se||ie):_e[ye]}),[de,Oe]}(S4(C,me.useContext(B2),L)||So,C,I),ue=Q[0],ne=Q[1],D=function(ce,V,B,de){var Oe=h4(),fe=p4(),ye=V?ce.generateAndInjectStyles(So,Oe,fe):ce.generateAndInjectStyles(B,Oe,fe);return ye}(b,R,ue),H=P,z=ne.$as||C.$as||ne.as||C.as||te,oe=Wh(z),W=ne!==C?Ts({},C,{},ne):C,X={};for(var j in W)j[0]!=="$"&&j!=="as"&&(j==="forwardedAs"?X.as=W[j]:(K?K(j,IE,z):!oe||IE(j))&&(X[j]=W[j]));return C.style&&ne.style!==C.style&&(X.style=Ts({},C.style,{},ne.style)),X.className=Array.prototype.concat(G,q,D!==q?D:null,C.className,ne.className).filter(Boolean).join(" "),X.ref=H,me.createElement(z,X)}(_,x,S,M)};return g.displayName=d,(_=df.forwardRef(g)).attrs=m,_.componentStyle=w,_.displayName=d,_.shouldForwardProp=v,_.foldedComponentIds=i?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):Gp,_.styledComponentId=h,_.target=i?n.target:n,_.withComponent=function(x){var S=e.componentId,T=function(P,R){if(P==null)return{};var I,b,L={},G=Object.keys(P);for(b=0;b<G.length;b++)I=G[b],R.indexOf(I)>=0||(L[I]=P[I]);return L}(e,["componentId"]),C=S&&S+"-"+(Wh(x)?x:sv(kE(x)));return H2(x,Ts({},T,{attrs:m,componentId:C}),t)},Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=i?z2({},n.defaultProps,x):x}}),Object.defineProperty(_,"toString",{value:function(){return"."+_.styledComponentId}}),r&&XB(_,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),_}var $y=function(n){return function e(t,i,r){if(r===void 0&&(r=So),!Gx.isValidElementType(i))return Of(1,String(i));var s=function(){return t(i,r,x4.apply(void 0,arguments))};return s.withConfig=function(o){return e(t,i,Ts({},r,{},o))},s.attrs=function(o){return e(t,i,Ts({},r,{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},s}(H2,n)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(n){$y[n]=$y(n)});const kf=$y,C4=(n,e)=>{if(e.payload.index===void 0)throw Error("Invalid action for gardenPlant Reducer: no index in payload");const t=n[e.payload.index];let i=t.position;const r=e.payload.direction;if(r===As.UP?i.add(new N(0,1,0)):r===As.DOWN?i.add(new N(0,-1,0)):r===As.LEFT?i.add(new N(-1,0,0)):r===As.RIGHT&&i.add(new N(1,0,0)),t.kind==="BambooStalkData"){const s={kind:t.kind,data:t.data,position:i,rotation:t.rotation};return n[e.payload.index]=s,[...n]}else if(t.kind==="FlowerData"){const s={kind:t.kind,data:t.data,position:i,rotation:t.rotation};return n[e.payload.index]=s,[...n]}else throw Error("Invalid action for gardenReducer: plant accessed by index is wrong type")},b4=(n,e)=>{const{index:t}=e.payload;if(t===void 0)throw Error("Bamboo append operation requires plant index");const r=n[t].data.clone();r.append(Math.random()*10);const s={...n,[`${t}`]:{...n[t],data:r}};return Object.values(s)},P4=(n,e)=>{const{index:t}=e.payload;if(t===void 0)throw Error("Bamboo pop operation requires plant index");const r=n[t].data.clone();r.pop();const s={...n,[`${t}`]:{...n[t],data:r}};return Object.values(s)},R4=(n,e)=>{const{index:t,nodeIndex:i}=e.payload;if(t===void 0)throw Error("Bamboo delete @ index requires plant index");if(i===void 0)throw Error("Bamboo delete @ index requires node index");const s=n[t].data.clone();s.deleteAtIndex(i);const o={...n,[`${t}`]:{...n[t],data:s}};return Object.values(o)},L4=(n,e)=>{const{index:t,nodeIndex:i}=e.payload;if(t===void 0)throw Error("Bamboo delete after requires plant index");if(i===void 0)throw Error("Bamboo delete after requires node index");const s=n[t].data.clone();s.delete(i);const o={...n,[`${t}`]:{...n[t],data:s}};return Object.values(o)},I4=(n,e)=>{const{index:t,nodeIndex:i}=e.payload;if(t===void 0)throw Error("Bamboo insert requires plant index");if(i===void 0)throw Error("Bamboo insert requires node index");const s=n[t].data.clone();s.insertAtIndex(i,Math.random()*10);const o={...n,[`${t}`]:{...n[t],data:s}};return Object.values(o)},D4=(n,e)=>{const{index:t}=e.payload;if(t===void 0)throw Error("Flower append requires plant index");const r=n[t].data.clone();r.append(2);const s={...n,[`${t}`]:{...n[t],data:r}};return Object.values(s)},N4=(n,e)=>{const{index:t,nodeIndex:i}=e.payload;if(t===void 0)throw Error("Flower delete @ index requires plant index");if(i===void 0)throw Error("Flower node index required");const s=n[t].data.clone();s.delete(i);const o={...n,[`${t}`]:{...n[t],data:s}};return Object.values(o)};var As=(n=>(n[n.UP=0]="UP",n[n.DOWN=1]="DOWN",n[n.LEFT=2]="LEFT",n[n.RIGHT=3]="RIGHT",n))(As||{}),ro=(n=>(n.BAMBOO="bamboo",n.FLOWER="flower",n.TREE="tree",n.STAR="star",n))(ro||{}),so=(n=>(n.APPEND="append",n.DELETEATINDEX="deleteAtIndex",n.INSERT="insert",n.DELETE="delete",n.POP="pop",n))(so||{});function U4(n,e){const{plantName:t,opName:i}=e.payload;if(e.type==="plantOperation")if(i==="append"){if(t==="bamboo")return b4(n,e);if(t==="flower")return D4(n,e);throw Error(`No append handler for ${t}`)}else if(i==="pop"){if(t==="bamboo")return P4(n,e);throw Error(`No pop handler for ${t}`)}else throw Error(`No ${i} handler for plant: ${t}`);else if(e.type==="nodeOperation")if(i==="deleteAtIndex"){if(t==="bamboo")return R4(n,e);if(t==="flower")return N4(n,e);throw Error(`No delete @ index handler for ${t}`)}else if(i==="insert"){if(t==="bamboo")return I4(n,e);throw Error(`No insert @ index handler for ${t}`)}else if(i==="delete"){if(t==="bamboo")return L4(n,e);throw Error(`No insert @ index handler for ${t}`)}else throw Error(`No ${i} handler for plant: ${t}`);else{if(e.type==="movePlant")return C4(n,e);throw Error(`Invalid action type for gardenReducer: no action matches supplied name ${e.type}`)}}const GE=kf.button`
  /* width: auto; */
  height: 40px;
  background: transparent;
  color: white;
  border: 1px solid #ff0088;
  border-radius: 100px;
  cursor: default;
  display: flex;
  justify-content: center;
  align-items: center;

  &:hover {
    border: 1px solid #ddff00;
  }

  &:disabled {
    opacity: 0.3;
    pointer-events: none;
  }

  @media only screen and (max-width: 700px) {
    display: none;
    /* height: 30px;
    font-size: 12px; */
  }
`,O4=kf.div`
  display: flex;
  gap: 10px;
  margin: -25px 10px;
  width: 350px;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  /* border: 1px solid red; */

  @media only screen and (max-width: 700px) {
    margin: -30px 25px;
    width: 150px;
  }
`,Xh=kf.button`
  border: 1px solid #ff0088;
  border-radius: 100px;
  display: flex;
  justify-content: center;
  font-size: 40px;
  margin: 0px;
  padding: 0px;
  width: 60px;
  height: 60px;
  background: transparent;
  color: white;
  cursor: default;

  &:hover {
    border: 1px solid #ddff00;
  }

  @media only screen and (max-width: 700px) {
    /* font-size: 20px;
    width: 40px;
    height: 40px;
    width: 40px;
    height: 40px; */
    display: none;
  }
`,k4=kf.div`
  margin: -5px 25px;
  display: flex;
  flex-direction: column;
  align-items: center;
  
  @media only screen and (max-width: 700px) {
    /* margin: 60px 5px; */
    display: none;
  }
`,F4=kf.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 190px;

  @media only screen and (max-width: 700px) {
    width: 125px;
  }
`,V2=n=>{const{activeNodeId:e,moveOperations:t,plantOperations:i,nodeOperations:r}=n,[s,o]=me.useState(0),[a,c]=me.useState(0),f=me.useRef(null);return me.useEffect(()=>{setTimeout(()=>{var m,v;const d=((m=f.current)==null?void 0:m.getBoundingClientRect().height)||0;o(d);const h=((v=f.current)==null?void 0:v.getBoundingClientRect().width)||0;c(h+25)})},[]),lt.jsxs(lt.Fragment,{children:[lt.jsx(TE,{calculatePosition:()=>[0,window.innerHeight-200,0],children:lt.jsxs(k4,{children:[lt.jsx(Xh,{onPointerDown:d=>{d.stopPropagation(),t.move(As.UP)},children:""}),lt.jsxs(F4,{children:[lt.jsx(Xh,{onPointerDown:d=>{d.stopPropagation(),t.move(As.LEFT)},children:""}),lt.jsx(Xh,{onPointerDown:d=>{d.stopPropagation(),t.move(As.RIGHT)},children:""})]}),lt.jsx(Xh,{onPointerDown:d=>{d.stopPropagation(),t.move(As.DOWN)},children:""})]})}),lt.jsx(TE,{calculatePosition:()=>[window.innerWidth-a,window.innerHeight-s,0],children:lt.jsxs(O4,{ref:f,children:[Object.keys(i).map((d,h)=>{const m=i[d];return lt.jsx(GE,{onPointerDown:v=>{v.stopPropagation(),m()},onDoubleClick:v=>v.stopPropagation(),children:d},h)}),Object.keys(r).map((d,h)=>{const m=r[d];return lt.jsx(GE,{disabled:e===-1,onPointerDown:v=>{v.stopPropagation(),m(e)},onDoubleClick:v=>v.stopPropagation(),children:d},h)})]})})]})},km=()=>{const[n,e]=me.useState(-1);return{activeItem:n,selectItem:r=>{e(r)},deselectAllItems:()=>{e(-1)}}},z4=n=>{const{root:e,position:t,rotation:i,selectPlant:r,deselectAllPlants:s,isActive:o,gardenDispatch:a,index:c}=n,{activeItem:f,selectItem:d,deselectAllItems:h}=km();let m=0;const v=[];v.push(lt.jsx(uf,{value:2,position:t.clone().add(new N(0,0,.3)),rotation:i,cylinderArgs:[1,2,1],isSelected:!1,defaultMaterial:wB,deselectAllPlants:s,deselectAllNodes:()=>{h(),s()},selectPlant:r,selectNode:h},-1)),e.intoArray().forEach((R,I)=>{v.push(lt.jsx(uf,{value:R,position:t.clone().add(new N(0,m+.5*R,0)),rotation:i.clone().add(new N(0,0,0)),cylinderArgs:[1,1,R],isSelected:o&&f===I,deselectAllPlants:s,selectPlant:r,defaultMaterial:MB,deselectAllNodes:h,selectNode:()=>d(I)},I)),m+=R});const _=R=>{a({type:"movePlant",payload:{index:c,direction:R}})},w=()=>{const R={type:"plantOperation",payload:{plantName:ro.BAMBOO,opName:so.APPEND,index:c}};a(R)},M=()=>{const R={type:"plantOperation",payload:{plantName:ro.BAMBOO,opName:so.POP,index:c}};a(R)},g=R=>{const I={type:"nodeOperation",payload:{plantName:ro.BAMBOO,opName:so.INSERT,index:c,nodeIndex:R}};a(I)},x=R=>{const I={type:"nodeOperation",payload:{plantName:ro.BAMBOO,opName:so.DELETE,index:c,nodeIndex:R}};a(I)},S=R=>{const I={type:"nodeOperation",payload:{plantName:ro.BAMBOO,opName:so.DELETEATINDEX,index:c,nodeIndex:R}};a(I)},T={move:R=>_(R)},C={append:w,pop:M},P={insert:g,deleteAfter:x,deleteAtIndex:S};return lt.jsxs(lt.Fragment,{children:[v,o&&lt.jsx(V2,{data:e,activeNodeId:f,moveOperations:T,plantOperations:C,nodeOperations:P})]})};class B4{constructor(){_i(this,"dummyHead");_i(this,"length");this.dummyHead=new WE(-1),this.length=0}toString(){let e=this.dummyHead.next,t=e;const i=[];if(e)i.push(e.value),e=e.next;else return"This circularly linked list is empty.";for(;e!==t&&e;)i.push(e.value),e=e.next;return i.toString()}append(e){const t=new WE(e);let i=this.dummyHead.next;if(!i)this.dummyHead.next=t,t.prev=t,t.next=t;else{let r=i.prev;r.next=t,t.prev=r,i.prev=t,t.next=i}this.length++}getValue(e){if(this.length===0)return null;let t=e%this.length,i=this.dummyHead.next;for(;t>0&&i;)i=i.next,t--;return i?i.value:null}setValue(e,t){if(this.length===0)return;let i=e%this.length,r=this.dummyHead.next;for(;i>0&&r;)r=r.next,i--;r&&(r.value=t)}getNode(e){if(this.length===0)return null;let t=e%this.length,i=this.dummyHead.next;for(;t>0&&i;)i=i.next,t--;return i||null}delete(e){let t=this.getNode(e);if(!t)return null;if(t===this.dummyHead.next&&(this.dummyHead.next=this.dummyHead.next.next),this.length===1)this.dummyHead.next=null;else{let i=t.prev;i.next=t.next;let r=t.next;r.prev=i}this.length--}intoArray(){let e=this.dummyHead.next,t=e;const i=[];if(e)i.push(e.value),e=e.next;else return[];for(;e!==t&&e;)i.push(e.value),e=e.next;return i}clone(){return G2(this.intoArray())}}const G2=n=>{const e=new B4;return n.forEach(t=>{e.append(t)}),e};class WE{constructor(e){_i(this,"value");_i(this,"prev");_i(this,"next");this.value=e,this.prev=null,this.next=null}}const H4=n=>{const{root:e,position:t,rotation:i,selectPlant:r,deselectAllPlants:s,isActive:o,gardenDispatch:a,index:c}=n,{activeItem:f,selectItem:d,deselectAllItems:h}=km(),m=[];m.push(lt.jsx(uf,{value:2,position:t.clone().add(new N(0,0,.3)),rotation:i.clone().add(new N(0,1.5708,0)),cylinderArgs:[1,2,.5],isSelected:!1,defaultMaterial:EB,deselectAllPlants:s,deselectAllNodes:()=>{h(),s()},selectPlant:r,selectNode:h},-1)),e.intoArray().forEach((S,T)=>{m.push(lt.jsx(uf,{value:S,position:t.clone().add(new N((S*2-1.5)*Math.cos(2*Math.PI/e.length*T),(S*2-1.5)*Math.sin(2*Math.PI/e.length*T),T%2===0?.05:-.05)),rotation:i.clone().add(new N(0,1.5708,0)),cylinderArgs:[S,S,.1],isSelected:o&&f===T,deselectAllNodes:h,selectNode:()=>d(T),defaultMaterial:TB,deselectAllPlants:s,selectPlant:r},T))});const v=S=>{a({type:"movePlant",payload:{index:c,direction:S}})},_=()=>{const S={type:"plantOperation",payload:{plantName:ro.FLOWER,opName:so.APPEND,index:c}};a(S)},w=S=>{const T={type:"nodeOperation",payload:{plantName:ro.FLOWER,opName:so.DELETEATINDEX,index:c,nodeIndex:S}};a(T)},M={move:S=>v(S)},g={append:_},x={deleteAtIndex:w};return lt.jsxs(lt.Fragment,{children:[m,o&&lt.jsx(V2,{data:e,activeNodeId:f,moveOperations:M,plantOperations:g,nodeOperations:x})]})},jp=class{constructor(e,t){_i(this,"uuid");_i(this,"val");_i(this,"neighbors");this.uuid=jp.idIter++,this.val=e,this.neighbors=t}connect(e){e.neighbors.push(this),this.neighbors.push(e)}dfs(){const e=new Set,t=i=>{if(!e.has(i)){e.add(i);for(let r of i.neighbors)t(r)}};return t(this),Array.from(e)}bfs(){const e=new Set,t=[this];for(;t.length;){const i=t.shift();if(i&&!e.has(i)){e.add(i);for(let r of i.neighbors)t.push(r)}}return Array.from(e)}flatten(){const e=this.dfs();e.sort((s,o)=>s.uuid<o.uuid?-1:1);const t=e.map(s=>({value:s.val,uuid:s.uuid})),i=t.length,r=Array.from(Array(i),()=>Array(i).fill(!1));for(let s=0;s<t.length;s++)for(let o of e[s].neighbors){const a=o.uuid,c=e.findIndex(f=>f.uuid===a);r[s][c]=!0,r[c][s]=!0}return{nodes:t,adjacencyMatrix:r}}static unflatten({nodes:e,adjacencyMatrix:t}){const i=e.map(s=>new jp(s.value,[])),r=JSON.parse(JSON.stringify(t));i.sort((s,o)=>s.uuid<o.uuid?-1:1);for(let s=0;s<r.length;s++)for(let o=0;o<r[s].length;o++)r[s][o]&&i[s].connect(i[o]);return i[0]}};let Yl=jp;_i(Yl,"idIter",0);const V4=n=>{const{data:e,position:t,rotation:i,selectPlant:r,deselectAllPlants:s,isActive:o}=n,c=Yl.unflatten(e).bfs(),[f,d]=me.useState(0);me.useEffect(()=>{const g=setInterval(()=>{d((f+1)%c.length)},50);return()=>clearInterval(g)},[f,c.length]);const{activeItem:h,selectItem:m,deselectAllItems:v}=km(),_=[],w=[],M=new Map;return c.forEach(g=>{const x=`${g.val[0]},${g.val[1]}`;for(const S of g.neighbors){const T=`${S.val[0]},${S.val[1]}`,C=x<T?x+T:T+x;M.has(C)||M.set(C,[g,S])}}),c.forEach((g,x)=>{_.push(lt.jsx(uf,{value:2,position:t.clone().add(new N(g.val[0],g.val[1],0)),rotation:i.clone(),cylinderArgs:[.5,.5,.5],isSelected:o&&h===x,deselectAllPlants:s,selectPlant:r,defaultMaterial:f===x?SB:xB,deselectAllNodes:v,selectNode:()=>m(x)},x))}),Array.from(M.values()).forEach((g,x)=>{const[S,T]=g,C=t.clone().add(new N(S.val[0],S.val[1],0)),P=t.clone().add(new N(T.val[0],T.val[1],0));w.push(lt.jsx(gB,{points:[C,P],color:"rgb(255, 255, 255)",dashScale:4,lineWidth:.5},S.val[0]+x))}),lt.jsxs(mB,{depth:75,children:[_,w]})},G4={kind:"BambooStalkData",data:jl.fromArray([2,8,12,2]),position:new N(0,0,0),rotation:new N(0,0,0)},W4={kind:"BambooStalkData",data:jl.fromArray([4,6,8,2]),position:new N(4,0,1),rotation:new N(0,0,0)},X4={kind:"BambooStalkData",data:jl.fromArray([2,6,4,2]),position:new N(2,0,2),rotation:new N(0,0,0)},j4={kind:"FlowerData",data:G2([2,2,2,2,2,2]),position:new N(12,4,2),rotation:new N(1.5708,0,0)},Y4=()=>{const n=new Yl([0,0],[]),e=4,t=[];let i=0;const r=5,s=6;for(let a=0;a<s;a++)i+=Math.pow(2,a)*r;for(let a=0;a<i;a++)t.push(Math.random()*2*Math.PI);t.sort();const o=Math.pow(2,s)-1;for(let a=Math.floor(o/2)+1;a<i;a+=o){const c=Zy(s,1,a,t,e);c&&n.connect(c)}return n},Zy=(n,e,t,i,r)=>{if(e>n||t>=i.length)return;const s=i[t],o=Math.cos(s)*e*r,a=Math.sin(s)*e*r,c=new Yl([o,a],[]),f=n-e,d=Math.pow(2,f-1),h=Zy(n,e+1,t-d,i,r),m=Zy(n,e+1,t+d,i,r);return h&&c.connect(h),m&&c.connect(m),c},q4=Y4().flatten(),$4={kind:"ConstellationData",data:q4,position:new N,rotation:new N},Z4=[G4,W4,X4,j4,$4],K4=()=>{const[n,e]=me.useReducer(U4,Z4),{activeItem:t,selectItem:i,deselectAllItems:r}=km(),s=()=>n==null?void 0:n.map((o,a)=>{switch(o.kind){case"BambooStalkData":return lt.jsx(z4,{index:a,gardenDispatch:e,root:o.data,position:o.position,rotation:o.rotation,selectPlant:()=>i(a),deselectAllPlants:r,isActive:t===a},a);case"FlowerData":return lt.jsx(H4,{index:a,gardenDispatch:e,root:o.data,position:o.position,rotation:o.rotation,selectPlant:()=>i(a),deselectAllPlants:r,isActive:t===a},a);case"ConstellationData":return lt.jsx(V4,{index:a,gardenDispatch:e,data:o.data,position:o.position,rotation:o.rotation,selectPlant:()=>i(a),deselectAllPlants:r,isActive:t===a},a);default:return lt.jsx(lt.Fragment,{})}});return lt.jsx(lt.Fragment,{children:lt.jsxs(Jz,{camera:{position:[0,20,50]},frameloop:"demand",children:[lt.jsx(vB,{target:[5,5,0]}),lt.jsx("ambientLight",{intensity:1}),lt.jsx("directionalLight",{intensity:1}),lt.jsx(_B,{args:[75,75,75],visible:!0,onPointerDown:o=>{o.stopPropagation(),r()},material:new xx({color:16777215,transparent:!0,opacity:0,side:ei})}),s()]})})};function J4(){return lt.jsx("div",{style:{width:"100vw",height:"100vh"},children:lt.jsx(K4,{})})}av.createRoot(document.getElementById("root")).render(lt.jsx(df.StrictMode,{children:lt.jsx(J4,{})}));
